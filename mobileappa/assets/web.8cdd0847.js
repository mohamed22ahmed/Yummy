import{W as i}from"./index.4c3eb750.js";class u extends i{async initialize(e){const n={version:"v17.0"};return await this.loadScript(e.locale),FB.init(Object.assign(Object.assign({},n),e))}loadScript(e){if(typeof document=="undefined")return Promise.reject("document global not found");const n="fb";if(document.getElementById(n))return Promise.resolve();const r=document.getElementsByTagName("head")[0],s=document.createElement("script");return new Promise(o=>{s.onload=()=>o(),s.defer=!0,s.async=!0,s.id=n,s.src=`https://connect.facebook.net/${e!=null?e:"en_US"}/sdk.js`,r.appendChild(s)})}async login(e){return new Promise((n,t)=>{FB.login(r=>{r.status==="connected"?n({accessToken:{token:r.authResponse.accessToken}}):t({accessToken:{token:null}})},{scope:e.permissions.join(",")})})}async logout(){return new Promise(e=>FB.logout(()=>e()))}async reauthorize(){return new Promise(e=>FB.reauthorize(n=>e(n)))}async getCurrentAccessToken(){return new Promise((e,n)=>{FB.getLoginStatus(t=>{if(t.status==="connected"){const r={accessToken:{applicationId:void 0,declinedPermissions:[],expires:void 0,isExpired:void 0,lastRefresh:void 0,permissions:[],token:t.authResponse.accessToken,userId:t.authResponse.userID}};e(r)}else n({accessToken:{token:null}})})})}async getProfile(e){const n=e.fields.join(",");return new Promise((t,r)=>{FB.api("/me",{fields:n},s=>{if(s.error){r(s.error.message);return}t(s)})})}async logEvent(){return Promise.resolve()}async setAutoLogAppEventsEnabled(){return Promise.resolve()}async setAdvertiserTrackingEnabled(){return Promise.resolve()}async setAdvertiserIDCollectionEnabled(){return Promise.resolve()}}export{u as FacebookLoginWeb};
