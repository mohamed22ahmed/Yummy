import{_ as T,l as V,Q as U,R as B,av as k,m as S,aO as x,n as A,p as r,U as D,f as e,s as t,a6 as v,F as P,X as n,a5 as c,Y as i,S as p,ad as L,a7 as Q,a8 as N,a9 as u,q as d,ac as l,as as f,ab as g,az as y,bz as q,V as F,t as z,aa as _}from"./index.4c3eb750.js";import{Q as I}from"./QToolbarTitle.eef0f00f.js";import{Q as M}from"./QToolbar.45531803.js";import{Q as O}from"./QHeader.d51d9950.js";import{Q as R}from"./QImg.721b5b7a.js";import{Q as w}from"./QSpace.5a38bd33.js";import{Q as E}from"./QList.5b181e45.js";import{Q as Y}from"./QPage.959871c7.js";import{u as j}from"./ClientStore.4828b201.js";import{S as H}from"./index.8d7cc967.js";import"./QResizeObserver.4d611c44.js";const W={name:"AccountMenu",components:{NotiButton:V(()=>z(()=>import("./NotiButton.444f136c.js"),["assets/NotiButton.444f136c.js","assets/index.4c3eb750.js","assets/index.4784a50d.css","assets/QBadge.df254e4a.js"]))},data(){return{data:[],theme_mode:!1,app_push_notifications:!1,promotional_push_notifications:!1,user_settings:{},rtl:!1}},setup(){const a=U(),s=B(),C=j();return{DataStore:a,DataStorePersisted:s,ClientStore:C}},watch:{theme_mode(a,s){this.$q.dark.set(a),this.DataStorePersisted.dark_mode=a},rtl(a,s){this.DataStorePersisted.rtl=a,this.$q.lang.set({rtl:a})}},created(){this.data=k.getUser(),this.authenticate(),this.theme_mode=this.DataStorePersisted.dark_mode,this.$q.dark.set(this.theme_mode),this.rtl=this.DataStorePersisted.rtl,this.app_push_notifications=this.ClientStore.user_settings.app_push_notifications==1,this.promotional_push_notifications=this.ClientStore.user_settings.promotional_push_notifications==1},computed:{getCurrency(){return Object.keys(this.DataStore.currency_list).length>0?this.DataStorePersisted.use_currency_code?this.DataStorePersisted.use_currency_code:this.DataStore.default_currency_code:!1}},methods:{authenticate(){k.authenticate().then(a=>{}).catch(a=>{S.notify("dark",a,"error",this.$q),k.logout(),this.$router.push("/user/login")}).then(a=>{})},logout(){this.$q.dialog({title:this.$t("Logout"),message:this.$t("Are you sure you want to logout?"),persistent:!0,position:"standard",transitionShow:"fade",transitionHide:"fade",ok:{unelevated:!0,color:"primary",rounded:!1,"text-color":"white",size:"md",label:this.$t("Yes"),"no-caps":!0},cancel:{unelevated:!0,rounded:!1,color:"grey-3","text-color":"black",size:"md",label:this.$t("Cancel"),"no-caps":!0}}).onOk(()=>{if(this.$q.capacitor){let a=k.getUser();a&&this.unsubscribeToTopic(a.client_uuid)}k.logout(),this.ClientStore.user_settings=[],this.$router.push("/home")}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{})},Updateaccountnotification(a){if(this.$q.capacitor)if(a)this.subsribeDevice();else{let s=k.getUser();s&&this.unsubscribeToTopic(s.client_uuid)}else S.fetchDataByTokenPost("Updateaccountnotification","app_push_notifications="+this.ClientStore.push_notifications).then(s=>{this.ClientStore.user_settings.app_push_notifications=s.details.app_push_notifications}).catch(s=>{}).then(s=>{})},Updateaccountpromonotification(){S.fetchDataByTokenPost("Updateaccountpromonotification","promotional_push_notifications="+this.promotional_push_notifications).then(a=>{this.ClientStore.user_settings.promotional_push_notifications=a.details.promotional_push_notifications}).catch(a=>{}).then(a=>{})},inviteFriends(){this.$q.capacitor?H.share({title:this.DataStore.invite_friend_settings.title,text:this.DataStore.invite_friend_settings.text,url:this.DataStore.invite_friend_settings.url,dialogTitle:""}).then(a=>{}).catch(a=>{}):navigator.share?navigator.share({title:this.DataStore.invite_friend_settings.title,text:this.DataStore.invite_friend_settings.text,url:this.DataStore.invite_friend_settings.url}).then(()=>console.log("Successful share")).catch(a=>console.log("Error sharing",a)):this.$q.capacitor?S.showToast("Share not supported"):S.notify("dark","Share not supported","error",this.$q)},subsribeDevice(){let a=k.getUser();a&&x.subscribeTo({topic:a.client_uuid}).then(s=>{this.ClientStore.push_notifications=!0,this.ClientStore.push_off=!1}).catch(s=>{this.ClientStore.push_notifications=!1})},unsubscribeToTopic(a){x.unsubscribeFrom({topic:a}).then(()=>{this.ClientStore.push_notifications=!1,this.ClientStore.push_off=!0}).catch(s=>{})}}},X={class:"row items-center"},G={class:"col-3"},J={class:"col"},K={class:"text-weight-bold q-ma-none"},Z={class:"text-weight-medium q-ma-none ellipsis"},ee={class:"row items-center q-gutter-sm"},te={class:"col text-center"},ae={class:"col text-center"},le={class:"col text-center"};function oe(a,s,C,o,h,b){const $=A("NotiButton");return r(),D(P,null,[e(O,{reveal:"","reveal-offset":"50",class:v({"bg-transparent text-white":a.$q.dark.mode,"bg-grey-1 text-dark":!a.$q.dark.mode})},{default:t(()=>[e(M,null,{default:t(()=>[e(n,{to:"/home",flat:"",round:"",dense:"",icon:"las la-angle-left",class:"q-mr-sm","text-color":a.$q.dark.mode?"white":"dark"},null,8,["text-color"]),e(I,{class:"text-weight-bold"},{default:t(()=>[c(i(a.$t("Profile")),1)]),_:1}),e($)]),_:1})]),_:1},8,["class"]),e(Y,{padding:"",class:v(["q-pa-md",{"bg-transparent":a.$q.dark.mode,"bg-grey-1":!a.$q.dark.mode}])},{default:t(()=>[p("div",X,[p("div",G,[e(L,null,{default:t(()=>[e(R,{src:h.data.avatar,lazy:"",style:{height:"50px","max-width":"50px"},"spinner-color":"secondary","spinner-size":"20px"},null,8,["src"])]),_:1})]),p("div",J,[p("h5",K,i(h.data.first_name)+" "+i(h.data.last_name),1),p("p",Z,i(h.data.email_address),1)])]),e(w,{class:"q-pa-sm"}),e(Q,{flat:"",class:v(["radius8",{"bg-grey500":a.$q.dark.mode,"bg-white":!a.$q.dark.mode}])},{default:t(()=>[e(N,null,{default:t(()=>[p("div",ee,[p("div",te,[e(n,{to:"/account/allorder",round:"",color:"secondary",icon:"las la-truck",dense:"",flat:""}),e(n,{to:"/account/allorder",flat:"","no-caps":"",label:a.$t("My All orders"),class:"line-height-one q-pa-none","text-color":a.$q.dark.mode?"bluegrey500":"dark"},null,8,["label","text-color"])]),p("div",ae,[e(n,{to:{path:"feed",query:{query:"promo",page_title:this.$t("Promo")}},round:"",color:"primary",icon:"las la-percentage",dense:"",flat:""},null,8,["to"]),e(n,{flat:"","no-caps":"",label:a.$t("Offers & Coupons"),class:"line-height-one q-pa-none",to:{path:"feed",query:{query:"promo",page_title:this.$t("Promo")}},"text-color":a.$q.dark.mode?"bluegrey500":"dark"},null,8,["label","to","text-color"])]),p("div",le,[e(n,{round:"",color:"yellow-5",icon:"las la-map-marker",dense:"",flat:"",to:"/account/my-address"}),e(n,{to:"/account/my-address",flat:"","no-caps":"",label:a.$t("Your Addresses"),class:"line-height-one q-pa-none","text-color":a.$q.dark.mode?"bluegrey500":"dark"},null,8,["label","text-color"])])])]),_:1})]),_:1},8,["class"]),e(w,{class:"q-pa-sm"}),e(Q,{flat:"",class:v(["radius8",{"bg-transparent":a.$q.dark.mode,"bg-grey-1":!a.$q.dark.mode}])},{default:t(()=>[e(E,{class:"modified-qlist"},{default:t(()=>[u((r(),d(g,{clickable:"",to:"/account/edit-profile"},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"las la-user-alt"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Manage Profile")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{round:"",unelevated:"","text-color":"dark",icon:o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[_]]),u((r(),d(g,{clickable:"",to:"/account/change-password"},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"las la-lock"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Change Password")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{round:"",unelevated:"","text-color":"dark",icon:o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[_]]),u((r(),d(g,{clickable:"",to:"/account/payments"},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"las la-credit-card"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Payment")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{round:"",unelevated:"","text-color":"dark",icon:o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[_]]),u((r(),d(g,{clickable:"",to:"/account/favourites"},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"lab la-gratipay"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Favourites")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{round:"",unelevated:"","text-color":"dark",icon:o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[_]]),o.DataStore.points_enabled?u((r(),d(g,{key:0,clickable:"",to:"/account/points"},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"card_giftcard"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Points")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{round:"",unelevated:"","text-color":"dark",icon:o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[_]]):y("",!0),o.DataStore.digitalwallet_enabled?u((r(),d(g,{key:1,clickable:"",to:"/account/wallet"},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"o_account_balance_wallet"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Digital Wallet")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{round:"",unelevated:"","text-color":"dark",icon:o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[_]]):y("",!0),o.DataStore.chat_enabled?u((r(),d(g,{key:2,clickable:"",to:"/account/chat"},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"o_forum"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Live Chat")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{round:"",unelevated:"","text-color":"dark",icon:o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[_]]):y("",!0),u((r(),d(g,{clickable:"",to:"/booking"},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"table_restaurant"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Bookings")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{round:"",unelevated:"","text-color":"dark",icon:o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[_]]),u((r(),d(g,{clickable:""},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"las la-bell"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Push Notifications")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(q,{modelValue:o.ClientStore.push_notifications,"onUpdate:modelValue":[s[0]||(s[0]=m=>o.ClientStore.push_notifications=m),b.Updateaccountnotification],color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})),[[_]]),u((r(),d(g,{clickable:""},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"las la-bell"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Promotional Notifications")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(q,{modelValue:h.promotional_push_notifications,"onUpdate:modelValue":[s[1]||(s[1]=m=>h.promotional_push_notifications=m),b.Updateaccountpromonotification],color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})),[[_]]),o.DataStore.multicurrency_enabled?u((r(),d(g,{key:3,clickable:"",to:"/account/currency"},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"toll"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Currency")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{"no-caps":"",label:b.getCurrency,unelevated:"","text-color":"dark","icon-right":o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["label","icon-right"])]),_:1})]),_:1})),[[_]]):y("",!0),o.DataStore.enabled_language?u((r(),d(g,{key:4,clickable:"",to:"/account/language"},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"las la-credit-card"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Language")),1)]),_:1}),o.DataStore.language_data?(r(),d(l,{key:0,side:""},{default:t(()=>[(r(!0),D(P,null,F(o.DataStore.language_data.data,m=>(r(),D(P,{key:m},[m.code==this.DataStorePersisted.app_language?(r(),d(n,{key:0,"no-caps":"",label:m.title,unelevated:"","text-color":"dark","icon-right":o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["label","icon-right"])):y("",!0)],64))),128))]),_:1})):y("",!0)]),_:1})),[[_]]):y("",!0),o.DataStore.enabled_language?u((r(),d(g,{key:5,clickable:"",onClick:s[2]||(s[2]=m=>h.rtl=!h.rtl)},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:o.DataStorePersisted.rtl?"format_textdirection_l_to_r":"format_textdirection_r_to_l"},null,8,["name"])]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Direction")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{"no-caps":"",label:o.DataStorePersisted.rtl?a.$t("LRT"):a.$t("RTL"),unelevated:"","text-color":"dark","icon-right":o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["label","icon-right"])]),_:1})]),_:1})),[[_]]):y("",!0),u((r(),d(g,{clickable:""},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"las la-adjust"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Dark Mode")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(q,{modelValue:h.theme_mode,"onUpdate:modelValue":s[3]||(s[3]=m=>h.theme_mode=m),color:"secondary"},null,8,["modelValue"])]),_:1})]),_:1})),[[_]]),u((r(),d(g,{clickable:"",to:"/account/delete"},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"las la-user-slash"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Delete Account")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{round:"",unelevated:"","text-color":"dark",icon:o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[_]]),u((r(),d(g,{clickable:"",onClick:b.inviteFriends},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"las la-user-friends"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Invite Friends")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{round:"",unelevated:"","text-color":"dark",icon:o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1},8,["onClick"])),[[_]]),u((r(),d(g,{to:"/legal",clickable:""},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"grey-5",name:"las la-balance-scale"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Legal")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{round:"",unelevated:"","text-color":"dark",icon:o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[_]]),u((r(),d(g,{clickable:"",onClick:b.logout},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(f,{color:"secondary",name:"las la-sign-out-alt"})]),_:1}),e(l,null,{default:t(()=>[c(i(a.$t("Logout")),1)]),_:1}),e(l,{side:""},{default:t(()=>[e(n,{round:"",unelevated:"","text-color":"dark",icon:o.DataStorePersisted.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1},8,["onClick"])),[[_]])]),_:1})]),_:1},8,["class"])]),_:1},8,["class"])],64)}var me=T(W,[["render",oe]]);export{me as default};
