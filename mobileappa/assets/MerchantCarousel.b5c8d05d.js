import{Q as p}from"./QSkeleton.d3c12595.js";import{Q as y}from"./QChip.0b7ba82a.js";import{S as C,a as V}from"./swiper-slide.172c9bc8.js";/* empty css                   */import{_ as z,Q as B,m as u,n as f,p as a,U as i,F as o,V as g,S as d,f as c,q as k,s as m,b3 as Q,az as h,Y as _,a5 as v,a6 as w}from"./index.4c3eb750.js";const F={props:["list_type","featured_id","filters","index"],name:"MerchantCarousel",components:{Swiper:C,SwiperSlide:V},data(){return{loading:!0,slide:0,data:[],cuisine:[],reviews:[],estimation:[],services:[],items_min_max:[]}},setup(){return{DataStore:B()}},mounted(){u.empty(this.DataStore.car_data[this.index])?this.getData(this.index):Object.keys(this.DataStore.car_data[this.index]).length<=0&&this.getData(this.index)},watch:{filters:{handler(t,s){console.log("carousel new filters"),this.getData(this.index)},deep:!0}},methods:{getData(t){const s={list_type:this.list_type,featured_id:this.featured_id,place_id:u.getStorage("place_id"),rows:0,payload:["cuisine","reviews","estimation","services","items_min_max"],filters:this.filters};this.DataStore.getCarouselData(s,t)},getFeaturedMerchant(){const t={list_type:this.list_type,featured_id:this.featured_id,place_id:u.getStorage("place_id"),rows:0,payload:["cuisine","reviews","estimation","services","items_min_max"],filters:this.filters};this.loading=!0,u.getMerchantFeed(t).then(s=>{this.data=s.details.data,this.cuisine=s.details.cuisine,this.reviews=s.details.reviews,this.estimation=s.details.estimation,this.services=s.details.services,this.items_min_max=s.details.items_min_max}).catch(s=>{this.data=[],this.cuisine=[],this.reviews=[],this.estimation=[],this.services=[],this.items_min_max=[]}).then(s=>{this.loading=!1})}}},M={key:0,class:"row q-gutter-sm items-center"},N={class:"fit"},P={key:0,class:"absolute-top fit light-dimmed"},j={class:"text-left"},A={class:"ellipsis font13 text-weight-bold q-pt-xs"},E={class:"text-grey font12 line-1 ellipsis"};function I(t,s,r,n,x,L){const S=f("router-link"),D=f("swiper-slide"),q=f("swiper");return n.DataStore.car_loading[r.index]?(a(),i("div",M,[(a(),i(o,null,g(3,e=>d("div",{key:e,class:"col"},[c(p,{height:"90px",class:"full-width"}),c(p,{type:"text",class:"w-75"}),c(p,{type:"text",class:"w-100"})])),64))])):(a(),k(q,{key:1,slidesPerView:2.3,spaceBetween:10,loop:!0,onSwiper:t.onSwiper},{default:m(()=>[(a(!0),i(o,null,g(n.DataStore.car_data[r.index],e=>(a(),k(D,{key:e,class:"row"},{default:m(()=>[d("div",N,[c(S,{to:{name:"menu",params:{slug:e.restaurant_slug}}},{default:m(()=>[d("div",{class:"bg-grey-2 radius8 relative-position",style:Q([{height:"90px"},`background-image: url(${e.url_logo}) !important;background-size:cover!important;min-height:100%;`])},[e.open_status==0?(a(),i("div",P)):h("",!0)],4)]),_:2},1032,["to"]),d("div",j,[d("div",A,_(e.restaurant_name),1),d("div",E,[(a(!0),i(o,null,g(e.cuisine_group,l=>(a(),i(o,{key:l},[x.cuisine[l]?(a(),i(o,{key:0},[v(_(x.cuisine[l].name)+", ",1)],64)):h("",!0)],64))),128))]),c(y,{size:"sm","text-color":t.$q.dark.mode?"grey300":"secondary",icon:"star",class:"no-padding transparent"},{default:m(()=>[n.DataStore.car_reviews[r.index][e.merchant_id]?(a(),i("span",{key:0,class:w(["text-weight-medium",{"text-white":t.$q.dark.mode,"text-dark":!t.$q.dark.mode}])},_(n.DataStore.car_reviews[r.index][e.merchant_id].ratings),3)):(a(),i("span",{key:1,class:w(["text-weight-medium text-dark",{"text-white":t.$q.dark.mode,"text-dark":!t.$q.dark.mode}])},"0",2))]),_:2},1032,["text-color"]),c(y,{size:"sm","text-color":t.$q.dark.mode?"grey300":"secondary",icon:"fiber_manual_record",class:"no-padding transparent"},{default:m(()=>[d("span",{class:w(["text-weight-medium",{"text-white":t.$q.dark.mode,"text-dark":!t.$q.dark.mode}])},[n.DataStore.car_estimation[r.index][e.merchant_id]&&n.DataStore.car_services[r.index][e.merchant_id]?(a(!0),i(o,{key:0},g(n.DataStore.car_services[r.index][e.merchant_id],(l,b)=>(a(),i(o,null,[b<=0?(a(),i(o,{key:0},[n.DataStore.car_estimation[r.index][e.merchant_id][l][e.charge_type]?(a(),i(o,{key:0},[v(_(n.DataStore.car_estimation[r.index][e.merchant_id][l][e.charge_type].estimation)+" "+_(t.$t("min")),1)],64)):h("",!0)],64)):h("",!0)],64))),256)):h("",!0)],2)]),_:2},1032,["text-color"])])])]),_:2},1024))),128))]),_:1},8,["slidesPerView","onSwiper"]))}var H=z(F,[["render",I]]);export{H as default};
