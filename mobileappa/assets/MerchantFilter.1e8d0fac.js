import{Q as Pe}from"./QToolbarTitle.eef0f00f.js";import{Q as ce}from"./QSpace.5a38bd33.js";import{ah as Ee,r as M,c as r,bV as Ue,bH as J,J as Ke,ag as Xe,a_ as Ye,g as me,ap as Ge,h as m,at as He,b0 as Je,u as We,be as Ze,w as et,ar as tt,_ as at,Q as rt,m as O,p as q,q as D,s as S,f as b,a6 as lt,a5 as st,Y as B,X as I,a8 as ot,S as L,az as j,U as nt,V as it,F as ut,a7 as ct,aA as dt}from"./index.4c3eb750.js";import{Q as de}from"./QToolbar.45531803.js";import{Q as W}from"./QBtnToggle.82d18f6d.js";import{T as vt}from"./QPullToRefresh.1e0c7d6e.js";import{b as T}from"./format.8ac60962.js";import{Q as mt}from"./QBtnGroup.c05cd859.js";import{Q as ft}from"./QFooter.bd11e2a3.js";import{u as bt}from"./DeliverySched.57b613f9.js";import"./touch.9135741d.js";import"./selection.1ed6461a.js";import"./QResizeObserver.4d611c44.js";const ve="q-slider__marker-labels",ht=a=>({value:a}),pt=({marker:a})=>m("div",{key:a.value,style:a.style,class:a.classes},a.label),fe=[34,37,40,33,39,38],gt={...Xe,...Ye,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:a=>a>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},yt=["pan","update:modelValue","change"];function kt({updateValue:a,updatePosition:s,getDragging:w,formAttrs:o}){const{props:e,emit:f,slots:u,proxy:{$q:d}}=me(),R=Ee(e,d),P=Je(o),p=M(!1),V=M(!1),g=M(!1),F=M(!1),h=r(()=>e.vertical===!0?"--v":"--h"),E=r(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),k=r(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(d.lang.rtl===!0)),y=r(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),C=r(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),c=r(()=>e.disable!==!0&&e.readonly!==!0&&y.value<C.value),x=r(()=>{if(e.step===0)return l=>l;const t=(String(e.step).trim().split(".")[1]||"").length;return l=>parseFloat(l.toFixed(t))}),$=r(()=>e.step===0?1:e.step),be=r(()=>c.value===!0?e.tabindex||0:-1),A=r(()=>e.max-e.min),Z=r(()=>C.value-y.value),N=r(()=>K(y.value)),U=r(()=>K(C.value)),z=r(()=>e.vertical===!0?k.value===!0?"bottom":"top":k.value===!0?"right":"left"),ee=r(()=>e.vertical===!0?"height":"width"),he=r(()=>e.vertical===!0?"width":"height"),te=r(()=>e.vertical===!0?"vertical":"horizontal"),pe=r(()=>{const t={role:"slider","aria-valuemin":y.value,"aria-valuemax":C.value,"aria-orientation":te.value,"data-step":e.step};return e.disable===!0?t["aria-disabled"]="true":e.readonly===!0&&(t["aria-readonly"]="true"),t}),ge=r(()=>`q-slider q-slider${h.value} q-slider--${p.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(c.value===!0?" q-slider--editable":""))+(g.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(R.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+h.value:""));function Q(t){const l="q-slider__"+t;return`${l} ${l}${h.value} ${l}${h.value}${E.value}`}function ae(t){const l="q-slider__"+t;return`${l} ${l}${h.value}`}const ye=r(()=>{const t=e.selectionColor||e.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),ke=r(()=>ae("markers")+" absolute overflow-hidden"),Ce=r(()=>ae("track-container")),xe=r(()=>Q("pin")),_e=r(()=>Q("label")),Se=r(()=>Q("text-container")),we=r(()=>Q("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),$e=r(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),qe=r(()=>{const t={[he.value]:e.trackSize};return e.trackImg!==void 0&&(t.backgroundImage=`url(${e.trackImg}) !important`),t}),Me=r(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),re=r(()=>{const t=U.value-N.value,l={[z.value]:`${100*N.value}%`,[ee.value]:t===0?"2px":`${100*t}%`};return e.innerTrackImg!==void 0&&(l.backgroundImage=`url(${e.innerTrackImg}) !important`),l});function Ve(t){const{min:l,max:n,step:i}=e;let v=l+t*(n-l);if(i>0){const _=(v-y.value)%i;v+=(Math.abs(_)>=i/2?(_<0?-1:1)*i:0)-_}return v=x.value(v),T(v,y.value,C.value)}function K(t){return A.value===0?0:(t-e.min)/A.value}function Fe(t,l){const n=Ge(t),i=e.vertical===!0?T((n.top-l.top)/l.height,0,1):T((n.left-l.left)/l.width,0,1);return T(k.value===!0?1-i:i,N.value,U.value)}const le=r(()=>Ue(e.markers)===!0?e.markers:$.value),se=r(()=>{const t=[],l=le.value,n=e.max;let i=e.min;do t.push(i),i+=l;while(i<n);return t.push(n),t}),oe=r(()=>{const t=` ${ve}${h.value}-`;return ve+`${t}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${k.value===!0?"rtl":"ltr"}`}),X=r(()=>e.markerLabels===!1?null:Be(e.markerLabels).map((t,l)=>({index:l,value:t.value,label:t.label||t.value,classes:oe.value+(t.classes!==void 0?" "+t.classes:""),style:{...ie(t.value),...t.style||{}}}))),ne=r(()=>({markerList:X.value,markerMap:Le.value,classes:oe.value,getStyle:ie})),De=r(()=>{const t=Z.value===0?"2px":100*le.value/Z.value;return{...re.value,backgroundSize:e.vertical===!0?`2px ${t}%`:`${t}% 2px`}});function Be(t){if(t===!1)return null;if(t===!0)return se.value.map(ht);if(typeof t=="function")return se.value.map(n=>{const i=t(n);return J(i)===!0?{...i,value:n}:{value:n,label:i}});const l=({value:n})=>n>=e.min&&n<=e.max;return Array.isArray(t)===!0?t.map(n=>J(n)===!0?n:{value:n}).filter(l):Object.keys(t).map(n=>{const i=t[n],v=Number(n);return J(i)===!0?{...i,value:v}:{value:v,label:i}}).filter(l)}function ie(t){return{[z.value]:`${100*(t-e.min)/A.value}%`}}const Le=r(()=>{if(e.markerLabels===!1)return null;const t={};return X.value.forEach(l=>{t[l.value]=l}),t});function Te(){if(u["marker-label-group"]!==void 0)return u["marker-label-group"](ne.value);const t=u["marker-label"]||pt;return X.value.map(l=>t({marker:l,...ne.value}))}const Re=r(()=>[[vt,Ae,void 0,{[te.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Ae(t){t.isFinal===!0?(F.value!==void 0&&(s(t.evt),t.touch===!0&&a(!0),F.value=void 0,f("pan","end")),p.value=!1,g.value=!1):t.isFirst===!0?(F.value=w(t.evt),s(t.evt),a(),p.value=!0,f("pan","start")):(s(t.evt),a())}function ue(){g.value=!1}function Ne(t){s(t,w(t)),a(),V.value=!0,p.value=!0,document.addEventListener("mouseup",Y,!0)}function Y(){V.value=!1,p.value=!1,a(!0),ue(),document.removeEventListener("mouseup",Y,!0)}function ze(t){s(t,w(t)),a(!0)}function Qe(t){fe.includes(t.keyCode)&&a(!0)}function Oe(t){if(e.vertical===!0)return null;const l=d.lang.rtl!==e.reverse?1-t:t;return{transform:`translateX(calc(${2*l-1} * ${e.thumbSize} / 2 + ${50-100*l}%))`}}function Ie(t){const l=r(()=>V.value===!1&&(g.value===t.focusValue||g.value==="both")?" q-slider--focus":""),n=r(()=>`q-slider__thumb q-slider__thumb${h.value} q-slider__thumb${h.value}-${k.value===!0?"rtl":"ltr"} absolute non-selectable`+l.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),i=r(()=>({width:e.thumbSize,height:e.thumbSize,[z.value]:`${100*t.ratio.value}%`,zIndex:g.value===t.focusValue?2:void 0})),v=r(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),_=r(()=>Oe(t.ratio.value)),G=r(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const H=[m("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[m("path",{d:e.thumbPath})]),m("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(H.push(m("div",{class:xe.value+" absolute fit no-pointer-events"+v.value},[m("div",{class:_e.value,style:{minWidth:e.thumbSize}},[m("div",{class:Se.value,style:_.value},[m("span",{class:G.value},t.label.value)])])])),e.name!==void 0&&e.disable!==!0&&P(H,"push")),m("div",{class:n.value,style:i.value,...t.getNodeData()},H)}}function je(t,l,n,i){const v=[];e.innerTrackColor!=="transparent"&&v.push(m("div",{key:"inner",class:Me.value,style:re.value})),e.selectionColor!=="transparent"&&v.push(m("div",{key:"selection",class:ye.value,style:t.value})),e.markers!==!1&&v.push(m("div",{key:"marker",class:ke.value,style:De.value})),i(v);const _=[He("div",{key:"trackC",class:Ce.value,tabindex:l.value,...n.value},[m("div",{class:$e.value,style:qe.value},v)],"slide",c.value,()=>Re.value)];if(e.markerLabels!==!1){const G=e.switchMarkerLabelsSide===!0?"unshift":"push";_[G](m("div",{key:"markerL",class:we.value},Te()))}return _}return Ke(()=>{document.removeEventListener("mouseup",Y,!0)}),{state:{active:p,focus:g,preventFocus:V,dragging:F,editable:c,classes:ge,tabindex:be,attributes:pe,roundValueFn:x,keyStep:$,trackLen:A,innerMin:y,innerMinRatio:N,innerMax:C,innerMaxRatio:U,positionProp:z,sizeProp:ee,isReversed:k},methods:{onActivate:Ne,onMobileClick:ze,onBlur:ue,onKeyup:Qe,getContent:je,getThumbRenderFn:Ie,convertRatioToModel:Ve,convertModelToRatio:K,getDraggingRatio:Fe}}}const Ct=()=>({});var xt=We({name:"QSlider",props:{...gt,modelValue:{required:!0,default:null,validator:a=>typeof a=="number"||a===null},labelValue:[String,Number]},emits:yt,setup(a,{emit:s}){const{proxy:{$q:w}}=me(),{state:o,methods:e}=kt({updateValue:h,updatePosition:k,getDragging:E,formAttrs:Ze(a)}),f=M(null),u=M(0),d=M(0);function R(){d.value=a.modelValue===null?o.innerMin.value:T(a.modelValue,o.innerMin.value,o.innerMax.value)}et(()=>`${a.modelValue}|${o.innerMin.value}|${o.innerMax.value}`,R),R();const P=r(()=>e.convertModelToRatio(d.value)),p=r(()=>o.active.value===!0?u.value:P.value),V=r(()=>{const c={[o.positionProp.value]:`${100*o.innerMinRatio.value}%`,[o.sizeProp.value]:`${100*(p.value-o.innerMinRatio.value)}%`};return a.selectionImg!==void 0&&(c.backgroundImage=`url(${a.selectionImg}) !important`),c}),g=e.getThumbRenderFn({focusValue:!0,getNodeData:Ct,ratio:p,label:r(()=>a.labelValue!==void 0?a.labelValue:d.value),thumbColor:r(()=>a.thumbColor||a.color),labelColor:r(()=>a.labelColor),labelTextColor:r(()=>a.labelTextColor)}),F=r(()=>o.editable.value!==!0?{}:w.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:y,onBlur:e.onBlur,onKeydown:C,onKeyup:e.onKeyup});function h(c){d.value!==a.modelValue&&s("update:modelValue",d.value),c===!0&&s("change",d.value)}function E(){return f.value.getBoundingClientRect()}function k(c,x=o.dragging.value){const $=e.getDraggingRatio(c,x);d.value=e.convertRatioToModel($),u.value=a.snap!==!0||a.step===0?$:e.convertModelToRatio(d.value)}function y(){o.focus.value=!0}function C(c){if(!fe.includes(c.keyCode))return;tt(c);const x=([34,33].includes(c.keyCode)?10:1)*o.keyStep.value,$=([34,37,40].includes(c.keyCode)?-1:1)*(o.isReversed.value===!0?-1:1)*(a.vertical===!0?-1:1)*x;d.value=T(o.roundValueFn.value(d.value+$),o.innerMin.value,o.innerMax.value),h()}return()=>{const c=e.getContent(V,o.tabindex,F,x=>{x.push(g())});return m("div",{ref:f,class:o.classes.value+(a.modelValue===null?" q-slider--no-value":""),...o.attributes.value,"aria-valuenow":a.modelValue},c)}}});const _t={name:"MerchantFilter",props:["cuisine_data"],data(){return{filter:!1,filter_maximize:!0,price_range_data:[],loading:!1,max_delivery_data:[],sortby:"",sort_by:[],price_range:"",max_delivery_fee:"",rating:"",cuisine:[],cuisine_selected:[]}},setup(){const a=bt(),s=rt();return{DeliveryschedStore:a,DataStore:s}},mounted(){Object.keys(this.DataStore.price_range_data).length<=0&&this.DataStore.searchAttributes(),Object.keys(this.cuisine_data).length>=0&&this.setCuisine()},watch:{cuisine:{handler(a,s){this.cuisine_selected=[],Object.keys(this.cuisine).length>0&&Object.entries(this.cuisine).forEach(([w,o])=>{o.onOff&&this.cuisine_selected.push(o.value)})},deep:!0},cuisine_data(a,s){this.setCuisine()}},computed:{hasFilter(){return Object.keys(this.cuisine_selected).length>0||!O.empty(this.sortby)||!O.empty(this.price_range)||!O.empty(this.max_delivery_fee)||!O.empty(this.rating)},hasSortData(){return Object.keys(this.DataStore.sort_by).length>0},hasPriceData(){return Object.keys(this.DataStore.price_range_data).length>0},hasCuisineData(){return Object.keys(this.cuisine).length>0}},methods:{resetFilter(){this.sortby="",this.price_range="",this.max_delivery_fee="",this.cuisine_selected=[],this.rating="",this.cuisine=[],this.setCuisine()},setCuisine(){Object.keys(this.cuisine_data).length>0&&Object.entries(this.cuisine_data).forEach(([a,s])=>{this.cuisine.push({label:s.cuisine_name,value:s.cuisine_id,color:this.$q.dark.mode?"grey600":"mygrey",text_color:this.$q.dark.mode?"grey300":"dark",onOff:!1})})},applyFilter(){const a={sortby:this.sortby,price_range:this.price_range,max_delivery_fee:this.max_delivery_fee,cuisine:this.cuisine_selected,transaction_type:this.DeliveryschedStore.transaction_type,rating:this.rating};this.DeliveryschedStore.filters=a,this.$emit("applyFilter",a),this.filter=!1},setActive(a,s){a.onOff?(this.cuisine[s].color="mygrey",this.cuisine[s].text_color="dark",this.cuisine[s].onOff=!1):(this.cuisine[s].color="primary",this.cuisine[s].text_color="white",this.cuisine[s].onOff=!0)}}},St={class:"row justify-between"},wt={class:"font13 text-weight-bold text-h5"},$t={class:"font13 text-weight-bold text-h5"},qt={class:"font13 text-weight-bold text-h5"},Mt={class:"font13 text-weight-bold text-h5"},Vt={class:"font13 text-weight-bold text-h5"};function Ft(a,s,w,o,e,f){return q(),D(dt,{modelValue:e.filter,"onUpdate:modelValue":s[5]||(s[5]=u=>e.filter=u),position:"bottom"},{default:S(()=>[b(ct,null,{default:S(()=>[b(de,{class:"text-primary top-toolbar q-pl-md",dense:""},{default:S(()=>[b(Pe,{class:lt(["text-weight-bold",{"text-white":a.$q.dark.mode,"text-dark":!a.$q.dark.mode}])},{default:S(()=>[st(B(a.$t("Filter Your Search")),1)]),_:1},8,["class"]),b(ce),b(I,{onClick:s[0]||(s[0]=u=>e.filter=!1),square:"",unelevated:"",color:a.$q.dark.mode?"grey600":"white","text-color":a.$q.dark.mode?"grey300":"grey",icon:"las la-times",dense:"","no-caps":"",size:"sm",class:"border-grey radius8"},null,8,["color","text-color"])]),_:1}),b(ot,{class:"q-pt-none q-pl-md"},{default:S(()=>[L("div",St,[L("div",wt,B(a.$t("Filter")),1),f.hasFilter?(q(),D(I,{key:0,onClick:f.resetFilter,flat:"",dense:"",color:"primary",label:"Reset","no-caps":""},null,8,["onClick"])):j("",!0)]),f.hasSortData?(q(),D(W,{key:0,modelValue:e.sortby,"onUpdate:modelValue":s[1]||(s[1]=u=>e.sortby=u),"toggle-color":"secondary",color:a.$q.dark.mode?"grey600":"mygrey","text-color":a.$q.dark.mode?"grey300":"dark","no-caps":"","no-wrap":"",unelevated:"",options:o.DataStore.sort_by,class:"rounded-group2 text-weight-bold line-1"},null,8,["modelValue","color","text-color","options"])):j("",!0),L("div",$t,B(a.$t("Price Range")),1),f.hasPriceData?(q(),D(W,{key:1,modelValue:e.price_range,"onUpdate:modelValue":s[2]||(s[2]=u=>e.price_range=u),"toggle-color":"secondary",color:a.$q.dark.mode?"grey600":"mygrey","text-color":a.$q.dark.mode?"grey300":"dark","no-caps":"","no-wrap":"",unelevated:"",options:o.DataStore.price_range_data,class:"rounded-group2 text-weight-bold line-1"},null,8,["modelValue","color","text-color","options"])):j("",!0),L("div",qt,B(a.$t("Max Delivery Fee")),1),b(xt,{modelValue:e.max_delivery_fee,"onUpdate:modelValue":s[3]||(s[3]=u=>e.max_delivery_fee=u),min:1,max:20},null,8,["modelValue"]),L("div",Mt,B(a.$t("Ratings")),1),b(W,{modelValue:e.rating,"onUpdate:modelValue":s[4]||(s[4]=u=>e.rating=u),"toggle-color":"secondary",color:a.$q.dark.mode?"grey600":"mygrey","text-color":a.$q.dark.mode?"grey300":"dark","no-caps":"","no-wrap":"",unelevated:"",class:"rounded-group2 text-weight-bold line-1",options:[{label:"1",value:1,"icon-right":"star"},{label:"2",value:2,"icon-right":"star"},{label:"3",value:3,"icon-right":"star"},{label:"4",value:4,"icon-right":"star"},{label:"5",value:5,"icon-right":"star"}]},null,8,["modelValue","color","text-color"]),L("div",Vt,B(a.$t("Cuisine")),1),f.hasCuisineData?(q(),D(mt,{key:2,"no-caps":"","no-wrap":"",unelevated:"",class:"rounded-group2 text-weight-bold line-1"},{default:S(()=>[(q(!0),nt(ut,null,it(e.cuisine,(u,d)=>(q(),D(I,{"no-caps":"",key:d,color:u.color,"text-color":u.text_color,label:u.label,onClick:R=>f.setActive(u,d)},null,8,["color","text-color","label","onClick"]))),128))]),_:1})):j("",!0),b(ce,{class:"q-pa-xl"})]),_:1}),b(ft,{bordered:"",class:"bg-white q-pa-sm no-border"},{default:S(()=>[b(de,null,{default:S(()=>[b(I,{onClick:f.applyFilter,color:"primary",unelevated:"","text-color":"white",label:a.$t("Apply"),"no-caps":"",class:"full-width",size:"lg"},null,8,["onClick","label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Et=at(_t,[["render",Ft]]);export{Et as default};
