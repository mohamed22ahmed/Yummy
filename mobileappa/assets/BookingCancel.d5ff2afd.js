import{_ as y,m as l,p as n,U as k,f as a,s as o,a6 as d,F as f,X as c,a5 as u,Y as s,S as h,V as C,q as p,az as $,ac as b,ae as q,ab as Q}from"./index.4c3eb750.js";import{Q as _}from"./QToolbarTitle.eef0f00f.js";import{Q as B}from"./QToolbar.45531803.js";import{Q as w}from"./QHeader.d51d9950.js";import{Q as S}from"./QSpace.5a38bd33.js";import{Q as R}from"./QList.5b181e45.js";import{Q as V}from"./QFooter.bd11e2a3.js";import{Q as z}from"./QInnerLoading.488297dd.js";import{Q as T}from"./QPage.959871c7.js";import{u as x}from"./BookingStore.24c4eeeb.js";import"./QResizeObserver.4d611c44.js";const D={name:"BookingCancel",setup(){return{BookingStore:x()}},data(){return{reservation_uuid:"",reason:"",loading:!1}},computed:{hasReason(){return!l.empty(this.reason)}},created(){this.reservation_uuid=this.$route.query.id,this.getCancelreason(null)},methods:{refresh(e){this.getCancelreason(this.reservation_uuid,e)},getCancelreason(e){this.BookingStore.getCancelreason(this.reservation_uuid,e)},ConfirmcancelReservation(){this.$q.dialog({title:this.$t("Cancel reservation"),message:this.$t("Are you sure to continue?"),cancel:!0,persistent:!0,ok:{unelevated:!0,color:"primary",rounded:!0,"text-color":"white",size:"md",label:this.$t("Yes"),"no-caps":!0},cancel:{unelevated:!0,rounded:!0,color:"grey-3","text-color":"black",size:"md",label:this.$t("Cancel"),"no-caps":!0}}).onOk(()=>{this.CancelReservation()}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{})},CancelReservation(){this.loading=!0,l.fetchDataPostTable2("CancelReservation","id="+this.reservation_uuid+"&reason="+this.reason).then(e=>{l.notify("light-green",e.msg,"check",this.$q),setTimeout(()=>{this.$router.replace({path:"/booking/track",query:{id:this.reservation_uuid}})},500)}).catch(e=>{l.notify("dark",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})}}},I={class:"text-weight-bold font16 line-normal"},L={class:"text-grey"};function N(e,r,F,m,i,g){return n(),k(f,null,[a(w,{class:d(["bg-whitex",{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}]),reveal:""},{default:o(()=>[a(B,null,{default:o(()=>[a(c,{onClick:r[0]||(r[0]=t=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",class:"q-mr-sm",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),a(_,{class:"text-weight-bold text-darkx"},{default:o(()=>[u(s(e.$t("Cancel Booking")),1)]),_:1})]),_:1})]),_:1},8,["class"]),a(T,{class:"q-pa-md"},{default:o(()=>[h("div",I,s(e.$t("cancel_your_reservation"))+". ",1),h("div",L,s(e.$t("cancel_your_reservation"))+"?",1),a(S,{class:"q-pa-sm"}),a(R,{class:"q-list-small"},{default:o(()=>[(n(!0),k(f,null,C(m.BookingStore.getCancelReasonData,t=>(n(),p(Q,{key:t,tag:"label",class:d(["bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":e.$q.dark.mode,"bg-mygrey text-dark":!e.$q.dark.mode}]),clickable:""},{default:o(()=>[a(b,{side:""},{default:o(()=>[a(q,{modelValue:i.reason,"onUpdate:modelValue":r[1]||(r[1]=v=>i.reason=v),val:t,size:"xs","checked-icon":"fiber_manual_record","unchecked-icon":"fiber_manual_record"},null,8,["modelValue","val"])]),_:2},1024),a(b,null,{default:o(()=>[u(s(t),1)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1}),a(V,{class:d(["bg-whitex q-pa-md text-dark row items-center q-gutter-sm",{"bg-mydark ":e.$q.dark.mode,"bg-white ":!e.$q.dark.mode}])},{default:o(()=>[a(c,{color:e.$q.dark.mode?"grey300":"dark",size:"lg",unelevated:"","no-caps":"",flat:"",onClick:r[2]||(r[2]=t=>e.$router.back()),class:"col"},{default:o(()=>[u(s(e.$t("Back")),1)]),_:1},8,["color"]),a(c,{unelevated:"",color:"primary",label:e.$t("Continue"),"no-caps":"",size:"lg",disable:!g.hasReason,loading:i.loading,onClick:g.ConfirmcancelReservation,class:"col"},null,8,["label","disable","loading","onClick"])]),_:1},8,["class"]),m.BookingStore.isLoading?(n(),p(z,{key:0,showing:!0,color:e.$q.dark.mode?"grey300":"primary"},null,8,["color"])):$("",!0)]),_:1})],64)}var K=y(D,[["render",N]]);export{K as default};
