import{_ as g,l as p,Q as _,m as t,av as u,n as v,p as y,U as S,f as a,s as n,F as q,S as s,Y as r,X as c,as as h,t as w}from"./index.4c3eb750.js";import{Q as $}from"./QImg.721b5b7a.js";import{Q as b}from"./QSpace.5a38bd33.js";import{Q as k}from"./QInnerLoading.488297dd.js";import{Q as x}from"./QPage.959871c7.js";import{A as f}from"./AppLocation.dd0d5216.js";const D={name:"LocationPage",data(){return{position:[],loading:!1,loading_label:"",data:[],address:""}},components:{DeliverySched:p(()=>w(()=>import("./DeliverySched.f210ef8b.js"),["assets/DeliverySched.f210ef8b.js","assets/QBtnToggle.82d18f6d.js","assets/index.4c3eb750.js","assets/index.4784a50d.css","assets/QBtnGroup.c05cd859.js","assets/QSelect.ad5cccde.js","assets/QChip.0b7ba82a.js","assets/QItemLabel.cc035d74.js","assets/QMenu.5c5664bb.js","assets/selection.1ed6461a.js","assets/rtl.276c3f1b.js","assets/format.8ac60962.js","assets/DeliverySched.57b613f9.js"]))},setup(){return{DataStore:_()}},methods:{locationPermission(){this.$q.capacitor?(t.showLoadingBox("",this.$q),f.checkAccuracy().then(e=>{this.locateLocation()}).catch(e=>{e.code===4?this.reverseGeocoding(this.DataStore.maps_config.default_lat,this.DataStore.maps_config.default_lng):(t.hideLoadingBox(this.$q),t.notify("dark",e.message,"error",this.$q))}).then(e=>{})):navigator.geolocation&&(t.showLoadingBox("",this.$q),navigator.geolocation.getCurrentPosition(e=>{this.reverseGeocoding(e.coords.latitude,e.coords.longitude)},e=>{this.reverseGeocoding(this.DataStore.maps_config.default_lat,this.DataStore.maps_config.default_lng)}))},locateLocation(){f.getPosition().then(e=>{this.reverseGeocoding(e.lat,e.lng)}).catch(e=>{this.reverseGeocoding(this.DataStore.maps_config.default_lat,this.DataStore.maps_config.default_lng)}).then(e=>{})},reverseGeocoding(e,i){this.geocoder_loading=!0,t.reverseGeocoding(e,i).then(o=>{this.data=o.details.data,typeof o.details.data.address!="undefined"&&o.details.data.address!==null?(this.address=o.details.data.address.formatted_address,this.setLocation()):(t.notify("dark","This location is not available","error",this.$q),this.address="",this.data=[])}).catch(o=>{t.notify("dark",o,"error",this.$q)}).then(o=>{this.loading=!1,t.hideLoadingBox(this.$q)})},setLocation(){t.empty(this.data.place_id)&&t.notify("dark","Enter your location or select on the map","error",this.$q),t.setStorage("place_data",this.data),t.setStorage("place_id",this.data.place_id);const e=t.getStorage("delivery_sched");console.debug("deliverySched=>"+e),u.authenticated()?(this.loading=!0,t.SavePlaceByID(this.data.place_id).then(i=>{t.empty(e)?this.$refs.delivery_sched.showSched(!0):this.backPage()}).catch(i=>{t.notify("dark",i,"error",this.$q)}).then(i=>{this.loading=!1})):t.empty(e)?this.$refs.delivery_sched.showSched(!0):this.backPage()},afterSavetrans(e){this.backPage()},backPage(){t.empty(this.back_url)?this.$router.replace("/home"):this.$router.push(this.back_url)}}},P={class:"full-width text-center"},L={class:"text-weight-bold"},Q={class:"text-weight-medium q-ma-none"},B={class:"row items-center justify-start fit q-pl-md"},A={class:"q-mr-md"},C={class:"row items-center justify-start fit q-pl-md"},G={class:"q-mr-md"};function I(e,i,o,E,d,l){const m=v("DeliverySched");return y(),S(q,null,[a(x,{class:"flex flex-center q-pl-md q-pr-md"},{default:n(()=>[s("div",P,[a($,{src:"cuttery.png",fit:"fill","spinner-color":"primary",style:{height:"130px","max-width":"120px"}}),s("h5",L,r(e.$t("Let's find best restaurant")),1),s("p",Q,r(e.$t("Set your location to started searching for restaurant in your area")),1),a(b,{class:"q-pa-sm"}),a(c,{unelevated:"","no-caps":"",color:"primary text-white",class:"full-width text-weight-bold radius28 q-mb-md",size:"lg",onClick:l.locationPermission},{default:n(()=>[s("div",B,[s("div",A,[a(h,{name:"las la-search-location"})]),s("div",null,r(e.$t("Share location")),1)])]),_:1},8,["onClick"]),a(c,{unelevated:"","no-caps":"",color:"primary text-white",class:"full-width text-weight-bold radius28",size:"lg",to:"/location/map"},{default:n(()=>[s("div",C,[s("div",G,[a(h,{name:"las la-map-marker"})]),s("div",null,r(e.$t("Choose from map")),1)])]),_:1})]),a(k,{showing:d.loading,color:"primary",size:"md",label:d.loading_label},null,8,["showing","label"])]),_:1}),a(m,{ref:"delivery_sched",onAfterSavetrans:l.afterSavetrans},null,8,["onAfterSavetrans"])],64)}var O=g(D,[["render",I]]);export{O as default};
