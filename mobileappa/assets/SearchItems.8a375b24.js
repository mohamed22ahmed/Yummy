import{_ as V,l as g,Q as L,m as b,n as p,p as a,U as u,f as e,s,a6 as w,q as f,az as S,F as h,X as C,a5 as y,Y as c,S as n,aX as P,as as q,V as I,t as k,ab as v,ac as Q}from"./index.4c3eb750.js";import{Q as T}from"./QToolbarTitle.eef0f00f.js";import{Q as E}from"./QToolbar.45531803.js";import{Q as B}from"./QHeader.d51d9950.js";import{Q as x}from"./QList.5b181e45.js";import{Q as _}from"./QSkeleton.d3c12595.js";import{Q as N}from"./QImg.721b5b7a.js";import{Q as R}from"./QPage.959871c7.js";import{Q as z}from"./QFooter.bd11e2a3.js";import{u as M}from"./MenuStore.2dc15d9c.js";import{u as O}from"./CartStore.dad0748d.js";import"./QResizeObserver.4d611c44.js";const j={name:"SearchItems",components:{SearchListFood:g(()=>k(()=>import("./SearchListFood.5ebf5cf7.js"),["assets/SearchListFood.5ebf5cf7.js","assets/QImg.721b5b7a.js","assets/index.4c3eb750.js","assets/index.4784a50d.css","assets/QChip.0b7ba82a.js","assets/QItemLabel.cc035d74.js"])),ItemDetails:g(()=>k(()=>import("./ItemDetails.e131f4a9.js"),["assets/ItemDetails.e131f4a9.js","assets/index.4c3eb750.js","assets/index.4784a50d.css","assets/QCircularProgress.ba57a6e8.js","assets/format.8ac60962.js","assets/QImg.721b5b7a.js","assets/QChip.0b7ba82a.js","assets/QBtnToggle.82d18f6d.js","assets/QBtnGroup.c05cd859.js","assets/QSelect.ad5cccde.js","assets/QItemLabel.cc035d74.js","assets/QMenu.5c5664bb.js","assets/selection.1ed6461a.js","assets/rtl.276c3f1b.js","assets/QSpace.5a38bd33.js","assets/CartStore.dad0748d.js","assets/FavoriteStore.7d9575ef.js","assets/DeliverySched.57b613f9.js"])),ItemDetailsCheckbox:g(()=>k(()=>import("./ItemDetailsCheckbox.cc4204d6.js"),["assets/ItemDetailsCheckbox.cc4204d6.js","assets/index.4c3eb750.js","assets/index.4784a50d.css","assets/QCircularProgress.ba57a6e8.js","assets/format.8ac60962.js","assets/QImg.721b5b7a.js","assets/QItemLabel.cc035d74.js","assets/QList.5b181e45.js","assets/QSelect.ad5cccde.js","assets/QChip.0b7ba82a.js","assets/QMenu.5c5664bb.js","assets/selection.1ed6461a.js","assets/rtl.276c3f1b.js","assets/QSpace.5a38bd33.js","assets/QBtnGroup.c05cd859.js","assets/ClosePopup.d9033651.js","assets/CartStore.dad0748d.js","assets/FavoriteStore.7d9575ef.js","assets/DeliverySched.57b613f9.js"]))},data(){return{slug:"",q:"",food_list:[],awaitingSearch:!1,item_added:!1}},setup(){const t=M(),r=O(),m=L();return{MenuStore:t,CartStore:r,DataStore:m}},created(){this.slug=this.$route.query.slug},watch:{q(t,r){if(!this.awaitingSearch){if(typeof this.q=="undefined"||this.q===null||this.q===""||this.q==="null"||this.q==="undefined")return!1;setTimeout(()=>{b.fetchDataPost("searchItems","q="+this.q+"&slug="+this.slug).then(m=>{console.debug(m),this.food_list=m.details.data}).catch(m=>{this.food_list=[]}).then(m=>{this.awaitingSearch=!1})},1e3)}this.awaitingSearch=!0}},computed:{hasFilter(){return!b.empty(this.q)},hasResults(){return Object.keys(this.food_list).length>0}},methods:{onClickitem(t){this.item_added=!1;const r={cat_id:t.cat_id,item_uuid:t.item_uuid};this.DataStore.addons_use_checkbox?this.$refs.refItem2.showItem2(r,this.slug):this.$refs.refItem.showItem2(r,this.slug)},afterAdditems(){this.item_added=!0,this.CartStore.getCart(!1,this.CartStore.cart_payload)}}},U={class:"col-12"},X={key:2,class:"flex flex-center",style:{"min-height":"89%"}},H={class:"text-center full-width"},Y={class:"text-h5 text-weight-bold"},G={class:"text-grey font12"},J={class:"text-h5 text-weight-bold"},K={class:"text-grey font12"},W={class:"row items-center justify-between fit"},Z={class:"text-weight-bold font17"},$={class:"text-weight-bold font16"};function ee(t,r,m,l,o,d){const A=p("SearchListFood"),D=p("ItemDetails"),F=p("ItemDetailsCheckbox");return a(),u(h,null,[e(B,{reveal:"","reveal-offset":"10",class:w({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-black":!t.$q.dark.mode})},{default:s(()=>[e(E,null,{default:s(()=>[e(C,{onClick:r[0]||(r[0]=i=>t.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",class:"q-mr-sm",color:t.$q.dark.mode?"white":"dark"},null,8,["color"]),e(T,{class:"text-weight-bold"},{default:s(()=>[y(c(t.$t("Search menu items")),1)]),_:1})]),_:1})]),_:1},8,["class"]),e(R,{class:"q-pl-md q-pr-md row items-stretch"},{default:s(()=>[n("div",U,[e(P,{modelValue:o.q,"onUpdate:modelValue":r[2]||(r[2]=i=>o.q=i),label:t.$t("Search"),outlined:"","lazy-rules":"","bg-color":t.$q.dark.mode?"grey600":"input","label-color":"grey",borderless:"",class:"input-borderless"},{prepend:s(()=>[e(q,{name:"eva-search-outline",size:"sm"})]),append:s(()=>[d.hasFilter?(a(),f(q,{key:0,class:"cursor-pointer",name:"close",color:"grey",onClick:r[1]||(r[1]=i=>this.q="")})):S("",!0)]),_:1},8,["modelValue","label","bg-color"]),d.hasResults&&d.hasFilter&&!o.awaitingSearch?(a(),f(x,{key:0,separator:""},{default:s(()=>[(a(!0),u(h,null,I(o.food_list,i=>(a(),f(v,{key:i,onClick:te=>d.onClickitem(i),clickable:""},{default:s(()=>[e(A,{items:i,merchant_list:t.merchant_list},null,8,["items","merchant_list"])]),_:2},1032,["onClick"]))),128))]),_:1})):d.hasFilter&&o.awaitingSearch?(a(),f(x,{key:1},{default:s(()=>[(a(),u(h,null,I(8,i=>e(v,{key:i},{default:s(()=>[e(Q,{avatar:""},{default:s(()=>[e(_,{width:"80px",height:"80px"})]),_:1}),e(Q,null,{default:s(()=>[e(_,{type:"text"}),e(_,{type:"text",class:"w-50"}),e(_,{type:"text",class:"w-70"}),e(_,{type:"text",class:"w-25"})]),_:1})]),_:2},1024)),64))]),_:1})):(a(),u("div",X,[n("div",H,[d.hasFilter&&!o.awaitingSearch?(a(),u(h,{key:0},[n("div",Y,c(t.$t("No items found")),1),n("p",G,c(t.$t("Sorry, we couldn't find any results")),1)],64)):(a(),u(h,{key:1},[e(N,{src:"search.png",fit:"fill","spinner-color":"primary",style:{height:"80px","max-width":"80px"}}),n("div",J,c(t.$t("Search Items")),1),n("p",K,[y(c(t.$t("Search items from"))+" ",1),l.MenuStore.data_info[o.slug]?(a(),u(h,{key:0},[y(c(l.MenuStore.data_info[o.slug].restaurant_name),1)],64)):S("",!0)])],64))])]))]),e(D,{ref:"refItem",slug:o.slug,onAfterAdditems:d.afterAdditems},null,8,["slug","onAfterAdditems"]),e(F,{ref:"refItem2",slug:o.slug,onAfterAdditems:d.afterAdditems},null,8,["slug","onAfterAdditems"])]),_:1}),l.CartStore.items_count>0&&o.item_added==!0?(a(),f(z,{key:0,reveal:"",class:w(["q-pl-md q-pr-md q-pb-sm q-pt-sm text-dark",{"bg-primary":!l.CartStore.cart_reloading,"bg-grey-5":l.CartStore.cart_reloading}])},{default:s(()=>[e(C,{to:"/checkout",loading:l.CartStore.cart_loading,disable:!l.CartStore.canProceed,unelevated:"","text-color":"white","no-caps":"",class:"radius10 fit",color:{primary:!l.CartStore.cart_reloading,"grey-5":l.CartStore.cart_reloading}},{default:s(()=>[n("div",W,[n("div",Z,c(t.$t("Checkout")),1),n("div",$,c(l.CartStore.cart_subtotal.value),1)])]),_:1},8,["loading","disable","color"])]),_:1},8,["class"])):S("",!0)],64)}var fe=V(j,[["render",ee]]);export{fe as default};
