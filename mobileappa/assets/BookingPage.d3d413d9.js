import{_ as M,l as C,Q as P,m as _,n as D,p as s,U as d,f as l,s as a,a6 as F,F as m,q as y,X as k,az as g,a5 as u,Y as n,aX as b,V as T,S as i,ab as Q,bf as R,bg as U,ac as v,t as z}from"./index.4c3eb750.js";import{Q as L}from"./QToolbarTitle.eef0f00f.js";import{Q as E}from"./QToolbar.45531803.js";import{Q as I}from"./QHeader.d51d9950.js";import{Q as f}from"./QSelect.ad5cccde.js";import{Q as B}from"./QSpace.5a38bd33.js";import{Q as q}from"./QFooter.bd11e2a3.js";import{Q as N}from"./QImg.721b5b7a.js";import{Q as H}from"./QItemLabel.cc035d74.js";import{Q as G}from"./QForm.ce1b13be.js";import{Q as A}from"./QInnerLoading.488297dd.js";import{Q as Y}from"./QPage.959871c7.js";import{u as O}from"./MenuStore.2dc15d9c.js";import{u as X}from"./BookingStore.24c4eeeb.js";import"./QResizeObserver.4d611c44.js";import"./QChip.0b7ba82a.js";import"./QMenu.5c5664bb.js";import"./selection.1ed6461a.js";import"./rtl.276c3f1b.js";import"./format.8ac60962.js";const j={name:"BookingPage",components:{componentsRecaptcha:C(()=>z(()=>import("./componentsRecaptcha.34bd9c0e.js"),["assets/componentsRecaptcha.34bd9c0e.js","assets/index.4c3eb750.js","assets/index.4784a50d.css"]))},data(){return{loading:!1,recaptcha_response:"",success_data:[]}},setup(){const e=X(),r=O(),V=P();return{MenuStore:r,BookingStore:e,DataStore:V}},created(){this.BookingStore.steps=1,this.BookingStore.reservation_date="",this.BookingStore.reservation_time="",this.Getbookingattributes()},watch:{DataStore:{immediate:!0,deep:!0,handler(e,r){Object.keys(e.phone_default_data).length>0&&(this.BookingStore.mobile_prefix="+"+e.phone_default_data.phonecode)}}},methods:{Getbookingattributes(){this.BookingStore.Getbookingattributes(this.MenuStore.merchant_uuid,"")},SetBooking(){this.BookingStore.SetBooking(this.MenuStore.merchant_uuid,"",this.$q)},recaptchaExpired(){_.empty(this.$refs.recapcha)&&this.$refs.recapcha.reset()},recaptchaFailed(){},recaptchaVerified(e){this.recaptcha_response=e},onSubmit(){this.loading=!0;let e="merchant_uuid="+this.MenuStore.merchant_uuid;e+="&reservation_date="+this.BookingStore.reservation_date,e+="&reservation_time="+this.BookingStore.reservation_time,e+="&guest="+this.BookingStore.guest,e+="&first_name="+this.BookingStore.first_name,e+="&last_name="+this.BookingStore.last_name,e+="&email_address="+this.BookingStore.email_address,e+="&mobile_prefix="+this.BookingStore.mobile_prefix,e+="&mobile_number="+this.BookingStore.mobile_number,e+="&room_uuid="+this.BookingStore.room_uuid,e+="&table_uuid="+this.BookingStore.table_uuid,e+="&special_request="+this.BookingStore.special_request,e+="&recaptcha_response="+this.recaptcha_response,e+="&id="+this.BookingStore.reservation_uuid,_.fetchDataPostTable2("ReserveTable",e).then(r=>{this.success_data=r.details,this.BookingStore.steps=3,this.BookingStore.room_uuid="",this.BookingStore.table_uuid=""}).catch(r=>{this.success_data=[],_.notify("dark",r,"error_outline",this.$q),this.recaptchaExpired()}).then(r=>{this.loading=!1})}}},J={key:0,class:"row q-gutter-sm"},K={class:"text-weight-bold font15 q-mt-md"},W=["innerHTML"],Z={class:"q-mt-sm text-weight-bold font15"},$={class:"text-grey"},x={class:"q-mt-sm text-weight-bold font15"},ee={class:"q-mt-sm text-weight-medium font15"},oe={class:"text-grey q-mt-md q-mb-md"},te={class:"text-center q-pa-xl"},re=i("svg",{class:"checkmark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52"},[i("circle",{class:"checkmark__circle",cx:"26",cy:"26",r:"25",fill:"none"}),i("path",{class:"checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})],-1),le={key:0,class:"font16 q-mb-none"},ae=["innerHTML"],ie={class:"font16 q-mb-none"},ne={class:"text-grey"},se={class:"font15 line-normal q-mb-none"},de={class:"text-grey"},me={class:"text-success"};function ge(e,r,V,o,S,h){const w=D("componentsRecaptcha");return s(),d(m,null,[l(I,{reveal:"","reveal-offset":"10",class:F({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-black":!e.$q.dark.mode})},{default:a(()=>[l(E,null,{default:a(()=>[o.BookingStore.steps!=3?(s(),y(k,{key:0,onClick:r[0]||(r[0]=t=>o.BookingStore.steps==1?e.$router.back():o.BookingStore.steps=1),flat:"",round:"",dense:"",icon:"las la-angle-left",class:"q-mr-sm",color:e.$q.dark.mode?"white":"dark"},null,8,["color"])):g("",!0),o.BookingStore.steps!=3?(s(),y(L,{key:1,class:"text-weight-bold"},{default:a(()=>[u(n(e.$t("Table Booking")),1)]),_:1})):g("",!0)]),_:1})]),_:1},8,["class"]),l(Y,{class:"q-pl-md q-pr-md"},{default:a(()=>[o.BookingStore.hasData?(s(),d(m,{key:0},[o.BookingStore.getSteps==1?(s(),d(m,{key:0},[l(f,{modelValue:o.BookingStore.guest,"onUpdate:modelValue":[r[1]||(r[1]=t=>o.BookingStore.guest=t),r[2]||(r[2]=t=>o.BookingStore.getTimeslot(o.MenuStore.merchant_uuid))],options:o.BookingStore.guest_list,label:e.$t("Guest"),color:"primary",class:"q-mb-md col-xs-12 col-sm-12 col-md-4","transition-show":"scale","transition-hide":"scale","emit-value":"",outlined:"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey"},null,8,["modelValue","options","label","bg-color","label-color"]),l(f,{modelValue:o.BookingStore.reservation_date,"onUpdate:modelValue":[r[3]||(r[3]=t=>o.BookingStore.reservation_date=t),r[4]||(r[4]=t=>o.BookingStore.getTimeslot(o.MenuStore.merchant_uuid))],options:o.BookingStore.date_list,label:e.$t("Date"),color:"primary",class:"q-mb-md col-xs-12 col-sm-12 col-md-4","transition-show":"scale","transition-hide":"scale","emit-value":"","map-options":"",outlined:"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey"},null,8,["modelValue","options","label","bg-color","label-color"]),l(b,{modelValue:o.BookingStore.reservation_time,"onUpdate:modelValue":r[5]||(r[5]=t=>o.BookingStore.reservation_time=t),label:e.$t("Time"),outlined:"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey",disable:""},null,8,["modelValue","label","bg-color","label-color"]),l(B,{class:"q-pa-sm"}),o.BookingStore.hasTimeSlot?(s(),d("div",J,[(s(!0),d(m,null,T(o.BookingStore.getTimeList,t=>(s(),d(m,{key:t},[(s(!0),d(m,null,T(t,(c,p)=>(s(),d("div",{key:c,class:"col-2 text-center"},[l(k,{unelevated:"",label:c,class:"full-width",outline:!o.BookingStore.isSelected(p),color:o.BookingStore.isSelected(p)?e.$q.dark.mode?"grey300":"primary":o.BookingStore.isNotavailable(p)?"grey":e.$q.dark.mode?"grey300":"black",onClick:ue=>o.BookingStore.reservation_time=p,disabled:o.BookingStore.isNotavailable(p)},null,8,["label","outline","color","onClick","disabled"])]))),128))],64))),128))])):g("",!0),o.MenuStore.getBookingTc?(s(),d(m,{key:1},[i("div",K,n(e.$t("Restaurant Terms & Conditions")),1),i("div",{class:"text-grey",innerHTML:o.MenuStore.getBookingTc},null,8,W)],64)):g("",!0),l(B,{class:"q-pa-md"}),l(q,{reveal:"",class:"bg-primary text-dark"},{default:a(()=>[l(k,{color:"primary",unelevated:"","no-caps":"",class:"fit",size:"lg",disabled:!o.BookingStore.bookingValid,loading:o.BookingStore.loading,onClick:h.SetBooking},{default:a(()=>[u(n(e.$t("Continue")),1)]),_:1},8,["disabled","loading","onClick"])]),_:1})],64)):g("",!0),o.BookingStore.getSteps==2?(s(),y(G,{key:1,onSubmit:h.onSubmit},{default:a(()=>[i("div",Z,n(e.$t("Reservation details")),1),i("div",$,[i("div",null,n(o.BookingStore.reservation_info.full_time),1),i("div",null,n(o.BookingStore.reservation_info.guest),1)]),i("div",x,n(e.$t("Personal details")),1),l(b,{modelValue:o.BookingStore.first_name,"onUpdate:modelValue":r[6]||(r[6]=t=>o.BookingStore.first_name=t),label:e.$t("First name"),"lazy-rules":"",rules:[t=>t&&t.length>0||e.$t("This field is required")],outlined:"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey"},null,8,["modelValue","label","rules","bg-color","label-color"]),l(b,{modelValue:o.BookingStore.last_name,"onUpdate:modelValue":r[7]||(r[7]=t=>o.BookingStore.last_name=t),label:e.$t("Last name"),"lazy-rules":"",rules:[t=>t&&t.length>0||e.$t("This field is required")],outlined:"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey"},null,8,["modelValue","label","rules","bg-color","label-color"]),l(b,{modelValue:o.BookingStore.email_address,"onUpdate:modelValue":r[8]||(r[8]=t=>o.BookingStore.email_address=t),label:e.$t("Email address"),"lazy-rules":"",rules:[(t,c)=>c.email(t)||e.$t("Please enter a valid email address")],outlined:"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey"},null,8,["modelValue","label","rules","bg-color","label-color"]),l(b,{modelValue:o.BookingStore.mobile_number,"onUpdate:modelValue":r[10]||(r[10]=t=>o.BookingStore.mobile_number=t),mask:"##############",outlined:"","lazy-rules":"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",rules:[t=>t&&t.length>0||this.$t("This field is required")]},{prepend:a(()=>[l(f,{dense:"",modelValue:o.BookingStore.mobile_prefix,"onUpdate:modelValue":r[9]||(r[9]=t=>o.BookingStore.mobile_prefix=t),options:o.DataStore.phone_prefix_data,onFilter:e.filterFn,behavior:"dialog","input-debounce":"700",style:{border:"none"},"emit-value":"",borderlessx:"",class:"myq-field"},{option:a(({itemProps:t,opt:c})=>[l(Q,R(U(t)),{default:a(()=>[l(v,{avatar:""},{default:a(()=>[l(N,{src:c.flag,style:{height:"15px","max-width":"20px"}},null,8,["src"])]),_:2},1024),l(v,null,{default:a(()=>[l(H,null,{default:a(()=>[u(n(c.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":a(()=>[l(Q,null,{default:a(()=>[l(v,{class:"text-grey"},{default:a(()=>[u(n(e.$t("No results")),1)]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"])]),_:1},8,["modelValue","bg-color","label-color","rules"]),o.MenuStore.allowChooseTable?(s(),d(m,{key:0},[l(f,{modelValue:o.BookingStore.room_uuid,"onUpdate:modelValue":[r[11]||(r[11]=t=>o.BookingStore.room_uuid=t),r[12]||(r[12]=t=>o.BookingStore.table_uuid="")],options:o.BookingStore.room_list,label:e.$t("Room name"),"transition-show":"scale","transition-hide":"scale","emit-value":"","map-options":"",rules:[t=>t&&t.length>0||e.$t("This field is required")]},null,8,["modelValue","options","label","rules"]),l(f,{modelValue:o.BookingStore.table_uuid,"onUpdate:modelValue":r[13]||(r[13]=t=>o.BookingStore.table_uuid=t),options:o.BookingStore.table_list[o.BookingStore.room_uuid],label:e.$t("Table name"),"transition-show":"scale","transition-hide":"scale","emit-value":"","map-options":"",rules:[t=>t&&t.length>0||e.$t("This field is required")]},null,8,["modelValue","options","label","rules"])],64)):g("",!0),i("div",ee,n(e.$t("Special request")),1),l(b,{modelValue:o.BookingStore.special_request,"onUpdate:modelValue":r[14]||(r[14]=t=>o.BookingStore.special_request=t),autogrow:"",color:"warning",outlined:"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey"},null,8,["modelValue","bg-color","label-color"]),o.MenuStore.isBookingCaptcha?(s(),d(m,{key:1},[l(B,{class:"q-pa-sm"}),l(w,{ref:"recapcha",is_enabled:"1",size:"normal",theme:"light",tabindex:0,sitekey:o.DataStore.getBookingSettings.site_key,language_code:o.DataStore.getBookingSettings.language,onVerify:h.recaptchaVerified,onExpire:h.recaptchaExpired,onFail:h.recaptchaFailed},null,8,["sitekey","language_code","onVerify","onExpire","onFail"])],64)):g("",!0),i("p",oe,n(e.$t("By continuing, you agree to Terms of Service and Privacy Policy"))+". ",1),l(q,{reveal:"",class:"bg-primary text-dark"},{default:a(()=>[l(k,{type:"submit",color:"primary",unelevated:"","no-caps":"",class:"fit",size:"lg",loading:S.loading},{default:a(()=>[u(n(e.$t("Reserve")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])):g("",!0),o.BookingStore.getSteps==3?(s(),d(m,{key:2},[i("div",te,[re,o.MenuStore.getBookingCustomMessage?(s(),d("h4",le,[i("span",{innerHTML:o.MenuStore.getBookingCustomMessage},null,8,ae)])):(s(),d(m,{key:1},[i("h4",ie,n(e.$t("Your reservation successfully placed"))+". ",1),i("p",ne,n(e.$t("You will receive another email once your reservation is confirm"))+". ",1)],64)),i("h5",se,n(S.success_data.full_time),1),i("div",de,[i("div",null,n(S.success_data.guest),1),i("div",null,[u(n(e.$t("Reservation ID"))+"# ",1),i("span",me,n(S.success_data.reservation_id),1)])]),l(B,{class:"q-pa-md"}),l(k,{type:"submit",color:"blue",unelevated:"","no-caps":"",flat:"",to:{name:"menu",params:{slug:o.MenuStore.restaurant_slug}}},{default:a(()=>[u(n(e.$t("Reserved again")),1)]),_:1},8,["to"]),l(B,{class:"q-pa-md"})]),l(q,{reveal:"",class:"bg-primary text-dark"},{default:a(()=>[l(k,{color:"primary",unelevated:"","no-caps":"",class:"fit",size:"lg",to:{path:"/booking/track",query:{id:S.success_data.reservation_uuid,slug:o.MenuStore.restaurant_slug}},replace:"true"},{default:a(()=>[u(n(e.$t("Track")),1)]),_:1},8,["to"])]),_:1})],64)):g("",!0)],64)):g("",!0),o.BookingStore.loading?(s(),y(A,{key:1,showing:!0,color:e.$q.dark.mode?"grey300":"primary"},null,8,["color"])):g("",!0)]),_:1})],64)}var Fe=M(j,[["render",ge]]);export{Fe as default};
