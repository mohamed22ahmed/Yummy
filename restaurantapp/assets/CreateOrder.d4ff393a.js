import{_ as A,ay as D,u as $,A as v,m as B,n as r,a0 as o,d as t,q as s,$ as n,F as i,ap as l,p as I,a1 as u,as as f,Y as g,a2 as L,az as P,a4 as p,a5 as C,a6 as z,X as y}from"./index.f6661a24.js";import{Q as k}from"./QSkeleton.e9a2b7df.js";import{Q}from"./QList.16ddb51a.js";import{Q as q}from"./QImg.b7890c8b.js";import{Q as _}from"./QItemLabel.0d3c2221.js";import{Q as N}from"./QSpace.7af5fd36.js";import{Q as V}from"./QPageScroller.14e8a1ba.js";import{Q as j}from"./QPage.78315ab4.js";import{Q as O}from"./QAjaxBar.7cecf3ab.js";import{u as T}from"./MenuStore.420c66e5.js";import{u as E}from"./CartStore.4102b575.js";import"./use-page-sticky.25bfa08e.js";import"./format.de7e9769.js";const M={name:"CreateOrder",components:{ItemDetails:D(()=>P(()=>import("./ItemDetails.6d44642c.js"),["assets/ItemDetails.6d44642c.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QImg.b7890c8b.js","assets/QItemLabel.0d3c2221.js","assets/QList.16ddb51a.js","assets/QSelect.4e3956e1.js","assets/QChip.5b52e54d.js","assets/QMenu.c4f03f28.js","assets/selection.ef67fb9c.js","assets/rtl.276c3f1b.js","assets/format.de7e9769.js","assets/QSpace.7af5fd36.js","assets/ClosePopup.6296f014.js"]))},data(){return{selected_category:void 0,category:[],category_loading:!0,items:[],items_loading:!0,dialog_items:!0}},setup(e){const h=T(),x=E(),b=$();return{MenuStore:h,CartStore:x,DataStore:b}},mounted(){this.CartStore.posAttributes(),this.getCategoryList()},computed:{getCategory(){return this.category},getItems(){return this.items},hasItems(){return Object.keys(this.items).length>0}},methods:{viewItems(e){let h=this.$refs.bar;e.cat_id=this.selected_category,this.$refs.item_details.getMenuItem(e,h)},getCategoryList(){this.category_loading=!0,v.fetchDataByTokenPost("CategoryList").then(e=>{this.category=e.details.data,this.selected_category=this.category[0].cat_id,this.categoryItems()}).catch(e=>{this.category=[],this.selected_category="",this.items_loading=!1}).then(e=>{this.category_loading=!1})},loadItems(e){this.selected_category=e,this.categoryItems()},categoryItems(){this.items_loading=!0,this.items=[],this.$refs.bar.start(),v.fetchDataByTokenPost("categoryItems","cat_id="+this.selected_category).then(e=>{this.items=e.details.data}).catch(e=>{this.items=[]}).then(e=>{this.items_loading=!1,this.$refs.bar&&this.$refs.bar.stop()})},afterAddtocart(){this.CartStore.getCart(this.DataStore.cart_uuid)}}},F={key:0,class:"row q-gutter-y-sm q-gutter-x-md"},R={key:1,style:{"min-height":"calc(70vh)"},class:"flex flex-center"},X={class:"text-grey"},Y={class:"row q-gutter-y-sm q-gutter-x-md"};function G(e,h,x,b,m,c){const w=B("ItemDetails");return r(),o(i,null,[t(j,{class:n([{"bg-mydark text-white":e.$q.dark.mode,"bg-grey-1 text-dark":!e.$q.dark.mode},"q-pr-md q-pl-md flex row items-stretch q-gutter-sm"])},{default:s(()=>[l("div",{class:n(["col-md-1 col-sm-2 col-xs-3 bg-whitex radius8",{"bg-grey600 text-white":e.$q.dark.mode,"bg-white":!e.$q.dark.mode}])},[m.category_loading?(r(),I(Q,{key:0},{default:s(()=>[(r(),o(i,null,u(8,a=>t(p,{key:a},{default:s(()=>[t(k,{type:"circle",size:"40px"})]),_:1})),64))]),_:1})):f("",!0),t(Q,null,{default:s(()=>[(r(!0),o(i,null,u(c.getCategory,a=>(r(),I(p,{key:a,clickable:"",onClick:d=>c.loadItems(a.cat_id)},{default:s(()=>[t(C,{avatar:""},{default:s(()=>[t(z,{class:n({"bg-primary":a.cat_id==m.selected_category})},{default:s(()=>[t(q,{src:a.url_image,fit:"cover","spinner-size":"sm","spinner-color":"primary",style:{height:"30px",width:"30px"},class:"radius28"},null,8,["src"])]),_:2},1032,["class"]),t(_,{caption:"",class:n(["text-center",{"text-primary":a.cat_id==m.selected_category}])},{default:s(()=>[y(g(a.category_name),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})],2),l("div",{class:n(["col bg-grey-1x radius8 q-pa-smx",{"bg-grey600 text-white":e.$q.dark.mode,"bg-grey-1":!e.$q.dark.mode}])},[m.items_loading?(r(),o("div",F,[(r(),o(i,null,u(12,a=>l("div",{key:a,class:"col-md-2 col-sm-3 col-xs-5"},[t(k,{height:"50px",square:"",class:"radius8",animation:"pulse"}),t(k,{type:"text",animation:"fade"})])),64))])):f("",!0),!c.hasItems&&!m.items_loading?(r(),o("div",R,[l("div",X,[l("p",null,g(e.$t("No data available")),1)])])):f("",!0),l("div",Y,[(r(!0),o(i,null,u(c.getItems,a=>(r(),o("div",{key:a,class:"col-md-2 col-sm-3 col-xs-5"},[l("div",{class:n(["bg-whitex radius8",{"bg-grey600 text-white":e.$q.dark.mode,"bg-white":!e.$q.dark.mode}])},[t(p,{clickable:"",onClick:d=>c.viewItems(a)},{default:s(()=>[t(C,null,{default:s(()=>[t(_,null,{default:s(()=>[t(q,{src:a.url_image,fit:"cover",style:{height:"50px"},"spinner-size":"sm","spinner-color":"primary",class:"full-width radius8"},null,8,["src"])]),_:2},1024),t(_,null,{default:s(()=>[y(g(a.item_name),1)]),_:2},1024),t(_,{caption:""},{default:s(()=>[(r(!0),o(i,null,u(a.price,(d,S)=>(r(),o(i,{key:d},[S<=0?(r(),o(i,{key:0},[d.discount>0?(r(),o(i,{key:0},[y(g(d.pretty_price_after_discount),1)],64)):(r(),o(i,{key:1},[y(g(d.pretty_price),1)],64))],64)):f("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])],2)]))),128))]),t(N,{class:"q-pa-xl"})],2),t(V,{position:"bottom-right","scroll-offset":150,offset:[18,18]},{default:s(()=>[t(L,{fab:"",icon:"keyboard_arrow_up",color:"mygrey","text-color":"dark",dense:"",padding:"4px"})]),_:1})]),_:1},8,["class"]),t(w,{ref:"item_details",onAfterAddtocart:c.afterAddtocart},null,8,["onAfterAddtocart"]),t(O,{ref:"bar",position:"top",color:"primary",size:"2px","skip-hijack":""},null,512)],64)}var le=A(M,[["render",G]]);export{le as default};
