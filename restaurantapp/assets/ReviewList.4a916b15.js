import{_ as b,ay as C,A as _,m as L,n as r,a0 as d,d as e,q as a,F as f,$ as y,a2 as P,p as h,X as u,Y as o,as as w,Z as $,a1 as Q,ap as v,az as q,a4 as x,a5 as k,a6 as I}from"./index.f6661a24.js";import{Q as V}from"./QToolbarTitle.0f4dda99.js";import{Q as A}from"./QToolbar.7bb603c7.js";import{Q as D}from"./QHeader.ba9c2ff9.js";import{Q as T}from"./QImg.b7890c8b.js";import{Q as p}from"./QItemLabel.0d3c2221.js";import{Q as z}from"./QChip.5b52e54d.js";import{Q as B}from"./QRating.206db4d7.js";import{Q as N}from"./QList.16ddb51a.js";import{Q as S}from"./QInnerLoading.c6ed50f8.js";import{Q as E}from"./QSpinnerDots.25105ce0.js";import{Q as j}from"./QInfiniteScroll.770dc11e.js";import{Q as F}from"./QPage.78315ab4.js";import{Q as O}from"./QPullToRefresh.a19885b1.js";import"./QResizeObserver.dc10e4c2.js";import"./format.de7e9769.js";import"./TouchPan.ca911d69.js";import"./touch.9135741d.js";import"./selection.ef67fb9c.js";const H={name:"ReviewList",components:{ReviewReply:C(()=>q(()=>import("./ReviewReply.32a463ed.js"),["assets/ReviewReply.32a463ed.js","assets/QToolbarTitle.0f4dda99.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QSpace.7af5fd36.js","assets/QToolbar.7bb603c7.js","assets/QCircularProgress.24399868.js","assets/format.de7e9769.js","assets/QFooter.4f4f9530.js","assets/QResizeObserver.dc10e4c2.js","assets/QForm.4e86ee71.js","assets/ClosePopup.6296f014.js"]))},data(){return{loading:!0,data:[],page:0,data_done:!1,is_refresh:void 0,selected_items:[],total_items:0}},computed:{hasData(){return Object.keys(this.data).length>0}},created(){},methods:{initReply(t){this.selected_items=t,this.$refs.review_reply.dialog=!0},refresh(t){this.resetPagination(),this.is_refresh=t},getCustomerReview(t,i){this.loading=!0,_.fetchDataByTokenPost("getCustomerReview","page="+t).then(m=>{this.page=t,this.total_items=m.details.total_items,this.data.push(m.details.data)}).catch(m=>{this.data_done=!0,this.$refs.nscroll.stop()}).then(m=>{i(),this.loading=!1,_.empty(this.is_refresh)||this.is_refresh()})},resetPagination(){this.page=0,this.data=[],this.$refs.nscroll.reset(),this.$refs.nscroll.resume(),this.$refs.nscroll.trigger()},afterReply(){this.$refs.review_reply.dialog=!1,this.resetPagination()}}},U={key:1,class:"row justify-center q-my-md"},X={key:0,class:"full-width text-center"},Y={class:"text-weight-bold"},Z={class:"text-grey font12"};function G(t,i,m,J,l,n){const R=L("ReviewReply");return r(),d(f,null,[e(O,{onRefresh:n.refresh},{default:a(()=>[e(D,{class:y({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode})},{default:a(()=>[e(A,null,{default:a(()=>[e(P,{onClick:i[0]||(i[0]=c=>t.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:t.$q.dark.mode?"white":"dark"},null,8,["color"]),l.loading?w("",!0):(r(),h(V,{key:0,class:"text-weight-bold"},{default:a(()=>[u(o(t.$t("Customer reviews"))+" ("+o(l.total_items)+")",1)]),_:1}))]),_:1}),e($)]),_:1},8,["class"]),e(F,{class:y({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode,"flex flex-center":!l.loading&&!n.hasData})},{default:a(()=>[e(j,{ref:"nscroll",onLoad:n.getCustomerReview,offset:250},{loading:a(()=>[l.page<=0?(r(),h(S,{key:0,showing:!0,color:"primary",size:"md"})):(r(),d("div",U,[e(E,{color:"primary",size:"40px"})]))]),default:a(()=>[e(N,{separator:""},{default:a(()=>[(r(!0),d(f,null,Q(l.data,c=>(r(),d(f,{key:c},[(r(!0),d(f,null,Q(c,s=>(r(),h(x,{key:s,clickable:"",onClick:g=>n.initReply(s)},{default:a(()=>[e(k,{avatar:""},{default:a(()=>[e(I,null,{default:a(()=>[e(T,{src:s.avatar,"spinner-color":"white","placeholder-src":"placeholder.png"},null,8,["src"])]),_:2},1024)]),_:2},1024),e(k,{side:""},{default:a(()=>[e(p,{class:"text-weight-bold"},{default:a(()=>[u(o(s.customer_fullname),1)]),_:2},1024),e(p,{caption:""},{default:a(()=>[u(o(s.review),1)]),_:2},1024),e(p,{caption:"",class:"font11"},{default:a(()=>[u(o(s.date_created),1)]),_:2},1024),e(p,null,{default:a(()=>[e(z,{label:s.status,size:"sm"},null,8,["label"]),e(B,{modelValue:t.rating,"onUpdate:modelValue":i[1]||(i[1]=g=>t.rating=g),"model-value":s.rating,size:"13px",max:5,color:"grey","color-selected":"yellow-14",readonly:"",class:"q-mb-xs no-shadow"},null,8,["modelValue","model-value"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))],64))),128))]),_:1})]),_:1},8,["onLoad"]),!l.loading&&!n.hasData?(r(),d("div",X,[v("div",Y,o(t.$t("No data available")),1),v("p",Z,o(t.$t("new review will show here")),1)])):w("",!0)]),_:1},8,["class"])]),_:1},8,["onRefresh"]),e(R,{ref:"review_reply",data:l.selected_items,onAfterReply:n.afterReply},null,8,["data","onAfterReply"])],64)}var ge=b(H,[["render",G]]);export{ge as default};
