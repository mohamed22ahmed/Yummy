import{A as p}from"./index.f6661a24.js";const a={LF:`
`,EOL:`
`,FEED_CONTROL_SEQUENCES:{CTL_LF:`
`,CTL_FF:"\f",CTL_CR:"\r",CTL_HT:"	",CTL_VT:"\v"},LINE_SPACING:{LS_DEFAULT:"\x1B2",LS_SET:"\x1B3"},HARDWARE:{HW_INIT:"\x1B@",HW_SELECT:"\x1B=",HW_RESET:`\x1B?
\0`},CASH_DRAWER:{CD_KICK_2:"\x1Bp\0",CD_KICK_5:"\x1Bp"},MARGINS:{BOTTOM:"\x1BO",LEFT:"\x1Bl",RIGHT:"\x1BQ"},PAPER:{PAPER_FULL_CUT:"V\0",PAPER_PART_CUT:"V",PAPER_CUT_A:"VA",PAPER_CUT_B:"VB"},TEXT_FORMAT:{TXT_NORMAL:"\x1B!\0",TXT_2HEIGHT:"\x1B!",TXT_2WIDTH:"\x1B! ",TXT_4SQUARE:"\x1B!0",TXT_CUSTOM_SIZE:function(T,l){var x=(T-1)*16,_=l-1,i=x+_;return"!"+String.fromCharCode(i)},TXT_HEIGHT:{1:"\0",2:"",3:"",4:"",5:"",6:"",7:"",8:"\x07"},TXT_WIDTH:{1:"\0",2:"",3:" ",4:"0",5:"@",6:"P",7:"`",8:"p"},TXT_UNDERL_OFF:"\x1B-\0",TXT_UNDERL_ON:"\x1B-",TXT_UNDERL2_ON:"\x1B-",TXT_BOLD_OFF:"\x1BE\0",TXT_BOLD_ON:"\x1BE",TXT_ITALIC_OFF:"\x1B5",TXT_ITALIC_ON:"\x1B4",TXT_FONT_A:"\x1BM\0",TXT_FONT_B:"\x1BM",TXT_FONT_C:"\x1BM",TXT_ALIGN_LT:"\x1Ba\0",TXT_ALIGN_CT:"\x1Ba",TXT_ALIGN_RT:"\x1Ba"},BARCODE_FORMAT:{BARCODE_TXT_OFF:"H\0",BARCODE_TXT_ABV:"H",BARCODE_TXT_BLW:"H",BARCODE_TXT_BTH:"H",BARCODE_FONT_A:"f\0",BARCODE_FONT_B:"f",BARCODE_HEIGHT:function(T){return"h"+String.fromCharCode(T)},BARCODE_WIDTH:{1:"w",2:"w",3:"w",4:"w",5:"w"},BARCODE_HEIGHT_DEFAULT:"hd",BARCODE_WIDTH_DEFAULT:"w",BARCODE_UPC_A:"k\0",BARCODE_UPC_E:"k",BARCODE_EAN13:"k",BARCODE_EAN8:"k",BARCODE_CODE39:"k",BARCODE_ITF:"k",BARCODE_NW7:"k",BARCODE_CODE93:"kH",BARCODE_CODE128:"kI"},CODE2D_FORMAT:{TYPE_PDF417:"\x1BZ\0",TYPE_DATAMATRIX:"\x1BZ",TYPE_QR:"\x1BZ",CODE2D:"\x1BZ"},IMAGE_FORMAT:{S_RASTER_N:"v0\0",S_RASTER_2W:"v0",S_RASTER_2H:"v0",S_RASTER_Q:"v0"},BITMAP_FORMAT:{BITMAP_S8:"\x1B*\0",BITMAP_D8:"\x1B*",BITMAP_S24:"\x1B* ",BITMAP_D24:"\x1B*!"},GSV0_FORMAT:{GSV0_NORMAL:"v0\0",GSV0_DW:"v0",GSV0_DH:"v0",GSV0_DWDH:"v0"}},r={SampleTemplateMin(T){let l=r.getPaperLenght(T),x="";return x+=a.FEED_CONTROL_SEQUENCES.CTL_LF,x+=a.TEXT_FORMAT.TXT_ALIGN_CT,x+="TEST RECEIPT",x+=a.EOL,x+=r.getLine(l),x+=a.EOL,x+=a.LF,x},SampleTemplate(T){let l=r.getPaperLenght(T),x="";x+=a.FEED_CONTROL_SEQUENCES.CTL_LF,x+=a.TEXT_FORMAT.TXT_ALIGN_CT,x+="TEST RECEIPT",x+=a.EOL,x+=r.getLine(l),x+=a.EOL,x+=a.FEED_CONTROL_SEQUENCES.CTL_LF,x+=a.TEXT_FORMAT.TXT_ALIGN_LT;let _=r.leftRightData("1 x Cheese burger","3.00",l);return x+=_,_=r.leftRightData("2 x Chicken","23.00",l),x+=_,_=r.leftRightData("5 x Sauce","100.00",l),x+=_,x+=r.getLine(l),x+=a.EOL,_=r.leftRightData("TOTAL AMOUNT","126.00",l),x+=_,_=r.leftRightData("CASH","200.00",l),x+=_,_=r.leftRightData("CHANGE","74.00",l),x+=_,x+=a.LF,_=r.leftRightData("BANK CARD","****7212",l),x+=_,x+=r.getLine(l),x+=a.LF,x+=a.EOL,_=r.centerData("THANK YOU!",l),x+=_,x+=a.EOL,x+=a.LF,x+=a.LF,x},ReceiptTemplate(T,l,x,_,i){console.log(l);let t=r.getPaperLenght(T),e="",L="",n=[];e+=a.LF,e+=a.TEXT_FORMAT.TXT_ALIGN_CT,e+=x.restaurant_name,e+=a.EOL,e+=x.address,e+=a.EOL,e+=r.getLine(t),e+=a.EOL,e+=a.LF,e+=a.TEXT_FORMAT.TXT_ALIGN_LT,e+=r.leftRightData("Order ID"," "+l.order_id,t),e+=r.leftRightData("Customer Name",l.customer_name,t),e+=r.leftRightData("Email",l.contact_email,t),e+=r.leftRightData("Phone",l.contact_number,t),e+=r.leftRightData("Address",l.delivery_address,t),e+=r.leftRightData("Address label",l.address_label,t),e+=a.LF,e+=r.leftRightData("Order Type",l.order_type,t),l.whento_deliver=="now"?e+=r.leftRightData("Delivery Date/Time",l.schedule_at,t):e+=r.leftRightData("Delivery Date/Time",l.delivery_date+" "+l.delivery_time,t),p.empty(x.merchant_tax_number)||(e+=r.leftRightData("Tax number",x.merchant_tax_number,t)),e+=l.payment_name,e+=a.EOL,e+=r.getLine(t),e+=a.EOL,e+=a.LF,n.push(e),L+=e,e="";let A=0;return Object.keys(_).length>0&&Object.entries(_).forEach(([R,E])=>{E.price.discount>0?(e+=r.leftRightData(E.qty+" x"+E.item_name,E.price.pretty_total_after_discount,t),p.empty(E.price.size_name)||(e+=E.price.size_name,e+=a.EOL),e+=E.price.pretty_price+" "+E.price.pretty_price_after_discount,e+=a.EOL):(e+=r.leftRightData(E.qty+" x"+E.item_name,E.price.pretty_total,t),p.empty(E.price.size_name)||(e+=E.price.size_name,e+=a.EOL),e+=E.price.pretty_price,e+=a.EOL),E.special_instructions!=""&&(e+=E.special_instructions,e+=a.EOL),console.log("attributes=>"),E.attributes!=""&&Object.entries(E.attributes).forEach(([s,O])=>{Object.entries(O).forEach(([h,D])=>{e+=D,e+=a.EOL})}),Object.keys(E.addons).length>0&&(Object.entries(E.addons).forEach(([s,O])=>{e+=O.subcategory_name.trim(),e+=a.EOL,Object.entries(O.addon_items).forEach(([h,D])=>{e+=r.leftRightData(D.qty+" x"+D.sub_item_name,D.pretty_addons_total,t),e+=D.pretty_price})}),e+=a.EOL),A++,console.log("items->"+A),A>=3&&(n.push(e),L+=e,e="",A=-1)}),n.push(e),L+=e,e="",e+=r.getLine(t),e+=a.EOL,e+=a.LF,Object.keys(i).length>0&&Object.entries(i).forEach(([R,E])=>{e+=r.leftRightData(E.name,E.value,t)}),e+=a.EOL,e+=r.getLine(t),e+=a.EOL,e+=a.LF,e+=r.centerData("THANK YOU!",t),e+=a.EOL,e+=a.LF,e+=a.LF,n.push(e),L+=e,e="",{tpl_all:L,tpl_data:n}},centerData(T,l){let x=l-T.length;x=x/2;let _="";return _=r.strPad("",parseInt(x),"*","STR_PAD_LEFT"),_+=T,_+=r.strPad("",parseInt(x),"*","STR_PAD_RIGHT"),_},leftRightData(T,l,x){T=p.empty(T)?"":T,l=p.empty(l)?"":l;let _=x-(T.length+l.length);_=_+T.length;let i="";return T.length>x?(i=T,i+=a.LF,i+=l):(i=r.strPad(T,parseInt(_)," ","STR_PAD_RIGHT"),i+=l),i+=a.LF,i},strPad(T,l,x,_){var i=l-T.length;if(i<0)return T;var t=new Array(i+1).join(x);return _=="STR_PAD_LEFT"?t+T:T+t},getPaperLenght(T){return T=="58"?32:45},getLine(T){return"-".repeat(T)},DailySales(T,l,x,_){let i=r.getPaperLenght(T),t="",e="",L=[];t+=a.LF,t+=a.TEXT_FORMAT.TXT_ALIGN_CT,t+=l,t+=a.EOL,t+=x,t+=a.EOL,t+=r.getLine(i),t+=a.EOL,t+=a.LF,t+=a.TEXT_FORMAT.TXT_ALIGN_LT,L.push(t),e+=t,t="";let n=0;return Object.keys(_).length>0&&Object.entries(_).forEach(([d,A])=>{t+=A.payment_name,t+=a.EOL,t+=r.leftRightData("Delivery Fee",A.delivery_fee,i),t+=r.leftRightData("Tax",A.tax_total,i),t+=r.leftRightData("Tips",A.courier_tip,i),t+=r.leftRightData("Total",A.total,i),t+=a.EOL,t+=a.EOL,n++,n>=3&&(L.push(t),e+=t,t="",n=-1)}),t+=a.EOL,t+=r.getLine(i),t+=a.LF,t+=a.TEXT_FORMAT.TXT_ALIGN_CT,t+="*** END OF SALES REPORT ***",t+=a.EOL,t+=a.LF,t+=a.TEXT_FORMAT.TXT_ALIGN_LT,L.push(t),e+=t,t="",{tpl_all:e,tpl_data:L}},centerText(T,l,x,_,i){for(var t=[],e=l.split(" "),L=e[0],n=1;n<e.length;n++){var d=L+" "+e[n],A=T.measureText(d).width;A>_?(t.push(L),L=e[n]):L=d}t.push(L);let R=0,E=0;return Object.entries(t).forEach(([s,O])=>{R=T.measureText(O).width,E=(_-R)/2,T.fillText(O,E,x),x+=i}),t},longText(T,l,x,_,i){T.textAlign="left";for(var t=[],e=l.split(" "),L=e[0],n=1;n<e.length;n++){var d=L+" "+e[n],A=T.measureText(d).width;A>_?(t.push(L),L=e[n]):L=d}t.push(L);let R=0;return Object.entries(t).forEach(([E,s])=>{T.fillText(s,R,x),x+=i}),t},async TableColumn(T,l,x,_,i){return await new Promise((e,L)=>{let n=_,d=0,A=0;Object.entries(l).forEach(([R,E])=>{n+=i,T.textAlign="left";let s=E.label.split(" "),O="";for(let h=0;h<s.length;h++){const D=O+s[h]+" ";T.measureText(D).width>x-150&&h>0?(A++,T.fillText(O,d,n),O=s[h]+" ",n+=i):O=D}T.fillText(O,d,n),A++,T.textAlign="right",s=E.value.split(" "),O="";for(let h=0;h<s.length;h++){const D=O+s[h]+" ";T.measureText(D).width>x-150&&h>0?(A++,T.fillText(O,x,n),O=s[h]+" ",n+=i):O=D}T.fillText(O,x,n)}),T.textAlign="left",e(A)})},async TableColumnCount(T,l,x,_,i){return await new Promise((e,L)=>{let n=0;Object.entries(l).forEach(([d,A])=>{let R=A.label.split(" "),E="";for(let s=0;s<R.length;s++){const O=E+R[s]+" ";T.measureText(O).width>x-290&&s>0?(n++,E=R[s]+" "):E=O}n++,R=A.value.split(" "),E="";for(let s=0;s<R.length;s++){const O=E+R[s]+" ";T.measureText(O).width>x-290&&s>0?(n++,E=R[s]+" "):E=O}}),e(n)})},drawText(T,l,x,_,i){const t=l.split(" ");let e="";for(let L=0;L<t.length;L++){const n=e+t[L]+" ";T.measureText(n).width>i&&L>0?(T.fillText(e,x,_),e=t[L]+" ",_+=25):e=n}T.fillText(e,x,_)},drawLine(T,l,x){T.beginPath(),T.moveTo(0,x),T.lineTo(l,x),T.stroke()},drawSpace(T,l,x){T.fillText(`
`,0,x)},countText(T,l,x){for(var _=[],i=l.split(" "),t=i[0],e=1;e<i.length;e++){var L=t+" "+i[e],n=T.measureText(L).width;n>x?(_.push(t),t=i[e]):t=L}return _.push(t),_}};export{r as P};
