import{_ as A,ay as y,u as T,A as g,m as Q,n as a,p as f,q as r,d as t,a2 as b,X as S,Y as d,Z as V,$ as v,ap as p,at as B,ac as P,as as m,a0 as o,F as i,a1 as w,az as C,a4 as E,a5 as I,a6 as L}from"./index.f6661a24.js";import{Q as N}from"./QToolbarTitle.0f4dda99.js";import{Q as R}from"./QToolbar.7bb603c7.js";import{Q as j}from"./QHeader.ba9c2ff9.js";import{Q as z}from"./QSpace.7af5fd36.js";import{Q as F}from"./QImg.b7890c8b.js";import{Q as _}from"./QItemLabel.0d3c2221.js";import{Q as O}from"./QList.16ddb51a.js";import{Q as $}from"./QAjaxBar.7cecf3ab.js";import{Q as H}from"./QPage.78315ab4.js";import{Q as M}from"./QPullToRefresh.a19885b1.js";import{u as U}from"./SearchStore.94d8f2ae.js";import{u as X}from"./CartStore.4102b575.js";import"./QResizeObserver.dc10e4c2.js";import"./format.de7e9769.js";import"./TouchPan.ca911d69.js";import"./touch.9135741d.js";import"./selection.ef67fb9c.js";const Y={name:"SearchTables",components:{TableSkeleton:y(()=>C(()=>import("./TableSkeleton.a40b3052.js"),["assets/TableSkeleton.a40b3052.js","assets/QSkeleton.e9a2b7df.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QItemLabel.0d3c2221.js","assets/QList.16ddb51a.js"])),ItemDetails:y(()=>C(()=>import("./ItemDetails.6d44642c.js"),["assets/ItemDetails.6d44642c.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QImg.b7890c8b.js","assets/QItemLabel.0d3c2221.js","assets/QList.16ddb51a.js","assets/QSelect.4e3956e1.js","assets/QChip.5b52e54d.js","assets/QMenu.c4f03f28.js","assets/selection.ef67fb9c.js","assets/rtl.276c3f1b.js","assets/format.de7e9769.js","assets/QSpace.7af5fd36.js","assets/ClosePopup.6296f014.js"]))},setup(){const e=U(),l=T(),k=X();return{SearchStore:e,DataStore:l,CartStore:k}},data(){return{q:"",loading:!1}},created(){this.SearchStore.data=""},computed:{hasSearch(){return!g.empty(this.q)}},methods:{viewItems(e){let l=this.$refs.bar;this.$refs.item_details.getMenuItem(e,l)},refresh(e){this.clearSearch(),e()},clearSearch(){this.SearchStore.is_submit=!1,this.q="",this.SearchStore.data=[]},doSearch(){this.loading=!0,this.SearchStore.data=[],this.SearchStore.status=[],this.SearchStore.is_submit=!0,g.fetchDataByTokenPost("searchfooditems","q="+this.q).then(e=>{this.SearchStore.data=e.details.data}).catch(e=>{}).then(e=>{this.loading=!1})},afterAddtocart(){this.CartStore.getCart(this.DataStore.cart_uuid)}}},Z={class:"q-pa-md full-width"},G={key:0,class:"full-width text-center"},J={key:1,class:"full-width text-center"},K={class:"text-weight-bold"},W={class:"text-weight-light text-grey"};function ee(e,l,k,n,h,c){const q=Q("TableSkeleton"),D=Q("ItemDetails");return a(),f(M,{onRefresh:c.refresh},{default:r(()=>[t(j,{class:v({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}),reveal:"","reveal-offset":"50"},{default:r(()=>[t(R,null,{default:r(()=>[t(b,{onClick:l[0]||(l[0]=s=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),t(N,{class:"text-weight-bold"},{default:r(()=>[S(d(e.$t("Search items")),1)]),_:1})]),_:1}),t(V)]),_:1},8,["class"]),t(H,{class:v([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode},"flex justify-start"])},{default:r(()=>[p("div",Z,[t(B,{outlined:"",modelValue:h.q,"onUpdate:modelValue":l[1]||(l[1]=s=>h.q=s),label:e.$t("Search"),color:"grey-5"},{append:r(()=>[n.SearchStore.hasData?(a(),f(P,{key:0,class:"cursor-pointer",name:"close",color:"grey",onClick:c.clearSearch},null,8,["onClick"])):m("",!0),n.SearchStore.hasData?m("",!0):(a(),f(b,{key:1,icon:"search",unelevated:"",color:"dark-grey","no-caps":"",loading:h.loading,round:"",flat:"",onClick:c.doSearch,disable:!c.hasSearch},null,8,["loading","onClick","disable"]))]),_:1},8,["modelValue","label"]),n.SearchStore.hasData?(a(),o(i,{key:0},[t(z,{class:"q-mt-md"}),t(O,{separator:""},{default:r(()=>[(a(!0),o(i,null,w(n.SearchStore.data,s=>(a(),f(E,{key:s,clickable:"",onClick:u=>c.viewItems(s)},{default:r(()=>[t(I,{avatar:"",top:""},{default:r(()=>[t(L,{size:"50px"},{default:r(()=>[t(F,{src:s.url_image,style:{width:"50px",height:"50px"}},null,8,["src"])]),_:2},1024)]),_:2},1024),t(I,null,{default:r(()=>[t(_,{class:"text-dark"},{default:r(()=>[S(d(s.item_name),1)]),_:2},1024),t(_,{caption:"",lines:"2"},{default:r(()=>[S(d(s.item_description),1)]),_:2},1024),t(_,{caption:""},{default:r(()=>[(a(!0),o(i,null,w(s.price,(u,x)=>(a(),o(i,{key:u},[x<=0?(a(),o(i,{key:0},[u.discount>0?(a(),o(i,{key:0},[S(d(u.pretty_price_after_discount),1)],64)):(a(),o(i,{key:1},[S(d(u.pretty_price),1)],64))],64)):m("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})],64)):m("",!0),h.loading?(a(),f(q,{key:1,rows:10})):m("",!0)]),n.SearchStore.is_submit?(a(),o("div",J,[!n.SearchStore.hasData&&!h.loading?(a(),o(i,{key:0},[p("div",K,d(e.$t("No data available")),1),p("div",W,d(e.$t("Sorry, we couldn't find any results")),1)],64)):m("",!0)])):(a(),o("div",G)),t(D,{ref:"item_details",onAfterAddtocart:c.afterAddtocart},null,8,["onAfterAddtocart"]),t($,{ref:"bar",position:"top",color:"primary",size:"2px","skip-hijack":""},null,512)]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var ye=A(Y,[["render",ee]]);export{ye as default};
