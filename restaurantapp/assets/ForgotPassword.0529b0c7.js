import{_ as f,A as m,n as l,a0 as i,d as t,q as a,$ as g,F as c,a2 as u,X as k,Y as o,Z as b,ap as d,p as y,at as w,ac as q}from"./index.f6661a24.js";import{Q}from"./QToolbarTitle.0f4dda99.js";import{Q as _}from"./QToolbar.7bb603c7.js";import{Q as T}from"./QHeader.ba9c2ff9.js";import{Q as h}from"./QSpace.7af5fd36.js";import{Q as $}from"./QForm.4e86ee71.js";import{Q as C}from"./QPage.78315ab4.js";import"./QResizeObserver.dc10e4c2.js";const v={name:"ForgotPassword",data(){return{loading:!1,email_address:"",steps:1,data:[],maxCounter:20,counter:this.maxCounter,timer:void 0}},watch:{counter(e,r){e<=0&&this.stopTimer()}},beforeUnmount(){this.stopTimer()},methods:{onSubmit(){this.loading=!0,m.fetchDataPost("ForgotPassword","email_address="+this.email_address).then(e=>{this.steps=2,this.startTimer(),this.data=e}).catch(e=>{m.notify("dark",e,"error",this.$q)}).then(e=>{this.loading=!1})},stopTimer(){clearInterval(this.timer)},startTimer(){this.stopTimer(),this.counter=this.maxCounter,this.timer=setInterval(()=>{this.counter--},1e3)},resendEmail(){this.loading=!0,m.fetchDataPost("resendResetEmail","uuid="+this.data.details.uuid).then(e=>{this.steps=2,this.startTimer()}).catch(e=>{m.notify("red-5",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})}}},P={class:"full-width text-center"},x={class:"text-weight-bold no-margin"},E={key:0,class:"text-weight-medium q-ma-none text-grey"},F={key:1,class:"rounded-borders border-green q-pa-sm"},S={key:1,class:"font11 q-ma-none"};function V(e,r,B,I,s,p){return l(),i(c,null,[t(T,{class:g({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:a(()=>[t(_,null,{default:a(()=>[t(u,{onClick:r[0]||(r[0]=n=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),t(Q,{class:"text-weight-bold"},{default:a(()=>[k(o(e.$t("Forgot Password")),1)]),_:1})]),_:1}),t(b)]),_:1},8,["class"]),t(C,{class:"flex flex-center q-pl-md q-pr-md"},{default:a(()=>[d("div",P,[d("h6",x,o(e.$t("Let's Get your account back"))+"! ",1),s.steps==1?(l(),i("p",E,o(e.$t("Enter your email to receive instructions for resetting your password"))+". ",1)):(l(),i("p",F,o(s.data.msg),1)),t(h,{class:"q-pa-sm"}),s.steps==1?(l(),y($,{key:2,onSubmit:p.onSubmit},{default:a(()=>[t(w,{modelValue:s.email_address,"onUpdate:modelValue":r[1]||(r[1]=n=>s.email_address=n),label:e.$t("Email"),outlined:"","stack-label":"",color:"grey-5","lazy-rules":"",rules:[n=>n&&n.length>0||this.$t("This field is required")]},{prepend:a(()=>[t(q,{name:"las la-envelope",color:"grey"})]),_:1},8,["modelValue","label","rules"]),t(u,{type:"submit",color:"primary","text-color":"white",label:e.$t("Reset Password"),unelevated:"",class:"full-width",size:"lg","no-caps":"",loading:s.loading},null,8,["label","loading"])]),_:1},8,["onSubmit"])):(l(),i(c,{key:3},[t(h,{class:"q-pa-xs"}),s.counter===0?(l(),i(c,{key:0},[t(u,{onClick:p.resendEmail,flat:"",dense:"",color:"myblue","no-caps":"",class:"font13 q-ma-none"},{default:a(()=>[d("u",null,o(e.$t("Resend reset email")),1)]),_:1},8,["onClick"]),t(u,{onClick:r[2]||(r[2]=n=>s.steps=1),flat:"",dense:"",color:"secondary","no-caps":"",class:"font13 q-ma-none"},{default:a(()=>[d("u",null,o(e.$t("Enter email again")),1)]),_:1})],64)):(l(),i("p",S,[d("u",null,o(e.$t("Resend Code in"))+" "+o(s.counter),1)]))],64))])]),_:1})],64)}var L=f(v,[["render",V]]);export{L as default};
