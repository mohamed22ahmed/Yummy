import{_ as S,ay as V,u as A,A as s,m as w,n as d,a0 as f,d as o,q as p,$ as b,F as g,a2 as k,X as q,Y as m,Z as I,p as u,ap as n,ac as C,as as T,at as r,az as D}from"./index.f6661a24.js";import{Q as E}from"./QToolbarTitle.0f4dda99.js";import{Q as B}from"./QToolbar.7bb603c7.js";import{Q as F}from"./QHeader.ba9c2ff9.js";import{Q as x}from"./QInnerLoading.c6ed50f8.js";import{Q as P}from"./QImg.b7890c8b.js";import{Q as h}from"./QSpace.7af5fd36.js";import{Q as c}from"./QSelect.4e3956e1.js";import{Q as L}from"./QFooter.4f4f9530.js";import{Q as $}from"./QForm.4e86ee71.js";import{Q as z}from"./QPage.78315ab4.js";import{A as v}from"./AppCamera.4fe7ee93.js";import"./QResizeObserver.dc10e4c2.js";import"./QChip.5b52e54d.js";import"./QItemLabel.0d3c2221.js";import"./QMenu.c4f03f28.js";import"./selection.ef67fb9c.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";const M={name:"AddDriver",components:{MobilePhone:V(()=>D(()=>import("./MobilePhone.f313bcda.js"),["assets/MobilePhone.f313bcda.js","assets/QImg.b7890c8b.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QItemLabel.0d3c2221.js","assets/QSelect.4e3956e1.js","assets/QChip.5b52e54d.js","assets/QMenu.c4f03f28.js","assets/selection.ef67fb9c.js","assets/rtl.276c3f1b.js","assets/format.de7e9769.js"])),UploaderFile:V(()=>D(()=>import("./UploaderFile.36c0f73c.js"),["assets/UploaderFile.36c0f73c.js","assets/QUploader.d12c38b5.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QCircularProgress.24399868.js","assets/format.de7e9769.js"]))},data(){return{id:"",data:[],loading:!1,first_name:"",last_name:"",email:"",phone:"",address:"",new_password:"",confirm_password:"",employment_type:"employee",salary_type:"salary",salary:0,fixed_amount:0,commission:0,commission_type:"fixed",incentives_amount:0,allowed_offline_amount:0,status:"active",upload_enabled:!1,photo_data:"",photo:"",upload_path:"",avatar:""}},setup(e){return{DataStore:A()}},mounted(){this.id=this.$route.query.id,s.empty(this.id)||this.getDriverInfo()},computed:{isEdit(){return!s.empty(this.id)},hasData(){return Object.keys(this.data).length>0},hasPhotodata(){return Object.keys(this.photo_data).length>0},hasPhoto(){return!s.empty(this.photo)}},methods:{getDriverInfo(){this.loading=!0,s.fetchDataByTokenPost("getDriverInfo","id="+this.id).then(e=>{this.data=e.details,this.first_name=this.data.first_name,this.last_name=this.data.last_name,this.email=this.data.email,this.phone_prefix=this.data.phone_prefix,this.phone=this.data.phone,this.address=this.data.address,this.employment_type=this.data.employment_type,this.salary_type=this.data.salary_type,this.salary=this.data.salary,this.fixed_amount=this.data.fixed_amount,this.commission=this.data.commission,this.commission_type=this.data.commission_type,this.incentives_amount=this.data.incentives_amount,this.allowed_offline_amount=this.data.allowed_offline_amount,this.status=this.data.status,this.avatar=e.details.avatar,this.photo=e.details.photo,this.upload_path=e.details.path}).catch(e=>{s.notify("red-5",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})},afterInput(e){this.phone=e},formSubmit(){let e={id:this.id,first_name:this.first_name,last_name:this.last_name,email:this.email,phone:this.phone,address:this.address,new_password:this.new_password,confirm_password:this.confirm_password,employment_type:this.employment_type,salary_type:this.salary_type,salary:this.salary,fixed_amount:this.fixed_amount,commission:this.commission,commission_type:this.commission_type,incentives_amount:this.incentives_amount,allowed_offline_amount:this.allowed_offline_amount,status:this.status,photo:this.photo,upload_path:this.upload_path,file_data:this.hadData()?this.photo_data.data:"",image_type:this.hadData()?this.photo_data.format:""};s.showLoadingBox("",this.$q),s.fetchDataByTokenPost(s.empty(this.id)?"AddDriver":"UpdateDriver",e).then(a=>{s.notify("light-green",a.msg,"check_circle",this.$q),this.$router.replace({path:"/delivery-management/driver"})}).catch(a=>{s.notify("red-5",a,"error_outline",this.$q)}).then(a=>{s.hideLoadingBox(this.$q)})},afterUploadfile(e){this.photo=e.filename,this.avatar=e.url_image,this.upload_path=e.upload_path},takePhoto(){this.$q.capacitor?v.isCameraEnabled().then(e=>{v.isFileAccessEnabled().then(a=>{v.getPhoto(1).then(_=>{this.photo_data=_}).catch(_=>{this.photo_data=[]})}).catch(a=>{s.notify("dark",a,"error",this.$q)})}).catch(e=>{s.notify("dark",e,"error",this.$q)}):this.upload_enabled=!this.upload_enabled},hadData(){return Object.keys(this.photo_data).length>0}}},N={class:"row q-gutter-sm"},O={class:"col"},j={class:"font12 line-normal"},G={class:"text-subtitle1"},R={class:"text-subtitle1"},H={class:"text-subtitle1"},J={class:"q-gutter-y-md"},X={class:"row q-gutter-x-sm"},Y={class:"text-subtitle1"},Z={class:"q-gutter-y-md"};function K(e,a,_,y,l,i){const Q=w("UploaderFile"),U=w("MobilePhone");return d(),f(g,null,[o(F,{class:b({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:p(()=>[o(B,null,{default:p(()=>[o(k,{onClick:a[0]||(a[0]=t=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),o(E,{class:"text-weight-bold"},{default:p(()=>[i.isEdit?(d(),f(g,{key:0},[q(m(e.$t("Update Driver")),1)],64)):(d(),f(g,{key:1},[q(m(e.$t("Add Driver")),1)],64))]),_:1})]),_:1}),o(I)]),_:1},8,["class"]),o(z,{class:b([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode,"flex flex-center":i.isEdit&&!i.hasData},"q-pa-md"])},{default:p(()=>[l.loading?(d(),u(x,{key:0,showing:!0,color:"primary",size:"md"})):(d(),u($,{key:1,onSubmit:i.formSubmit},{default:p(()=>[n("div",N,[i.hasPhotodata?(d(),u(P,{key:0,src:l.photo_data.path,"spinner-color":"primary","spinner-size":"sm",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):i.hasPhoto?(d(),u(P,{key:1,src:this.avatar,"spinner-color":"primary",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):(d(),f("div",{key:2,class:b(["col-3 row items-center justify-center radius8",{"bg-grey600 ":e.$q.dark.mode,"bg-mygrey ":!e.$q.dark.mode}]),style:{height:"70px"}},[o(C,{name:"las la-image",class:"text-grey",size:"xl"})],2)),n("div",O,[n("div",j,m(e.$t("Items with quality photos are often more popular. Maximum 2 MB"))+". "+m(e.$t("Accepted types: PNG. JPG")),1),o(k,{label:i.hasPhoto?this.$t("Change Photo"):i.hasData?this.$t("Change Photo"):this.$t("Add Photo"),flat:"",color:"primary","no-caps":"",class:"q-pl-none q-pr-none",onClick:i.takePhoto},null,8,["label","onClick"])])]),l.upload_enabled?(d(),u(Q,{key:0,ref:"uploader_file",onAfterUploadfile:i.afterUploadfile},null,8,["onAfterUploadfile"])):T("",!0),o(h,{class:"q-pa-sm"}),o(r,{modelValue:l.first_name,"onUpdate:modelValue":a[1]||(a[1]=t=>l.first_name=t),label:e.$t("First name"),"stack-label":"",outlined:"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),o(r,{modelValue:l.last_name,"onUpdate:modelValue":a[2]||(a[2]=t=>l.last_name=t),label:e.$t("Last name"),"stack-label":"",outlined:"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),o(r,{modelValue:l.email,"onUpdate:modelValue":a[3]||(a[3]=t=>l.email=t),label:e.$t("Email address"),"stack-label":"",outlined:"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),o(U,{ref:"mobile_phone",onAfterInput:i.afterInput,prefix:e.phone_prefix,phone:l.phone},null,8,["onAfterInput","prefix","phone"]),o(r,{modelValue:l.address,"onUpdate:modelValue":a[4]||(a[4]=t=>l.address=t),label:e.$t("Complete address"),"stack-label":"",outlined:"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),n("div",G,m(e.$t("Login")),1),o(r,{modelValue:l.new_password,"onUpdate:modelValue":a[5]||(a[5]=t=>l.new_password=t),type:"password",label:e.$t("Password"),"stack-label":"",outlined:"",color:"grey-5"},null,8,["modelValue","label"]),o(h,{class:"q-pa-sm"}),o(r,{modelValue:l.confirm_password,"onUpdate:modelValue":a[6]||(a[6]=t=>l.confirm_password=t),type:"password",label:e.$t("Confirm password"),"stack-label":"",outlined:"",color:"grey-5"},null,8,["modelValue","label"]),o(h,{class:"q-pa-sm"}),n("div",R,m(e.$t("Employment Type")),1),o(c,{modelValue:l.employment_type,"onUpdate:modelValue":a[7]||(a[7]=t=>l.employment_type=t),label:e.$t("Employment"),options:y.DataStore.employment_type,"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","options","rules"]),n("div",H,m(e.$t("Payment options")),1),n("div",J,[o(c,{modelValue:l.salary_type,"onUpdate:modelValue":a[8]||(a[8]=t=>l.salary_type=t),label:e.$t("Salary type"),options:y.DataStore.salary_type,"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":""},null,8,["modelValue","label","options"]),o(r,{modelValue:l.salary,"onUpdate:modelValue":a[9]||(a[9]=t=>l.salary=t),type:"number",step:"any",label:e.$t("Salary amount"),"stack-label":"",outlined:"",color:"grey-5"},null,8,["modelValue","label"]),o(r,{modelValue:l.fixed_amount,"onUpdate:modelValue":a[10]||(a[10]=t=>l.fixed_amount=t),type:"number",step:"any",label:e.$t("Fixed amount"),"stack-label":"",outlined:"",color:"grey-5"},null,8,["modelValue","label"]),n("div",X,[o(r,{modelValue:l.commission,"onUpdate:modelValue":a[11]||(a[11]=t=>l.commission=t),type:"number",step:"any",label:e.$t("Commission amount"),"stack-label":"",outlined:"",color:"grey-5",class:"col"},null,8,["modelValue","label"]),o(c,{modelValue:l.commission_type,"onUpdate:modelValue":a[12]||(a[12]=t=>l.commission_type=t),options:y.DataStore.commission_type,label:e.$t("Type"),"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",class:"col-4"},null,8,["modelValue","options","label"])])]),o(h,{class:"q-pa-sm"}),n("div",Y,m(e.$t("Incentives")),1),n("div",Z,[o(r,{modelValue:l.incentives_amount,"onUpdate:modelValue":a[13]||(a[13]=t=>l.incentives_amount=t),type:"number",step:"any",label:e.$t("Incentives amount (per delivery)"),"stack-label":"",outlined:"",color:"grey-5"},null,8,["modelValue","label"]),o(r,{modelValue:l.allowed_offline_amount,"onUpdate:modelValue":a[14]||(a[14]=t=>l.allowed_offline_amount=t),type:"number",step:"any",label:e.$t("Maximum cash amount that can collect"),"stack-label":"",outlined:"",color:"grey-5"},null,8,["modelValue","label"]),o(c,{modelValue:l.status,"onUpdate:modelValue":a[15]||(a[15]=t=>l.status=t),options:y.DataStore.customer_status,label:e.$t("Status"),"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":""},null,8,["modelValue","options","label"])]),o(h,{class:"q-pa-md"}),o(L,null,{default:p(()=>[o(k,{type:"submit",color:"primary","text-color":"white",label:e.$t("Save"),unelevated:"",class:"full-width radius8",size:"lg","no-caps":""},null,8,["label"])]),_:1})]),_:1},8,["onSubmit"]))]),_:1},8,["class"])],64)}var be=S(M,[["render",K]]);export{be as default};
