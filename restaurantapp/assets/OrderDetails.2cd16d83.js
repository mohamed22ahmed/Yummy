import{_ as Y,ay as q,u as X,A as _,l as Z,m as w,n as i,p as m,q as t,d as e,a2 as D,X as n,Y as s,$ as A,a0 as d,ap as c,a4 as p,a5 as u,F as h,as as g,a3 as B,b9 as J,ac as $,Z as Q,a6 as K,a1 as v,b7 as U,az as C}from"./index.f6661a24.js";import{Q as W}from"./QToolbarTitle.0f4dda99.js";import{Q as ee}from"./QToolbar.7bb603c7.js";import{Q as te}from"./QHeader.ba9c2ff9.js";import{Q as re}from"./QInnerLoading.c6ed50f8.js";import{Q as f}from"./QItemLabel.0d3c2221.js";import{Q as E}from"./QChip.5b52e54d.js";import{Q as b}from"./QList.16ddb51a.js";import{Q as se}from"./QMenu.c4f03f28.js";import{Q as P}from"./QExpansionItem.f7624880.js";import{Q as R}from"./QImg.b7890c8b.js";import{Q as ae}from"./QBadge.04d2c306.js";import{Q as oe}from"./QPage.78315ab4.js";import{Q as ie}from"./QFooter.4f4f9530.js";import{Q as le}from"./QPullToRefresh.a19885b1.js";import{C as S}from"./ClosePopup.6296f014.js";import{P as ne}from"./PrintTemplate.1e180354.js";import{A as L}from"./AppBluetooth.bdfa691f.js";import"./QResizeObserver.dc10e4c2.js";import"./selection.ef67fb9c.js";import"./QSlideTransition.07e7f5c6.js";import"./TouchPan.ca911d69.js";import"./touch.9135741d.js";import"./format.de7e9769.js";const de={name:"OrderDetails",components:{OrderDeliveryDetails:q(()=>C(()=>import("./OrderDeliveryDetails.12c936e5.js"),["assets/OrderDeliveryDetails.12c936e5.js","assets/QToolbarTitle.0f4dda99.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QSpace.7af5fd36.js","assets/QToolbar.7bb603c7.js","assets/QTimeline.97a9c942.js"])),RejectionList:q(()=>C(()=>import("./RejectionList.af7eca08.js"),["assets/RejectionList.af7eca08.js","assets/QToolbarTitle.0f4dda99.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QSpace.7af5fd36.js","assets/QToolbar.7bb603c7.js","assets/QItemLabel.0d3c2221.js","assets/QList.16ddb51a.js","assets/QFooter.4f4f9530.js","assets/QResizeObserver.dc10e4c2.js","assets/QForm.4e86ee71.js","assets/ClosePopup.6296f014.js"])),DelayOrder:q(()=>C(()=>import("./DelayOrder.317c3a9a.js"),["assets/DelayOrder.317c3a9a.js","assets/QToolbarTitle.0f4dda99.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QSpace.7af5fd36.js","assets/QToolbar.7bb603c7.js","assets/QBtnToggle.b6d48c98.js","assets/QFooter.4f4f9530.js","assets/QResizeObserver.dc10e4c2.js","assets/QForm.4e86ee71.js","assets/ClosePopup.6296f014.js"])),ContactPhone:q(()=>C(()=>import("./ContactPhone.520c16af.js"),["assets/ContactPhone.520c16af.js","assets/QToolbarTitle.0f4dda99.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QToolbar.7bb603c7.js","assets/QFooter.4f4f9530.js","assets/QResizeObserver.dc10e4c2.js","assets/ClosePopup.6296f014.js"])),PrinterList:q(()=>C(()=>import("./PrinterList.7567177e.js"),["assets/PrinterList.7567177e.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QToolbarTitle.0f4dda99.js","assets/QSpace.7af5fd36.js","assets/QToolbar.7bb603c7.js","assets/QList.16ddb51a.js","assets/QFooter.4f4f9530.js","assets/QResizeObserver.dc10e4c2.js","assets/ClosePopup.6296f014.js","assets/UserStore.3896d23d.js"])),PaymentHistory:q(()=>C(()=>import("./PaymentHistory.ad0474ad.js"),["assets/PaymentHistory.ad0474ad.js","assets/QToolbarTitle.0f4dda99.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QSpace.7af5fd36.js","assets/QToolbar.7bb603c7.js","assets/QTimeline.97a9c942.js"])),CancelOrder:q(()=>C(()=>import("./RejectionList.af7eca08.js"),["assets/RejectionList.af7eca08.js","assets/QToolbarTitle.0f4dda99.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QSpace.7af5fd36.js","assets/QToolbar.7bb603c7.js","assets/QItemLabel.0d3c2221.js","assets/QList.16ddb51a.js","assets/QFooter.4f4f9530.js","assets/QResizeObserver.dc10e4c2.js","assets/QForm.4e86ee71.js","assets/ClosePopup.6296f014.js"])),PrintPreview:q(()=>C(()=>import("./PrintPreview.f376de4c.js"),["assets/PrintPreview.f376de4c.js","assets/QSpace.7af5fd36.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/ClosePopup.6296f014.js","assets/PrintTemplate.1e180354.js"]))},data(){return{order_uuid:"",order_data:[],loading:!1,order_items:[],order_summary:[],order_info:[],order_label:[],refund_transaction:[],order_status:[],order_services:[],merchant:[],progress:0,data_progress:[],progress_order_status:"",progress_order_status_details:"",allowed_to_cancel:!1,pdf_link:"",delivery_timeline:[],order_delivery_status:[],allowed_to_review:!1,payload:["merchant_info","items","summary","order_info","progress","refund_transaction","status_allowed_cancelled","pdf_link","delivery_timeline","order_delivery_status","allowed_to_review","credit_card","driver"],buttons:[],button_uuid:"",group_name:"",map_direction:"",credit_card_details:"",printer_details:[],customer:[],driver_data:[],is_refresh:!1,order_table_data:[]}},created(){this.order_uuid=this.$route.query.order_uuid,this.orderDetails()},setup(){return{DataStore:X()}},computed:{hasRefund(){return this.refund_transaction.length>0},hasData(){return Object.keys(this.order_data).length>0},hasCustomer(){return Object.keys(this.customer).length>0},showAssign(){return this.order_info.show_assign_driver},canReassign(){return this.order_info.can_reassign_driver},hasDriver(){return Object.keys(this.driver_data).length>0},hasTableData(){return Object.keys(this.order_table_data).length>0}},methods:{changeColor(r){let a="mygrey";switch(r){case"btn-green":a="primary";break;case"btn-yellow":a="yellow-9";break;case"btn-black":a="mygrey";break}return a},changeTextColor(r){let a="white";switch(r){case"btn-green":a="white";break;case"btn-yellow":a="white";break;case"btn-black":a="dark";break}return a},refresh(r){r?this.is_refresh=!0:this.is_refresh=!1,this.orderDetails(r),this.$refs.payment_history.getOrderHistory()},orderDetails(r){this.loading=!0,_.fetchDataByToken("orderDetails",{order_uuid:this.order_uuid,hide_currency:this.DataStore.hide_currency?1:0,payload:this.payload}).then(a=>{this.order_data=a.details,this.merchant=a.details.data.merchant,this.order_items=a.details.data.items,this.order_summary=a.details.data.summary,this.order_info=a.details.data.order.order_info,this.order_label=a.details.data.label,this.refund_transaction=a.details.data.refund_transaction,this.order_status=a.details.data.order.status,this.order_services=a.details.data.order.services,this.data_progress=a.details.data.progress,this.progress=a.details.data.progress.order_progress,this.allowed_to_cancel=a.details.data.allowed_to_cancel,this.pdf_link=a.details.data.pdf_link,this.delivery_timeline=a.details.data.delivery_timeline,this.order_delivery_status=a.details.data.order_delivery_status,this.allowed_to_review=a.details.data.allowed_to_review,this.customer=a.details.data.customer,this.driver_data=a.details.data.driver_data,this.order_table_data=a.details.data.order_table_data,this.progress_order_status=a.details.data.progress.order_status,this.progress_order_status_details=a.details.data.progress.order_status_details,this.order_services=this.order_services[this.order_info.service_code],this.order_status=this.order_status[this.order_info.status],this.buttons=a.details.data.buttons,this.group_name=a.details.data.group_name,this.map_direction=a.details.data.map_direction,this.credit_card_details=a.details.data.credit_card_details,_.empty(this.credit_card_details)||(this.credit_card_details=Z(this.credit_card_details))}).catch(a=>{this.order_data=[]}).then(a=>{this.loading=!1,this.is_refresh=!1,_.empty(r)||r()})},doActions(r){console.log(r),this.button_uuid=r.uuid,r.do_actions=="reject_form"?this.$refs.rejection.dialog=!0:this.getOrderSummaryChanges(r)},afterAddreason(r){this.dialog=!1,this.updateOrderStatus(r,"updateOrderStatus")},updateOrderStatus(r,a){_.showLoadingBox("",this.$q),_.fetchDataByToken(a,{order_uuid:this.order_info.order_uuid,reason:r,uuid:this.button_uuid}).then(x=>{this.orderDetails(),this.$refs.payment_history.getOrderHistory()}).catch(x=>{_.notify("dark",x,"error",this.$q)}).then(x=>{_.hideLoadingBox(this.$q)})},getOrderSummaryChanges(r){_.showLoadingBox("",this.$q),_.fetchDataByToken("getOrderSummaryChanges",{order_uuid:this.order_info.order_uuid,group_name:this.group_name}).then(a=>{this.method=a.details.summary_changes.method,this.commission=a.details.commission,console.log(this.method),this.method=="less_on_account"?this.$q.dialog({title:this.$t("Accept Order"),message:this.commission,cancel:{label:this.$t("Cancel"),"no-caps":!0,flat:!0},persistent:!0,transitionShow:"none",transitionHide:"none",ok:{label:this.$t("Less on my account"),"no-caps":!0,unelevated:!0,class:"radius8"}}).onOk(()=>{this.updateOrderStatus("","lessCashOnAccount")}):this.updateOrderStatus("","updateOrderStatus")}).catch(a=>{_.notify("dark",a,"error",this.$q)}).then(a=>{_.hideLoadingBox(this.$q)})},afterSelect(r){_.showLoadingBox("",this.$q),_.fetchDataByToken("setDelayToOrder",{order_uuid:this.order_info.order_uuid,time_delay:r}).then(a=>{_.notify("positive",a.msg,"check",this.$q)}).catch(a=>{_.notify("dark",a,"error",this.$q)}).then(a=>{_.hideLoadingBox(this.$q)})},showPrinter(){this.$q.capacitor?this.DataStore.osVersion>=12?this.$q.platform.is.ios?this.EnabledBT():L.CheckBTConnectPermissionOnly().then(r=>{this.EnabledBT()}).catch(r=>{this.$router.push("/settings/location-enabled")}).then(r=>{}):L.CheckLocationOnly().then(r=>{this.$refs.printer.dialog=!0}).catch(r=>{this.$router.push("/settings/location-enabled")}).then(r=>{}):this.$refs.printer.dialog=!0},EnabledBT(){L.Enabled().then(r=>{this.$refs.printer.dialog=!0}).catch(r=>{_.notify("dark",r.message,"error",this.$q)}).then(r=>{})},afterSelectprinter(r){this.printer_details=r,r.printer_model=="feieyun"?this.FPprint(r):this.$q.capacitor?this.CheckBT():_.notify("dark",this.$t("Bluetooth Printers works only in actual device"),"error",this.$q)},CheckBT(){L.Enabled().then(r=>{this.DataStore.printer_set==2?this.$refs.print_preview.showDialog(!0,!1):this.BondAndConnect()}).catch(r=>{_.notify("dark",r,"error",this.$q)}).then(r=>{})},BondAndConnect(){this.$refs.printer.dialog=!1,_.showLoadingBox(this.$t("Connecting..."),this.$q),L.Connect(this.printer_details.printer_uuid,this.printer_details.printer_model).then(r=>{this.Print()}).catch(r=>{_.notify("dark",r,"error",this.$q)}).then(r=>{_.hideLoadingBox(this.$q)})},Print(r){let a=ne.ReceiptTemplate(this.printer_details.paper_width,this.order_info,this.merchant,this.order_items,this.order_summary);console.log("TEMPLATE ==>"),console.log(a.tpl_all),console.log(a.tpl_data),Object.keys(a).length>0&&(this.printer_details.printer_model=="sunmi"?this.printData(a.tpl_all):Object.entries(a.tpl_data).forEach(([x,T])=>{_.empty(T)||(x>0?setTimeout(()=>{console.log(T),this.printData(T)},2e3):(console.log(T),this.printData(T)))}))},printData(r){_.showLoadingBox(this.$t("Printing..."),this.$q),L.Print(this.printer_details.printer_uuid,r,this.printer_details.printer_model,this.printer_details.service_id,this.printer_details.characteristics).then(a=>{}).catch(a=>{_.notify("dark",a,"error",this.$q)}).then(a=>{_.hideLoadingBox(this.$q)})},FPprint(r){this.$refs.printer.dialog=!1,_.showLoadingBox(this.$t("Printing..."),this.$q),_.fetchDataByTokenPost("FPprint","printer_id="+r.printer_id+"&order_uuid="+this.order_info.order_uuid).then(a=>{_.notify("green",a.msg,"check",this.$q)}).catch(a=>{_.notify("dark",a,"error",this.$q)}).then(a=>{_.hideLoadingBox(this.$q)})},afterCancel(r){console.log(r),_.showLoadingBox("",this.$q),_.fetchDataByTokenPost("cancelOrder","order_uuid="+this.order_uuid+"&reason="+r).then(a=>{this.orderDetails()}).catch(a=>{_.notify("dark",a,"error",this.$q)}).then(a=>{_.hideLoadingBox(this.$q)})}}},_e={key:1,class:"full-width text-center"},ue={class:"text-weight-bold"},ce={class:"text-grey font12"},he={class:"q-mr-sm text-weight-bold"},fe={class:"text-weight-bold"},pe={class:"text-weight-light font11"},me={key:0,class:"text-bold"},ye={class:"text-bold"},ge={class:"text-bold"},be={key:0},ke={class:"text-bold"},ve={class:"row q-gutter-sm q-mb-sm"},qe={class:"text-weight-bold font14"},we={class:"text-weight-light font11"},De={class:"text-weight-bold font14"},Ce=["src"],Oe={key:1,class:"text-grey"},Pe={class:"no-margin"},xe=["innerHTML"],Te={class:"m-0 text-grey"},Le={key:0,class:"no-margin"},Ae={key:1,class:"no-margin"},Be=["innerHTML"],Qe={key:2,class:"no-margin"},Se={key:0,class:"no-margin"},$e={key:1,class:"no-margin"},Ee={class:"no-margin font12 text-weight-bold"};function Re(r,a,x,T,o,y){const I=w("OrderDeliveryDetails"),z=w("RejectionList"),V=w("DelayOrder"),j=w("ContactPhone"),H=w("PrinterList"),N=w("PaymentHistory"),F=w("CancelOrder"),M=w("PrintPreview");return i(),m(le,{onRefresh:y.refresh},{default:t(()=>[e(te,{class:A({"bg-mydark text-white":r.$q.dark.mode,"bg-grey-1 text-dark":!r.$q.dark.mode})},{default:t(()=>[e(ee,null,{default:t(()=>[e(D,{onClick:a[0]||(a[0]=l=>r.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:r.$q.dark.mode?"white":"dark"},null,8,["color"]),e(W,{class:"text-weight-bold"},{default:t(()=>[n(s(r.$t("Order Details")),1)]),_:1})]),_:1})]),_:1},8,["class"]),e(oe,{class:A([{"bg-mydark text-white":r.$q.dark.mode,"bg-grey-1 text-dark":!r.$q.dark.mode,"flex flex-center":!o.loading&&!y.hasData},"q-pl-md q-pr-md q-pb-md"])},{default:t(()=>[o.loading&&!o.is_refresh?(i(),m(re,{key:0,showing:!0,color:"primary",size:"md","label-class":"dark",class:"transparent"})):y.hasData?(i(),d(h,{key:2},[e(b,null,{default:t(()=>[e(p,{class:"q-pl-none q-pr-none"},{default:t(()=>[e(u,null,{default:t(()=>[e(f,{class:"text-dark text-weight-bold"},{default:t(()=>[n(s(r.$t("Order ID")),1)]),_:1}),e(f,{caption:"",class:"font12"},{default:t(()=>[c("span",he,"#"+s(o.order_info.order_id),1),e(E,{color:r.$q.dark.mode?"grey600":"mygrey","text-color":r.$q.dark.mode?"grey300":"dark",size:"sm",class:"q-ma-none"},{default:t(()=>[n(s(o.order_services.service_name),1)]),_:1},8,["color","text-color"])]),_:1}),e(f,{caption:"",class:"font12 q-gutter-xs"},{default:t(()=>[c("div",fe,s(o.order_info.payment_name),1),c("div",pe,s(o.order_info.place_on),1),c("div",null,[n(s(r.$t("Delivery Date/Time"))+": ",1),o.order_info.whento_deliver=="schedule"?(i(),d("span",me,s(o.order_info.schedule_at),1)):(i(),d(h,{key:1},[n(s(o.order_info.delivery_date)+" "+s(o.order_info.delivery_time),1)],64))]),c("div",null,[n(s(r.$t("Include utensils"))+": ",1),c("span",ye,[o.order_info.include_utensils==1?(i(),d(h,{key:0},[n(s(r.$t("Yes")),1)],64)):(i(),d(h,{key:1},[n(s(r.$t("No")),1)],64))])]),c("div",null,[n(s(r.$t("Payment status"))+": ",1),c("span",ge,s(o.order_info.payment_status),1)]),o.order_info.payment_change>0?(i(),d("div",be,[n(s(r.$t("Payment change"))+": ",1),c("span",ke,s(o.order_info.payment_change_pretty),1)])):g("",!0)]),_:1})]),_:1}),e(u,{side:"",top:""},{default:t(()=>[c("div",ve,[e(D,{round:"",color:"mygrey","text-color":"dark",icon:"las la-print",unelevated:"",size:"md",onClick:y.showPrinter},null,8,["onClick"]),e(D,{round:"",color:"primary",icon:"las la-ellipsis-h",unelevated:"",size:"md"},{default:t(()=>[e(se,null,{default:t(()=>[e(b,{style:{"min-width":"150px"},separator:""},{default:t(()=>[B((i(),m(p,{clickable:"",onClick:a[1]||(a[1]=l=>this.$refs.contact_phone.dialog=!0)},{default:t(()=>[e(u,null,{default:t(()=>[n(s(r.$t("Contact customer")),1)]),_:1})]),_:1})),[[S]]),B((i(),m(p,{clickable:"",onClick:a[2]||(a[2]=l=>this.$refs.delay_order.dialog=!0)},{default:t(()=>[e(u,null,{default:t(()=>[n(s(r.$t("Delay order")),1)]),_:1})]),_:1})),[[S]]),o.allowed_to_cancel?B((i(),m(p,{key:0,clickable:"",onClick:a[3]||(a[3]=l=>this.$refs.cancel_order.dialog=!0)},{default:t(()=>[e(u,null,{default:t(()=>[n(s(r.$t("Cancel order")),1)]),_:1})]),_:1})),[[S]]):g("",!0)]),_:1})]),_:1})]),_:1})]),e(E,{color:"mygrey","text-color":"dark",size:"sm",style:J(`color:${o.order_status.font_color_hex} !important; background-color:${o.order_status.background_color_hex} !important; `),class:"q-ma-none"},{default:t(()=>[n(s(o.order_status.status),1)]),_:1},8,["style"])]),_:1})]),_:1}),e(p,{onClick:a[4]||(a[4]=l=>this.$refs.OrderDeliveryDetails.dialog=!0),clickable:"",class:"q-pl-none q-pr-none q-pt-none"},{default:t(()=>[e(u,null,{default:t(()=>[e(f,{caption:"",class:"font12"},{default:t(()=>[c("div",qe,s(r.$t("Timeline")),1),c("div",we,s(o.progress_order_status),1)]),_:1})]),_:1}),e(u,{avatar:""},{default:t(()=>[e($,{color:"grey",size:"15px",name:"las la-angle-right"})]),_:1})]),_:1}),e(Q),e(p,{onClick:a[5]||(a[5]=l=>this.$refs.payment_history.dialog=!0),clickable:"",class:"q-pl-none q-pr-none q-pt-none"},{default:t(()=>[e(u,null,{default:t(()=>[e(f,{caption:"",class:"font12"},{default:t(()=>[c("div",De,s(r.$t("Payment history")),1)]),_:1})]),_:1}),e(u,{avatar:""},{default:t(()=>[e($,{color:"grey",size:"15px",name:"las la-angle-right"})]),_:1})]),_:1})]),_:1}),y.hasCustomer?(i(),m(b,{key:0,class:"qlist-no-padding border-grey-top"},{default:t(()=>[o.customer.client_id?(i(),m(P,{key:0,"expand-separator":"",label:r.$t("Customer"),class:"expansion-q-pl-none"},{default:t(()=>[e(b,null,{default:t(()=>[e(p,null,{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(K,null,{default:t(()=>[c("img",{src:o.customer.avatar},null,8,Ce)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(f,{caption:"",class:"font13"},{default:t(()=>[n(s(o.customer.first_name)+" "+s(o.customer.last_name),1)]),_:1}),e(f,{caption:"",class:"font13"},{default:t(()=>[n(s(o.customer.contact_phone),1)]),_:1}),e(f,{caption:"",class:"font13"},{default:t(()=>[n(s(o.customer.email_address),1)]),_:1})]),_:1})]),_:1}),e(p,{clickable:""},{default:t(()=>[e(D,{flat:"",color:"blue","no-caps":"",class:"full-width",to:{path:"customer/details",query:{client_id:o.customer.client_id}}},{default:t(()=>[n(s(o.customer.order_count)+" "+s(r.$t("Orders")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:1},8,["label"])):g("",!0)]),_:1})):g("",!0),o.order_info.order_type=="dinein"&&y.hasTableData?(i(),m(b,{key:1,class:"qlist-no-padding border-grey-top"},{default:t(()=>[e(P,{"expand-separator":"",label:r.$t("Table Information"),class:"expansion-q-pl-none"},{default:t(()=>[e(b,null,{default:t(()=>[e(p,null,{default:t(()=>[e(u,{class:"text-caption"},{default:t(()=>[c("div",null,s(r.$t("Guest"))+" : "+s(o.order_table_data.guest_number),1),c("div",null,s(r.$t("Room Name"))+" : "+s(o.order_table_data.room_name),1),c("div",null,s(r.$t("Table Name"))+" : "+s(o.order_table_data.table_name),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["label"])]),_:1})):g("",!0),o.order_info.points_to_earn>0?(i(),m(b,{key:2,class:"qlist-no-padding border-grey-top"},{default:t(()=>[e(P,{"expand-separator":"",label:r.$t("Loyalty Points"),caption:o.order_info.points_label2,class:"expansion-q-pl-none"},null,8,["label","caption"])]),_:1})):g("",!0),o.order_info.order_type=="delivery"?(i(),m(b,{key:3,class:"qlist-no-padding border-grey-top"},{default:t(()=>[e(P,{"expand-separator":"",label:r.$t("Delivery information"),class:"expansion-q-pl-none"},{default:t(()=>[e(b,null,{default:t(()=>[e(p,null,{default:t(()=>[e(u,null,{default:t(()=>[e(f,{caption:"",class:"font13"},{default:t(()=>[n(s(o.order_info.customer_name),1)]),_:1}),e(f,{caption:"",class:"font13"},{default:t(()=>[n(s(o.order_info.contact_number),1)]),_:1}),e(f,{caption:"",class:"font13"},{default:t(()=>[c("div",null,s(o.order_info.delivery_address),1),c("div",null,s(o.order_info.delivery_instructions),1),o.map_direction?(i(),m(D,{key:0,flat:"",color:"blue","no-caps":"",size:"md",class:"q-pa-none full-width",href:o.map_direction,target:"_blank"},{default:t(()=>[n(s(r.$t("Get direction")),1)]),_:1},8,["href"])):g("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["label"])]),_:1})):g("",!0),o.order_info.order_type=="delivery"?(i(),m(b,{key:4,class:"qlist-no-padding border-grey-top"},{default:t(()=>[e(P,{"expand-separator":"",label:r.$t("Driver"),caption:y.showAssign?o.driver_data.driver_name:"",class:"expansion-q-pl-none"},{default:t(()=>[e(b,null,{default:t(()=>[e(p,null,{default:t(()=>[y.showAssign||y.canReassign?(i(),d(h,{key:0},[y.hasDriver?(i(),d(h,{key:0},[e(u,{avatar:""},{default:t(()=>[e(R,{src:o.driver_data.photo_url,lazy:"",fit:"cover",style:{height:"50px",width:"50px"},class:"rounded-borders"},null,8,["src"])]),_:1}),e(u,null,{default:t(()=>[e(f,{caption:"",class:"font13"},{default:t(()=>[c("div",null,s(o.driver_data.driver_name),1),c("div",null,s(o.driver_data.phone_number),1),c("div",null,s(o.driver_data.email_address),1)]),_:1})]),_:1})],64)):(i(),d(h,{key:1},[o.order_info.can_reassign_driver?(i(),m(D,{key:0,to:{path:"driver/assign",query:{order_uuid:this.order_uuid}},flat:"",color:"blue","no-caps":"",size:"md",class:"q-pa-none full-width"},{default:t(()=>[n(s(r.$t("Assign Driver")),1)]),_:1},8,["to"])):(i(),d("p",Oe,s(r.$t("No assign driver to this order")),1))],64))],64)):g("",!0)]),_:1}),y.hasDriver&&y.canReassign?(i(),m(p,{key:0},{default:t(()=>[e(D,{to:{path:"driver/assign",query:{order_uuid:this.order_uuid}},flat:"",color:"blue","no-caps":"",size:"md",class:"q-pa-none full-width"},{default:t(()=>[n(s(r.$t("Regassign Driver")),1)]),_:1},8,["to"])]),_:1})):g("",!0)]),_:1})]),_:1},8,["label","caption"])]),_:1})):g("",!0),o.credit_card_details?(i(),m(b,{key:5,class:"qlist-no-padding border-grey-top"},{default:t(()=>[e(P,{"expand-separator":"",label:r.$t("Credit card details")},{default:t(()=>[e(p,null,{default:t(()=>[e(u,null,{default:t(()=>[(i(!0),d(h,null,v(o.credit_card_details,(l,k)=>(i(),m(f,{key:l,caption:"",class:"font12"},{default:t(()=>[n(s(k)+" : "+s(l),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["label"])]),_:1})):g("",!0),y.hasRefund?(i(),m(b,{key:6,class:"qlist-no-padding border-grey-top"},{default:t(()=>[e(P,{"expand-separator":"",label:r.$t("Refund Issued")},{default:t(()=>[e(b,null,{default:t(()=>[e(p,null,{default:t(()=>[e(u,null,{default:t(()=>[(i(!0),d(h,null,v(o.refund_transaction,l=>(i(),d(h,{key:l},[e(f,{caption:"",class:"font12"},{default:t(()=>[n(s(r.$t("Description"))+": "+s(l.description),1)]),_:2},1024),e(f,{caption:"",class:"font12"},{default:t(()=>[n(s(r.$t("Amount"))+": "+s(l.trans_amount),1)]),_:2},1024),e(f,{caption:"",class:"font12"},{default:t(()=>[n(s(r.$t("Issued to"))+": "+s(l.used_card),1)]),_:2},1024),e(f,{caption:"",class:"font12"},{default:t(()=>[n(s(r.$t("Date issued"))+": "+s(l.date),1)]),_:2},1024)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["label"])]),_:1})):g("",!0),e(U,{flat:"",class:"radius8"},{default:t(()=>[e(b,{class:"q-pb-md"},{default:t(()=>[e(p,null,{default:t(()=>[e(u,null,{default:t(()=>[e(f,{lines:"1",class:"text-weight-medium text-grey font13"},{default:t(()=>[c("div",null,s(r.$t("Order Details")),1)]),_:1})]),_:1})]),_:1}),(i(!0),d(h,null,v(o.order_items,l=>(i(),d(h,{key:l.item_id},[e(p,null,{default:t(()=>[e(u,{avatar:"",top:""},{default:t(()=>[e(R,{src:l.url_image,lazy:"",fit:"cover",style:{height:"50px",width:"50px"},class:"rounded-borders"},null,8,["src"])]),_:2},1024),e(u,{top:""},{default:t(()=>[e(f,{class:"text-weight-bold q-mb-xs font12"},{default:t(()=>[c("p",Pe,[n(s(l.qty)+" x ",1),c("span",{innerHTML:l.item_name},null,8,xe),l.price.size_name!=""?(i(),d(h,{key:0},[n(" ("+s(l.price.size_name)+") ",1)],64)):g("",!0),l.item_changes=="replacement"?(i(),d(h,{key:1},[c("div",Te,s(r.$t("Replace"))+' "'+s(l.item_name_replace)+'" ',1),e(ae,{color:"primary","text-color":"white",label:r.$t("Replacement")},null,8,["label"])],64)):g("",!0)])]),_:2},1024),e(f,{caption:"",class:"text-weight-medium font12"},{default:t(()=>[l.price.discount>0?(i(),d("p",Le,[c("del",null,s(l.price.pretty_price),1),n(" "+s(l.price.pretty_price_after_discount),1)])):(i(),d("p",Ae,s(l.price.pretty_price),1)),c("div",{class:"text-weight-bold font12 text-dark",innerHTML:l.category_name},null,8,Be),l.special_instructions!=""?(i(),d("p",Qe,s(l.special_instructions),1)):g("",!0),l.attributes!=""?(i(!0),d(h,{key:3},v(l.attributes,k=>(i(),d("p",{key:k,class:"no-margin"},[(i(!0),d(h,null,v(k,(O,G)=>(i(),d(h,null,[n(s(O),1),G<k.length-1?(i(),d(h,{key:0},[n(", ")],64)):g("",!0)],64))),256))]))),128)):g("",!0)]),_:2},1024)]),_:2},1024),e(u,{side:"",top:""},{default:t(()=>[e(f,{caption:"",class:"text-weight-bold font12"},{default:t(()=>[l.price.discount<=0?(i(),d("p",Se,s(l.price.pretty_total),1)):(i(),d("p",$e,s(l.price.pretty_total_after_discount),1))]),_:2},1024)]),_:2},1024)]),_:2},1024),e(p,{class:"q-item-small"},{default:t(()=>[e(u,{avatar:""}),e(u,null,{default:t(()=>[e(f,{class:"text-weight-bold font12"},{default:t(()=>[n(s(r.$t("If sold out")),1)]),_:1}),e(f,{caption:""},{default:t(()=>[n(s(l.if_sold_out),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),(i(!0),d(h,null,v(l.addons,k=>(i(),d(h,{key:k},[e(p,{class:"q-item-small"},{default:t(()=>[e(u,{avatar:""}),e(u,null,{default:t(()=>[e(f,{class:"text-weight-bold font12"},{default:t(()=>[n(s(k.subcategory_name),1)]),_:2},1024)]),_:2},1024),e(u,{side:"",top:""})]),_:2},1024),(i(!0),d(h,null,v(k.addon_items,O=>(i(),m(p,{key:O,class:"q-item-small"},{default:t(()=>[e(u,{avatar:""}),e(u,{top:""},{default:t(()=>[e(f,{lines:"1",class:"font12 text-weight-medium"},{default:t(()=>[n(s(O.qty)+" x "+s(O.pretty_price)+" "+s(O.sub_item_name),1)]),_:2},1024)]),_:2},1024),e(u,{side:"",top:""},{default:t(()=>[c("p",Ee,s(O.pretty_addons_total),1)]),_:2},1024)]),_:2},1024))),128))],64))),128)),e(Q,{inset:""})],64))),128)),e(p,{class:"q-pb-none",style:{"min-height":"auto"}},{default:t(()=>[e(u,{class:"text-weight-medium font13"},{default:t(()=>[n(s(r.$t("Summary")),1)]),_:1})]),_:1}),(i(!0),d(h,null,v(o.order_summary,l=>(i(),d(h,{key:l.name},[l.type=="total"?(i(),d(h,{key:0},[e(Q,{spaced:"",inset:""}),e(p,{dense:"",class:"q-pb-none",style:{"min-height":"auto"}},{default:t(()=>[e(u,{class:"font13 text-weight-medium"},{default:t(()=>[n(s(l.name),1)]),_:2},1024),e(u,{side:"",class:"font13 text-weight-medium"},{default:t(()=>[n(s(l.value),1)]),_:2},1024)]),_:2},1024)],64)):(i(),m(p,{key:1,dense:"",class:"q-pb-none",style:{"min-height":"auto"}},{default:t(()=>[e(u,{class:"font13 text-weight-medium"},{default:t(()=>[n(s(l.name),1)]),_:2},1024),e(u,{side:"",class:"font13 text-weight-medium"},{default:t(()=>[n(s(l.value),1)]),_:2},1024)]),_:2},1024))],64))),128))]),_:1})]),_:1})],64)):(i(),d("div",_e,[c("div",ue,s(r.$t("No available data")),1),c("p",ce,s(r.$t("Sorry we cannot load what your looking for"))+". ",1)]))]),_:1},8,["class"]),e(I,{ref:"OrderDeliveryDetails",data:o.delivery_timeline,order_status:o.order_delivery_status,progress:o.data_progress},null,8,["data","order_status","progress"]),o.loading?g("",!0):(i(),m(ie,{key:0,class:A(["q-gutter-sm q-pl-md q-pr-md q-pb-sm",{row:o.buttons.length<=2,column:o.buttons.length>2,"bg-mydark text-white":r.$q.dark.mode,"bg-white text-black":!r.$q.dark.mode}])},{default:t(()=>[(i(!0),d(h,null,v(o.buttons,l=>(i(),d("div",{key:l,class:"col"},[o.order_info.status.toLowerCase().trim()!=l.button_name.toLowerCase().trim()?(i(),m(D,{key:0,unelevated:"","no-caps":"",class:"radius8 fit",size:"lg",color:y.changeColor(l.class_name),"text-color":y.changeTextColor(l.class_name),label:l.button_name,onClick:k=>y.doActions(l)},null,8,["color","text-color","label","onClick"])):g("",!0)]))),128))]),_:1},8,["class"])),e(z,{ref:"rejection",onAfterAddreason:y.afterAddreason},null,8,["onAfterAddreason"]),e(V,{ref:"delay_order",onAfterSelect:y.afterSelect},null,8,["onAfterSelect"]),e(j,{ref:"contact_phone",data:o.order_info},null,8,["data"]),e(H,{ref:"printer",onAfterSelectprinter:y.afterSelectprinter},null,8,["onAfterSelectprinter"]),e(N,{ref:"payment_history",order_uuid:o.order_uuid},null,8,["order_uuid"]),e(F,{ref:"cancel_order",onAfterAddreason:y.afterCancel},null,8,["onAfterAddreason"]),e(M,{ref:"print_preview",printer_details:o.printer_details,order_info:o.order_info,merchant:o.merchant,order_items:o.order_items,order_summary:o.order_summary,order_services:o.order_services},null,8,["printer_details","order_info","merchant","order_items","order_summary","order_services"])]),_:1},8,["onRefresh"])}var nt=Y(de,[["render",Re]]);export{nt as default};
