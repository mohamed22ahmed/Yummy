import{_ as B,ay as y,A as S,u as M,m as q,n as o,a0 as m,d as s,q as a,$ as V,F as p,a2 as D,X as h,Y as i,Z as U,p as u,ap as d,at as A,as as g,a1 as v,az as k,a3 as L,a4 as R,a5 as f,a7 as z,a8 as w,aA as C}from"./index.f6661a24.js";import{Q as F}from"./QToolbarTitle.0f4dda99.js";import{Q as N}from"./QToolbar.7bb603c7.js";import{Q as O}from"./QHeader.ba9c2ff9.js";import{Q}from"./QSpace.7af5fd36.js";import{Q as H}from"./QSelect.4e3956e1.js";import{Q as b}from"./QItemLabel.0d3c2221.js";import{Q as I}from"./QList.16ddb51a.js";import{Q as j}from"./QFooter.4f4f9530.js";import{Q as G}from"./QForm.4e86ee71.js";import{Q as X}from"./QPage.78315ab4.js";import"./QResizeObserver.dc10e4c2.js";import"./QChip.5b52e54d.js";import"./QMenu.c4f03f28.js";import"./selection.ef67fb9c.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";const Y={name:"SignupPage",data(){return{restaurant_name:"",loading:!1,membership_type:"1",address:"",contact_email:"",phone:[],latitude:"",lontitude:"",services:[],currency:""}},components:{ListLoading:y(()=>k(()=>import("./ListLoading.7df1573a.js"),["assets/ListLoading.7df1573a.js","assets/index.f6661a24.js","assets/index.1593f83d.css"])),SearchAddress:y(()=>k(()=>import("./SearchAddress.3f590a05.js"),["assets/SearchAddress.3f590a05.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QItemLabel.0d3c2221.js","assets/QSelect.4e3956e1.js","assets/QChip.5b52e54d.js","assets/QMenu.c4f03f28.js","assets/selection.ef67fb9c.js","assets/rtl.276c3f1b.js","assets/format.de7e9769.js"])),MobilePhone:y(()=>k(()=>import("./MobilePhone.f313bcda.js"),["assets/MobilePhone.f313bcda.js","assets/QImg.b7890c8b.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QItemLabel.0d3c2221.js","assets/QSelect.4e3956e1.js","assets/QChip.5b52e54d.js","assets/QMenu.c4f03f28.js","assets/selection.ef67fb9c.js","assets/rtl.276c3f1b.js","assets/format.de7e9769.js"]))},computed:{hasData(){return!S.empty(this.DataStore.registration_settings)&&Object.keys(this.DataStore.registration_settings).length>0}},setup(){return{DataStore:M()}},methods:{afterSelectaddress(e){this.address=e.address.formatted_address,this.latitude=e.latitude,this.lontitude=e.longitude},afterInput(e){this.phone=e},onSubmit(){this.loading=!0,S.fetchData("CreateAccountMerchant",{address:this.address,contact_email:this.contact_email,membership_type:this.membership_type,phone:this.phone,restaurant_name:this.restaurant_name,latitude:this.latitude,lontitude:this.lontitude,services:this.services,currency:this.currency}).then(e=>{this.$router.push({path:"/signup/create-user",query:{uuid:e.details.merchant_uuid}})}).catch(e=>{S.notify("dark",e,"error",this.$q)}).then(e=>{this.loading=!1})}}},Z={class:"q-pl-md q-pr-md"},J={class:"text-weight-bold no-margin"},K={class:"text-weight-light q-ma-none"},W={key:0,class:"q-pl-md q-pr-md"},$={class:"text-subtitle2"},x={class:"q-pl-md q-pr-md"},ee={class:"no-margin"},te={key:2,class:"q-pl-md q-pr-md q-mb-md"},se={class:"text-subtitle2 q-pb-sm"},ae={class:"text-subtitle2 q-pl-md q-pr-md q-pb-sm"},re={class:"q-pl-md q-pr-md"},oe={class:"font11"},le=["innerHTML"];function ie(e,l,ne,n,r,_){const T=q("ListLoading"),P=q("SearchAddress"),E=q("MobilePhone");return o(),m(p,null,[s(O,{class:V({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:a(()=>[s(N,null,{default:a(()=>[s(D,{onClick:l[0]||(l[0]=t=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),s(F,{class:"text-weight-bold"},{default:a(()=>[h(i(e.$t("Signup")),1)]),_:1})]),_:1}),s(U)]),_:1},8,["class"]),s(X,{class:"q-pt-md"},{default:a(()=>[n.DataStore.loading?(o(),u(T,{key:0})):(o(),u(G,{key:1,onSubmit:_.onSubmit},{default:a(()=>[d("div",Z,[d("h6",J,i(e.$t("Become Restaurant partner")),1),d("p",K,i(e.$t("Get a sales boost of up to 30% from takeaways")),1),s(Q,{class:"q-pa-sm"}),s(A,{modelValue:r.restaurant_name,"onUpdate:modelValue":l[1]||(l[1]=t=>r.restaurant_name=t),label:e.$t("Store name"),outlined:"","stack-label":"",color:"grey-5","lazy-rules":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),s(P,{ref:"search_address",onAfterSelectaddress:_.afterSelectaddress,placeholder:e.$t("Store address")},null,8,["onAfterSelectaddress","placeholder"]),s(Q,{class:"q-pa-sm"}),s(A,{modelValue:r.contact_email,"onUpdate:modelValue":l[2]||(l[2]=t=>r.contact_email=t),label:e.$t("Email address"),outlined:"","stack-label":"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),s(E,{ref:"mobile_phone",onAfterInput:_.afterInput},null,8,["onAfterInput"])]),n.DataStore.getRegistrationSettings.multicurrency_enabled?(o(),m("div",W,[d("div",$,i(e.$t("Select your currency")),1),s(H,{modelValue:r.currency,"onUpdate:modelValue":l[3]||(l[3]=t=>r.currency=t),label:e.$t("Currency"),options:n.DataStore.getRegistrationSettings.currency_list,"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","options","rules"])])):g("",!0),d("div",x,[d("p",ee,i(e.$t("Choose your membership program")),1)]),_.hasData?(o(),u(I,{key:1,dense:"",class:"q-mb-sm"},{default:a(()=>[(o(!0),m(p,null,v(n.DataStore.registration_settings.membership_list,t=>(o(),m(p,{key:t},[n.DataStore.registration_settings.registration_program.includes(t.type_id)?L((o(),u(R,{key:0,tag:"label"},{default:a(()=>[s(f,{avatar:""},{default:a(()=>[s(z,{modelValue:r.membership_type,"onUpdate:modelValue":l[4]||(l[4]=c=>r.membership_type=c),val:t.type_id,color:"secondary"},null,8,["modelValue","val"])]),_:2},1024),s(f,null,{default:a(()=>[s(b,null,{default:a(()=>[h(i(t.type_name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[w]]):g("",!0)],64))),128))]),_:1})):g("",!0),r.membership_type==1?(o(),m("div",te,[d("div",se,i(e.$t("Choose your services")),1),(o(!0),m(p,null,v(n.DataStore.getRegistrationSettings.services_list,t=>(o(),u(C,{key:t,modelValue:r.services,"onUpdate:modelValue":l[5]||(l[5]=c=>r.services=c),val:t.service_code,label:t.service_name,color:"primary"},null,8,["modelValue","val","label"]))),128))])):(o(),m(p,{key:3},[d("div",ae,i(e.$t("Choose your services")),1),s(I,{dense:""},{default:a(()=>[(o(!0),m(p,null,v(n.DataStore.getRegistrationSettings.services_list,t=>L((o(),u(R,{key:t,tag:"label",class:"q-mb-sm"},{default:a(()=>[s(f,{avatar:"",top:""},{default:a(()=>[s(C,{modelValue:r.services,"onUpdate:modelValue":l[6]||(l[6]=c=>r.services=c),val:t.service_code,color:"primary"},null,8,["modelValue","val"])]),_:2},1024),s(f,{top:""},{default:a(()=>[s(b,null,{default:a(()=>[h(i(t.service_name),1)]),_:2},1024),s(b,{caption:""},{default:a(()=>[h(i(e.$t(t.description,{site_name:n.DataStore.getRegistrationSettings.site_name,transaction_type:t.service_name})),1)]),_:2},1024),n.DataStore.getRegistrationSettings.membership_commission[r.membership_type]?(o(),u(b,{key:0,caption:""},{default:a(()=>[h(i(n.DataStore.getRegistrationSettings.membership_commission[r.membership_type][t.service_code].commission)+"% "+i(e.$t("fee per order")),1)]),_:2},1024)):g("",!0)]),_:2},1024)]),_:2},1024)),[[w]])),128))]),_:1}),s(Q,{class:"q-pa-sm"})],64)),d("div",re,[d("p",oe,[d("span",{innerHTML:n.DataStore.registration_settings.terms},null,8,le)])]),s(j,{class:V(["q-pa-md",{"bg-mydark ":e.$q.dark.mode,"bg-white ":!e.$q.dark.mode}])},{default:a(()=>[s(D,{type:"submit",color:"primary","text-color":"white",label:e.$t("Submit"),unelevated:"",class:"full-width",size:"lg","no-caps":"",loading:r.loading},null,8,["label","loading"])]),_:1},8,["class"])]),_:1},8,["onSubmit"]))]),_:1})],64)}var De=B(Y,[["render",ie]]);export{De as default};
