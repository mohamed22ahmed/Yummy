import{_ as q,A as l,n as r,a0 as o,d as s,q as u,$ as b,F as n,a2 as k,X as c,Y as h,Z as P,p,as as y,ar as V,a1 as v,b7 as w,ap as S,at as D}from"./index.f6661a24.js";import{Q as B}from"./QToolbarTitle.0f4dda99.js";import{Q as $}from"./QToolbar.7bb603c7.js";import{Q as T}from"./QHeader.ba9c2ff9.js";import{Q as j}from"./QInnerLoading.c6ed50f8.js";import{Q as g}from"./QSpace.7af5fd36.js";import{Q as _}from"./QSelect.4e3956e1.js";import{Q as C}from"./QFooter.4f4f9530.js";import{Q as I}from"./QForm.4e86ee71.js";import{Q as U}from"./QPage.78315ab4.js";import{u as A}from"./DriverStore.21c2c9f6.js";import"./QResizeObserver.dc10e4c2.js";import"./QChip.5b52e54d.js";import"./QItemLabel.0d3c2221.js";import"./QMenu.c4f03f28.js";import"./selection.ef67fb9c.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";const E={name:"PaymentManage",data(){return{id:"",data:[],loading:!1,status:"active",payment_id:"",status_list:[{value:"active",label:this.$t("Active")},{value:"inactive",label:this.$t("Inactive")}],is_live:!0,attr_json:[],field_data:{},instructions:[]}},setup(e){return{DriverStore:A()}},created(){this.DriverStore.PaymentProviderByMerchant()},mounted(){this.id=this.$route.query.id,l.empty(this.id)||this.getData()},computed:{isEdit(){return!l.empty(this.id)},hasData(){return Object.keys(this.data).length>0},CheckData(){return!l.empty(this.id)&&Object.keys(this.data).length<=0},hasJson(){return Object.keys(this.attr_json).length>0},hasInstructions(){return Object.keys(this.instructions).length>0}},methods:{getData(){this.loading=!0,l.fetchDataByTokenPost("getPayment","id="+this.id).then(e=>{this.data=e.details,this.status=e.details.status,this.attr_json=e.details.attr_json,this.is_live=e.details.is_live,this.field_data=e.details.field_value,this.instructions=e.details.instructions}).catch(e=>{l.notify("red-5",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})},afterInput(e){this.phone=e},formSubmit(){let e={id:this.id,payment_id:this.payment_id,status:this.status,is_live:this.is_live,field_data:this.field_data};l.showLoadingBox("",this.$q),l.fetchDataByTokenPost(l.empty(this.id)?"AddPayment":"UpdatePayment",e).then(a=>{l.notify("light-green",a.msg,"check_circle",this.$q),this.$router.replace({path:"/payment/payment_list"})}).catch(a=>{l.notify("red-5",a,"error_outline",this.$q)}).then(a=>{l.hideLoadingBox(this.$q)})},setValue(e,a){this.field_data[a]=e}}},F={class:"text-subtitle1 text-weight-medium"};function L(e,a,M,Q,i,d){return r(),o(n,null,[s(T,{class:b({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:u(()=>[s($,null,{default:u(()=>[s(k,{onClick:a[0]||(a[0]=t=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),s(B,{class:"text-weight-bold"},{default:u(()=>[d.isEdit?(r(),o(n,{key:0},[c(h(e.$t("Update Payment")),1)],64)):(r(),o(n,{key:1},[c(h(e.$t("Add Payment")),1)],64))]),_:1})]),_:1}),s(P)]),_:1},8,["class"]),s(U,{class:b([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode},"q-pl-md q-pr-md"])},{default:u(()=>[i.loading?(r(),p(j,{key:0,showing:!0,color:"primary",size:"md"})):(r(),p(I,{key:1,onSubmit:d.formSubmit},{default:u(()=>[s(g,{class:"q-pa-sm"}),d.isEdit?y("",!0):(r(),p(_,{key:0,modelValue:i.payment_id,"onUpdate:modelValue":a[1]||(a[1]=t=>i.payment_id=t),options:Q.DriverStore.getPaymentProviderByMerchant,label:e.$t("Payment"),"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5",rules:[t=>t&&t>0||this.$t("This field is required")],"emit-value":"","map-options":""},null,8,["modelValue","options","label","rules"])),d.hasJson?(r(),o(n,{key:1},[s(V,{modelValue:i.is_live,"onUpdate:modelValue":a[2]||(a[2]=t=>i.is_live=t),label:e.$t("Production")},null,8,["modelValue","label"]),s(g,{class:"q-pa-sm"}),(r(!0),o(n,null,v(i.data.attr_json,(t,f)=>(r(),p(D,{key:t,"model-value":i.field_data[f]?i.field_data[f]:"",label:t.label,"stack-label":"",outlined:"",color:"grey-5",rules:[m=>m&&m.length>0||this.$t("This field is required")],"onUpdate:modelValue":m=>d.setValue(m,f),autogrow:t.field_type=="textarea"},null,8,["model-value","label","rules","onUpdate:modelValue","autogrow"]))),128)),d.hasInstructions?(r(),o(n,{key:0},[s(w,{class:"q-pa-sm shadow-1"},{default:u(()=>[S("div",F,h(e.$t("Webhooks")),1),(r(!0),o(n,null,v(i.instructions,t=>(r(),o(n,{key:t},[c(h(t),1)],64))),128))]),_:1}),s(g,{class:"q-pa-sm"})],64)):y("",!0)],64)):y("",!0),s(_,{modelValue:i.status,"onUpdate:modelValue":a[3]||(a[3]=t=>i.status=t),options:i.status_list,label:e.$t("Status"),"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")],"emit-value":"","map-options":""},null,8,["modelValue","options","label","rules"]),s(C,null,{default:u(()=>[s(k,{type:"submit",color:"primary","text-color":"white",label:e.$t("Save"),unelevated:"",class:"full-width radius8",size:"lg","no-caps":"",disable:d.CheckData},null,8,["label","disable"])]),_:1})]),_:1},8,["onSubmit"]))]),_:1},8,["class"])],64)}var re=q(E,[["render",L]]);export{re as default};
