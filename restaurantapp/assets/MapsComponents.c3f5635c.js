import{_ as p,A as i,n as y,a0 as m}from"./index.f6661a24.js";import{l as n}from"./index.4f152a18.js";const a=[];let r=[];const c={name:"MapsComponents",props:["keys","provider","zoom","center","markers","size"],data(){return{cmaps:void 0,data:[],loading:!1,map_style:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#686868"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{lightness:"-22"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{saturation:"11"},{lightness:"-51"}]},{featureType:"road.highway",elementType:"labels.text",stylers:[{saturation:"3"},{lightness:"-56"},{weight:"2.20"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{lightness:"-52"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{weight:"6.13"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{lightness:"-10"},{gamma:"0.94"},{weight:"1.24"},{saturation:"-100"},{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{lightness:"-16"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{saturation:"-41"},{lightness:"-41"}]},{featureType:"road.arterial",elementType:"labels.text.stroke",stylers:[{weight:"5.46"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{weight:"0.72"},{lightness:"-16"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{lightness:"-37"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#b7e4f4"},{visibility:"on"}]}],map_style_dark:[{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{color:"#000000"},{lightness:13}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#144b53"},{lightness:14},{weight:1.4}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#08304b"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#0c4152"},{lightness:5}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#0b434f"},{lightness:25}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#000000"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#0b3d51"},{lightness:16}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"transit",elementType:"all",stylers:[{color:"#146474"}]},{featureType:"water",elementType:"all",stylers:[{color:"#021019"}]}]}},mounted(){this.loadMap()},watch:{markers(e,t){this.renderMap()},provider(e,t){this.loadMap()}},methods:{loadMap(){try{switch(this.provider){case"google.maps":n("https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&key="+this.keys+"&callback=Function.prototype").then(()=>{this.renderMap()}).catch(()=>{console.debug("failed loading map script")});break;case"mapbox":n("https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.js").then(()=>{this.renderMap()}).catch(()=>{console.debug("failed loading mapboxscript")});break}}catch(e){console.error(e)}},renderMap(){try{switch(this.provider){case"google.maps":r=new window.google.maps.LatLngBounds,typeof this.cmaps!="undefined"&&this.cmaps!==null?Object.entries(this.markers).forEach(([e,t])=>{this.removeMarker(t.id)}):this.cmaps=new window.google.maps.Map(this.$refs.cmaps,{center:{lat:parseFloat(this.center.lat),lng:parseFloat(this.center.lng)},zoom:parseInt(this.zoom),disableDefaultUI:!0,styles:this.$q.dark.mode?this.map_style_dark:this.map_style}),Object.entries(this.markers).forEach(([e,t])=>{this.addMarker({position:{lat:parseFloat(t.lat),lng:parseFloat(t.lng)},map:this.cmaps,draggable:t.draggable,label:t.label},t.id,t.draggable)}),Object.keys(this.markers).length>1?this.FitBounds():this.setCenter(this.markers[0].lat,this.markers[0].lng);break;case"mapbox":mapboxgl.accessToken=this.keys,r=new mapboxgl.LngLatBounds,this.cmaps=new mapboxgl.Map({container:this.$refs.cmaps,style:"mapbox://styles/mapbox/streets-v12",center:[parseFloat(this.center.lng),parseFloat(this.center.lat)],zoom:14}),Object.entries(this.markers).forEach(([e,t])=>{this.addMarker({position:{lat:parseFloat(t.lat),lng:parseFloat(t.lng)},map:this.cmaps,animation:null,draggable:t.draggable,icon:t.icon},t.id,t.draggable)}),Object.keys(this.markers).length>1?this.FitBounds():this.setCenter(this.markers[0].lat,this.markers[0].lng);break}}catch(e){console.error(e)}},addMarker(e,t,o){try{switch(this.provider){case"google.maps":a[t]=new window.google.maps.Marker(e),this.cmaps.panTo(new window.google.maps.LatLng(e.position.lat,e.position.lng)),r.extend(a[t].position),o===!0&&(window.google.maps.event.addListener(a[t],"drag",s=>{this.$emit("dragMarker",!0)}),window.google.maps.event.addListener(a[t],"dragend",s=>{const l=s.latLng;this.$emit("afterSelectmap",l.lat(),l.lng())}));break;case"mapbox":if(i.empty(e.icon))a[t]=new mapboxgl.Marker(e).setLngLat([e.position.lng,e.position.lat]).addTo(this.cmaps);else{const s=document.createElement("div");s.className=e.icon,a[t]=new mapboxgl.Marker(s).setLngLat([e.position.lng,e.position.lat]).addTo(this.cmaps)}r.extend(new mapboxgl.LngLat(e.position.lng,e.position.lat)),o===!0&&a[t].on("dragend",s=>{const l=a[t].getLngLat();this.$emit("afterSelectmap",l.lat,l.lng)}),this.mapBoxResize();break}}catch(s){console.error(s)}},mapBoxResize(){this.provider=="mapbox"&&setTimeout(()=>{this.cmaps.resize()},500)},removeMarker(e){try{switch(this.provider){case"google.maps":typeof a[e]!="undefined"&&a[e]!==null&&(a[e].setMap(null),a.splice(e,1));break}}catch(t){console.error(t)}},centerMap(){this.FitBounds()},FitBounds(){try{switch(this.provider){case"google.maps":i.empty(r)||this.cmaps.fitBounds(r);break;case"mapbox":i.empty(r)||this.cmaps.fitBounds(r,{duration:0,padding:50});break}}catch(e){console.error(e)}},setCenter(e,t){try{switch(this.provider){case"google.maps":this.cmaps.setCenter(new window.google.maps.LatLng(e,t));break;case"mapbox":this.cmaps.flyTo({center:[t,e],essential:!0});break}}catch(o){console.error(o)}}}},g={ref:"cmaps",class:"map bg-grey-1"};function h(e,t,o,s,l,d){return y(),m("div",g,null,512)}var b=p(c,[["render",h]]);export{b as default};
