import{_ as q,u as v,A as d,n as r,p as n,q as a,d as l,a2 as _,a0 as h,X as f,Y as g,F as c,Z as V,$ as b,ap as S,ar as y,at as Q,as as k}from"./index.f6661a24.js";import{Q as w}from"./QToolbarTitle.0f4dda99.js";import{Q as A}from"./QToolbar.7bb603c7.js";import{Q as T}from"./QHeader.ba9c2ff9.js";import{Q as z}from"./QInnerLoading.c6ed50f8.js";import{Q as u}from"./QSelect.4e3956e1.js";import{Q as I}from"./QFooter.4f4f9530.js";import{Q as M}from"./QForm.4e86ee71.js";import{Q as B}from"./QPage.78315ab4.js";import{Q as C}from"./QPullToRefresh.a19885b1.js";import{u as D}from"./MenuStore.420c66e5.js";import"./QResizeObserver.dc10e4c2.js";import"./QChip.5b52e54d.js";import"./QItemLabel.0d3c2221.js";import"./QMenu.c4f03f28.js";import"./selection.ef67fb9c.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./TouchPan.ca911d69.js";import"./touch.9135741d.js";const P={name:"ItemAddonAdd",data(){return{id:"",item_uuid:"",loading:!1,loading_get:!1,require_addon:!1,pre_selected:!1,item_size_id:"",subcat_id:"",multi_option:"one",multi_option_value:0,multi_option_value_selection:""}},setup(t){const e=D(),p=v();return{MenuStore:e,DataStore:p}},computed:{isEdit(){return this.id>0}},created(){this.item_uuid=this.$route.query.item_uuid,this.id=this.$route.query.id,this.MenuStore.getAddonCategoryList(),this.MenuStore.getPriceList(this.item_uuid),this.id>0&&this.getAddonItem()},methods:{refresh(t){this.id>0?this.getAddonItem(t):t()},getAddonItem(t){this.loading_get=!0,d.fetchDataByToken("getItemAddon",{id:this.id,item_uuid:this.item_uuid}).then(e=>{this.item_size_id=e.details.item_size_id,this.subcat_id=e.details.subcat_id,this.multi_option=e.details.multi_option,this.multi_option_value=e.details.multi_option_value,this.multi_option_value_selection=e.details.multi_option_value,this.require_addon=e.details.require_addon,this.pre_selected=e.details.pre_selected}).catch(e=>{d.notify("dark",e,"error",this.$q)}).then(e=>{this.loading_get=!1,d.empty(t)||t()})},onSubmit(){this.loading=!0,d.fetchDataByToken("itemAddonCreate",{id:this.id,item_uuid:this.item_uuid,item_size_id:this.item_size_id,subcat_id:this.subcat_id,multi_option_value:this.multi_option_value,multi_option:this.multi_option,multi_option_value_selection:this.multi_option_value_selection,pre_selected:this.pre_selected,require_addon:this.require_addon}).then(t=>{d.notify("light-green",t.msg,"check_circle",this.$q),this.$router.replace({path:"/item/addonlist",query:{item_uuid:this.item_uuid}})}).catch(t=>{d.notify("dark",t,"error",this.$q)}).then(t=>{this.loading=!1})}}},U={class:"q-pa-md q-gutter-md"};function E(t,e,p,s,o,m){return r(),n(C,{onRefresh:m.refresh},{default:a(()=>[l(T,{class:b({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode})},{default:a(()=>[l(A,null,{default:a(()=>[l(_,{onClick:e[0]||(e[0]=i=>t.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:t.$q.dark.mode?"white":"dark"},null,8,["color"]),l(w,{class:"text-weight-bold"},{default:a(()=>[m.isEdit?(r(),h(c,{key:0},[f(g(t.$t("Edit Addon")),1)],64)):(r(),h(c,{key:1},[f(g(t.$t("Add Addon")),1)],64))]),_:1})]),_:1}),l(V)]),_:1},8,["class"]),l(B,null,{default:a(()=>[o.loading_get?(r(),n(z,{key:0,showing:!0,color:"primary",size:"md"})):(r(),n(M,{key:1,onSubmit:m.onSubmit},{default:a(()=>[S("div",U,[l(y,{modelValue:o.require_addon,"onUpdate:modelValue":e[1]||(e[1]=i=>o.require_addon=i),color:"primary",label:t.$t("Required")},null,8,["modelValue","label"]),l(y,{modelValue:o.pre_selected,"onUpdate:modelValue":e[2]||(e[2]=i=>o.pre_selected=i),color:"primary",label:t.$t("Pre-selected")},null,8,["modelValue","label"]),l(u,{outlined:"",modelValue:o.item_size_id,"onUpdate:modelValue":e[3]||(e[3]=i=>o.item_size_id=i),label:t.$t("Select Item Price"),color:"grey-5","stack-label":"",behavior:"dialog","transition-show":"fade","transition-hide":"fade",loading:s.MenuStore.loading_price,options:s.MenuStore.price_data,rules:[i=>i&&i.length>0||this.$t("This field is required")],"emit-value":"","map-options":""},null,8,["modelValue","label","loading","options","rules"]),l(u,{outlined:"",modelValue:o.subcat_id,"onUpdate:modelValue":e[4]||(e[4]=i=>o.subcat_id=i),label:t.$t("Addon Category"),options:s.MenuStore.addon_category_list,color:"grey-5","stack-label":"",behavior:"dialog","transition-show":"fade","transition-hide":"fade",loading:s.MenuStore.loading_addoncategory,"lazy-rules":"",rules:[i=>i&&i.length>0||this.$t("This field is required")],"emit-value":"","map-options":""},null,8,["modelValue","label","options","loading","rules"]),l(u,{outlined:"",modelValue:o.multi_option,"onUpdate:modelValue":e[5]||(e[5]=i=>o.multi_option=i),label:t.$t("Select Type"),color:"grey-5","stack-label":"",behavior:"dialog","transition-show":"fade","transition-hide":"fade",options:s.DataStore.multi_option,"emit-value":"","map-options":""},null,8,["modelValue","label","options"]),o.multi_option=="multiple"||o.multi_option=="custom"?(r(),n(Q,{key:0,type:"number",outlined:"",modelValue:o.multi_option_value,"onUpdate:modelValue":e[6]||(e[6]=i=>o.multi_option_value=i),label:t.$t("Enter how many can select"),"stack-label":"",color:"grey-5","lazy-rules":"",rules:[i=>i>0&&i.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"])):k("",!0),o.multi_option=="two_flavor"?(r(),n(u,{key:1,outlined:"",modelValue:o.multi_option_value_selection,"onUpdate:modelValue":e[7]||(e[7]=i=>o.multi_option_value_selection=i),label:t.$t("Select Two Flavor Properties"),color:"grey-5","stack-label":"",behavior:"dialog","transition-show":"fade","transition-hide":"fade",options:s.DataStore.two_flavor_properties,rules:[i=>i&&i.length>0||this.$t("This field is required")],"emit-value":"","map-options":""},null,8,["modelValue","label","options","rules"])):k("",!0)]),l(I,{class:b(["q-pl-md q-pr-md q-pb-xs",{"bg-mydark ":t.$q.dark.mode,"bg-white ":!t.$q.dark.mode}])},{default:a(()=>[l(_,{type:"submit",color:"primary","text-color":"white",label:t.$t("Save"),unelevated:"",class:"full-width radius8",size:"lg","no-caps":"",loading:o.loading},null,8,["label","loading"])]),_:1},8,["class"])]),_:1},8,["onSubmit"]))]),_:1})]),_:1},8,["onRefresh"])}var le=q(P,[["render",E]]);export{le as default};
