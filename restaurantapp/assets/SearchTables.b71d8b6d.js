import{_ as q,ay as w,u as x,A as b,m as T,n as s,p as u,q as t,d as a,a2 as p,X as d,Y as o,Z as D,$ as k,ap as i,at as C,ac as V,as as m,a0 as n,F as f,a1 as B,az as I,a4 as N,a5 as g}from"./index.f6661a24.js";import{Q as P}from"./QToolbarTitle.0f4dda99.js";import{Q as L}from"./QToolbar.7bb603c7.js";import{Q as A}from"./QHeader.ba9c2ff9.js";import{Q as v}from"./QSpace.7af5fd36.js";import{Q as y}from"./QBadge.04d2c306.js";import{Q as S}from"./QItemLabel.0d3c2221.js";import{Q as R}from"./QList.16ddb51a.js";import{Q as E}from"./QPage.78315ab4.js";import{Q as z}from"./QPullToRefresh.a19885b1.js";import{u as F}from"./SearchStore.94d8f2ae.js";import"./QResizeObserver.dc10e4c2.js";import"./TouchPan.ca911d69.js";import"./touch.9135741d.js";import"./selection.ef67fb9c.js";import"./format.de7e9769.js";const j={name:"SearchTables",components:{TableSkeleton:w(()=>I(()=>import("./TableSkeleton.a40b3052.js"),["assets/TableSkeleton.a40b3052.js","assets/QSkeleton.e9a2b7df.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QItemLabel.0d3c2221.js","assets/QList.16ddb51a.js"]))},setup(){const e=F(),c=x();return{SearchStore:e,DataStore:c}},data(){return{q:"",loading:!1}},created(){this.SearchStore.data=""},computed:{hasSearch(){return!b.empty(this.q)}},methods:{refresh(e){this.clearSearch(),e()},clearSearch(){this.SearchStore.is_submit=!1,this.q="",this.SearchStore.data=[]},doSearch(){this.loading=!0,this.SearchStore.data=[],this.SearchStore.status=[],this.SearchStore.is_submit=!0,b.fetchDataByTokenPost("tableList","q="+this.q).then(e=>{this.SearchStore.data=e.details.data}).catch(e=>{}).then(e=>{this.loading=!1})}}},H={class:"q-pa-md full-width"},O={class:"flex flex-center text-center"},U={class:"radius8 bg-green-10 text-white q-pa-xs text-center q-pl-sm q-pr-sm"},X={class:"font14 text-weight-bold"},Y={key:0,class:"full-width text-center"},Z={key:1,class:"full-width text-center"},$={class:"text-weight-bold"},G={class:"text-weight-light text-grey"};function J(e,c,K,l,h,_){const Q=T("TableSkeleton");return s(),u(z,{onRefresh:_.refresh},{default:t(()=>[a(A,{class:k({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}),reveal:"","reveal-offset":"50"},{default:t(()=>[a(L,null,{default:t(()=>[a(p,{onClick:c[0]||(c[0]=r=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),a(P,{class:"text-weight-bold"},{default:t(()=>[d(o(e.$t("Search Tables")),1)]),_:1})]),_:1}),a(D)]),_:1},8,["class"]),a(E,{class:k([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode},"flex justify-start"])},{default:t(()=>[i("div",H,[a(C,{outlined:"",modelValue:h.q,"onUpdate:modelValue":c[1]||(c[1]=r=>h.q=r),label:e.$t("Search"),color:"grey-5"},{append:t(()=>[l.SearchStore.hasData?(s(),u(V,{key:0,class:"cursor-pointer",name:"close",color:"grey",onClick:_.clearSearch},null,8,["onClick"])):m("",!0),l.SearchStore.hasData?m("",!0):(s(),u(p,{key:1,icon:"search",unelevated:"",color:"dark-grey","no-caps":"",loading:h.loading,round:"",flat:"",onClick:_.doSearch,disable:!_.hasSearch},null,8,["loading","onClick","disable"]))]),_:1},8,["modelValue","label"]),l.SearchStore.hasData?(s(),n(f,{key:0},[a(v,{class:"q-mt-md"}),a(R,{separator:""},{default:t(()=>[(s(!0),n(f,null,B(l.SearchStore.data,r=>(s(),u(N,{key:r,clickable:"",to:{path:"/tables/table_update",query:{id:r.table_uuid}}},{default:t(()=>[a(g,{avatar:"",top:""},{default:t(()=>[i("div",O,[i("div",null,[i("div",U,[i("div",X," #"+o(r.table_id),1)]),a(v,{class:"q-pa-xs"}),a(p,{dense:"",color:`green-12
`,round:"",icon:"las la-user",unelevated:""},{default:t(()=>[a(y,{color:"primary",floating:""},{default:t(()=>[d(o(r.max_covers),1)]),_:2},1024)]),_:2},1024)])])]),_:2},1024),a(g,{top:""},{default:t(()=>[a(S,{class:"text-dark"},{default:t(()=>[d(o(r.table_name)+" ",1),a(y,{color:r.available_raw==1?"green":"amber"},{default:t(()=>[d(o(r.available),1)]),_:2},1032,["color"])]),_:2},1024),a(S,{class:"text-dark"},{default:t(()=>[l.DataStore.table_room_list_raw[r.room_id]?(s(),n(f,{key:0},[d(o(l.DataStore.table_room_list_raw[r.room_id]),1)],64)):(s(),n(f,{key:1},[d(o(e.$t("Not available")),1)],64))]),_:2},1024),a(S,{caption:""},{default:t(()=>[d(o(r.min_covers)+" - "+o(r.max_covers)+" "+o(e.$t("covers")),1)]),_:2},1024),a(S,{caption:"",class:"font12"},{default:t(()=>[d(o(r.date_created),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})],64)):m("",!0),h.loading?(s(),u(Q,{key:1,rows:10})):m("",!0)]),l.SearchStore.is_submit?(s(),n("div",Z,[!l.SearchStore.hasData&&!h.loading?(s(),n(f,{key:0},[i("div",$,o(e.$t("No data available")),1),i("div",G,o(e.$t("Sorry, we couldn't find any results")),1)],64)):m("",!0)])):(s(),n("div",Y))]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var fe=q(j,[["render",J]]);export{fe as default};
