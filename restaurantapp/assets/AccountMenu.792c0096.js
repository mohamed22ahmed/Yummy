import{_ as U,ay as z,u as T,aq as m,A as S,b6 as L,m as $,n,p as s,q as a,$ as x,ap as p,Y as i,d as t,a3 as u,a4 as f,a5 as o,a6 as g,X as d,a2 as _,ar as y,a0 as q,a1 as A,F as w,as as D,az as Q,a8 as h}from"./index.f6661a24.js";import{Q as C}from"./QItemLabel.0d3c2221.js";import{Q as P}from"./QList.16ddb51a.js";import{Q as M}from"./QPage.78315ab4.js";import{u as N}from"./UserStore.3896d23d.js";import{u as B}from"./MenuStore.420c66e5.js";import"./index.9e157228.js";const O={name:"AccountMenu",components:{LogOut:z(()=>Q(()=>import("./LogOut.8ff06c8c.js"),["assets/LogOut.8ff06c8c.js","assets/QToolbarTitle.0f4dda99.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QToolbar.7bb603c7.js"]))},data(){return{app_push_notifications:!1,theme_mode:!1,local_notification:!1,user_data:[],rtl:!1}},setup(e){const l=N(),v=T(),r=B();return{UserStore:l,DataStore:v,MenuStore:r}},created(){this.authenticate(),this.theme_mode=this.DataStore.dark_mode,this.rtl=this.DataStore.rtl,this.$q.dark.set(this.theme_mode),m.authenticated()&&(this.user_data=m.getUser())},watch:{theme_mode(e,l){this.$q.dark.set(e),this.DataStore.dark_mode=e},rtl(e,l){this.DataStore.rtl=e,this.$q.lang.set({rtl:e})}},methods:{showLogout(){this.$refs.log_out.dialog=!0},Updateaccountnotification(e){if(this.$q.capacitor)if(e)this.subsribeDevice();else{let l=m.getUser();l&&this.unsubscribeToTopic(l.merchant_uuid)}else S.fetchDataByTokenPost("Updateaccountnotification","app_push_notifications="+e).then(l=>{}).catch(l=>{}).then(l=>{})},subsribeDevice(){let e=m.getUser();e&&L.subscribeTo({topic:e.merchant_uuid}).then(l=>{this.DataStore.push_notifications=!0,this.DataStore.push_off=!1}).catch(l=>{this.DataStore.push_notifications=!1,S.notify("dark","Error subscribing topics"+JSON.stringify(l),"warning",this.$q)})},unsubscribeToTopic(e){L.unsubscribeFrom({topic:e}).then(()=>{this.DataStore.push_notifications=!1,this.DataStore.push_off=!0}).catch(l=>{})},authenticate(){m.authenticate().then(e=>{}).catch(e=>{S.notify("dark",e,"error",this.$q),m.logout(),this.afterLogout(),this.$router.push("/login")}).then(e=>{})},afterLogout(){this.DataStore.earning_summary=[],this.MenuStore.category=[],this.MenuStore.addon=[],this.DataStore.total_order_summary=[],console.log("afterLogout")},initLocalNotification(e){S.fetchDataByTokenPost("Updatealocalnotification","local_notification="+e).then(l=>{this.DataStore.local_notification=l.details.local_notification}).catch(l=>{}).then(l=>{})}}},I={class:"full-width q-pa-md"},E={class:"text-h6 text-weight-bold"},F={class:"line-1"},R={class:"q-pa-md"};function j(e,l,v,r,k,b){const V=$("LogOut");return n(),s(M,{class:x([{"bg-mydark text-white":e.$q.dark.mode,"bg-grey-1 text-dark":!e.$q.dark.mode},"row items-stretch content-end"])},{default:a(()=>[p("div",I,[p("div",E,i(e.$t("Hello"))+", "+i(k.user_data.first_name),1),p("div",F,i(e.$t("Account Settings")),1)]),p("div",{class:x(["full-width radius-top q-pt-md",{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}])},[t(P,null,{default:a(()=>[u((n(),s(f,{clickable:"",to:"/account/edit-profile"},{default:a(()=>[t(o,{avatar:""},{default:a(()=>[t(g,{color:"orange-1","text-color":"orange",icon:"las la-user-alt",size:"md"})]),_:1}),t(o,null,{default:a(()=>[d(i(e.$t("Manage Profile")),1)]),_:1}),t(o,{side:""},{default:a(()=>[t(_,{round:"",unelevated:"","text-color":"dark",icon:r.DataStore.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[h]]),u((n(),s(f,{clickable:"",to:"/account/change-password"},{default:a(()=>[t(o,{avatar:""},{default:a(()=>[t(g,{color:"orange-1","text-color":"orange",icon:"las la-lock",size:"md"})]),_:1}),t(o,null,{default:a(()=>[d(i(e.$t("Change Password")),1)]),_:1}),t(o,{side:""},{default:a(()=>[t(_,{round:"",unelevated:"","text-color":"dark",icon:r.DataStore.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[h]]),u((n(),s(f,{clickable:""},{default:a(()=>[t(o,{avatar:""},{default:a(()=>[t(g,{color:"orange-1","text-color":"orange",icon:"las la-bell",size:"md"})]),_:1}),t(o,null,{default:a(()=>[d(i(e.$t("Push Notifications")),1)]),_:1}),t(o,{side:""},{default:a(()=>[t(y,{modelValue:r.DataStore.push_notifications,"onUpdate:modelValue":[l[0]||(l[0]=c=>r.DataStore.push_notifications=c),b.Updateaccountnotification],color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})),[[h]]),u((n(),s(f,{clickable:""},{default:a(()=>[t(o,{avatar:""},{default:a(()=>[t(g,{color:"orange-1","text-color":"orange",icon:"las la-bell",size:"md"})]),_:1}),t(o,null,{default:a(()=>[t(C,null,{default:a(()=>[d(i(e.$t("Local Notifications")),1)]),_:1})]),_:1}),t(o,{side:""},{default:a(()=>[t(y,{modelValue:r.DataStore.local_notification,"onUpdate:modelValue":[l[1]||(l[1]=c=>r.DataStore.local_notification=c),b.initLocalNotification],color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})),[[h]]),u((n(),s(f,{clickable:"",to:"/settings/printers"},{default:a(()=>[t(o,{avatar:""},{default:a(()=>[t(g,{color:"orange-1","text-color":"orange",icon:"las la-print",size:"md"})]),_:1}),t(o,null,{default:a(()=>[d(i(e.$t("Printers")),1)]),_:1}),t(o,{side:""},{default:a(()=>[t(_,{round:"",unelevated:"","text-color":"dark",icon:r.DataStore.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[h]]),r.DataStore.enabled_language?u((n(),s(f,{key:0,clickable:"",to:"/account/language"},{default:a(()=>[t(o,{avatar:""},{default:a(()=>[t(g,{color:"orange-1","text-color":"orange",icon:"las la-globe",size:"md"})]),_:1}),t(o,null,{default:a(()=>[d(i(e.$t("Language")),1)]),_:1}),r.DataStore.language_data?(n(),s(o,{key:0,side:""},{default:a(()=>[(n(!0),q(w,null,A(r.DataStore.language_data.data,c=>(n(),q(w,{key:c},[c.code==this.DataStore.app_language?(n(),s(_,{key:0,"no-caps":"",label:c.title,unelevated:"","text-color":"dark","icon-right":r.DataStore.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["label","icon-right"])):D("",!0)],64))),128))]),_:1})):D("",!0)]),_:1})),[[h]]):D("",!0),r.DataStore.enabled_language?u((n(),s(f,{key:1,clickable:"",onClick:l[2]||(l[2]=c=>k.rtl=!k.rtl)},{default:a(()=>[t(o,{avatar:""},{default:a(()=>[t(g,{color:"orange-1","text-color":"orange",icon:"format_textdirection_l_to_r",size:"md"})]),_:1}),t(o,null,{default:a(()=>[d(i(e.$t("Direction")),1)]),_:1}),t(o,{side:""},{default:a(()=>[t(_,{"no-caps":"",label:r.DataStore.rtl?e.$t("LRT"):e.$t("RTL"),unelevated:"","text-color":"dark","icon-right":r.DataStore.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["label","icon-right"])]),_:1})]),_:1})),[[h]]):D("",!0),u((n(),s(f,{clickable:""},{default:a(()=>[t(o,{avatar:""},{default:a(()=>[t(g,{color:"orange-1","text-color":"orange",icon:"las la-adjust",size:"md"})]),_:1}),t(o,null,{default:a(()=>[d(i(e.$t("Dark Mode")),1)]),_:1}),t(o,{side:""},{default:a(()=>[t(y,{modelValue:k.theme_mode,"onUpdate:modelValue":l[3]||(l[3]=c=>k.theme_mode=c),color:"secondary"},null,8,["modelValue"])]),_:1})]),_:1})),[[h]]),u((n(),s(f,{clickable:"",to:"/account/delete"},{default:a(()=>[t(o,{avatar:""},{default:a(()=>[t(g,{color:"orange-1","text-color":"orange",icon:"las la-user-slash",size:"md"})]),_:1}),t(o,null,{default:a(()=>[d(i(e.$t("Delete Account")),1)]),_:1}),t(o,{side:""},{default:a(()=>[t(_,{round:"",unelevated:"","text-color":"dark",icon:r.DataStore.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[h]]),u((n(),s(f,{to:"/account/legal",clickable:""},{default:a(()=>[t(o,{avatar:""},{default:a(()=>[t(g,{color:"orange-1","text-color":"orange",icon:"las la-balance-scale",size:"md"})]),_:1}),t(o,null,{default:a(()=>[d(i(e.$t("Legal")),1)]),_:1}),t(o,{side:""},{default:a(()=>[t(_,{round:"",unelevated:"","text-color":"dark",icon:r.DataStore.rtl?"las la-angle-left":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["icon"])]),_:1})]),_:1})),[[h]])]),_:1}),p("div",R,[t(_,{unelevated:"",color:e.$q.dark.mode?"grey600":"white","text-color":e.$q.dark.mode?"grey300":"dark","no-caps":"",class:"radius8 full-width border-grey text-weight-bold",onClick:b.showLogout},{default:a(()=>[d(i(e.$t("Sign Out")),1)]),_:1},8,["color","text-color","onClick"])])],2),t(V,{ref:"log_out",onAfterLogout:b.afterLogout},null,8,["onAfterLogout"])]),_:1},8,["class"])}var Z=U(O,[["render",j]]);export{Z as default};
