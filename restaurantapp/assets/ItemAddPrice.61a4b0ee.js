import{_ as S,A as r,n,p as c,q as l,d as i,a2 as m,a0 as f,X as y,Y as g,F as b,Z as w,$ as _,ap as h,at as a,ac as k,a3 as V}from"./index.f6661a24.js";import{Q as v}from"./QToolbarTitle.0f4dda99.js";import{Q as U}from"./QToolbar.7bb603c7.js";import{Q as D}from"./QHeader.ba9c2ff9.js";import{Q as T}from"./QInnerLoading.c6ed50f8.js";import{Q as z}from"./QSelect.4e3956e1.js";import{Q}from"./QDate.b5ca4044.js";import{Q as q}from"./QPopupProxy.98b4d203.js";import{Q as C}from"./QFooter.4f4f9530.js";import{Q as M}from"./QForm.4e86ee71.js";import{Q as $}from"./QPage.78315ab4.js";import{Q as B}from"./QPullToRefresh.a19885b1.js";import{C as P}from"./ClosePopup.6296f014.js";import{u as I}from"./MenuStore.420c66e5.js";import"./QResizeObserver.dc10e4c2.js";import"./QChip.5b52e54d.js";import"./QItemLabel.0d3c2221.js";import"./QMenu.c4f03f28.js";import"./selection.ef67fb9c.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./use-render-cache.3aae9b27.js";import"./date.6d02ab88.js";import"./TouchPan.ca911d69.js";import"./touch.9135741d.js";const A={name:"ItemAddPrice",data(){return{dialog_price:!1,item_uuid:"",id:"",loading:!0,loading_get:!1,price:0,size_id:"",cost_price:0,discount:0,discount_type:"",discount_start:"",discount_end:"",sku:"",item_size_id:0}},setup(t){return{MenuStore:I()}},created(){this.MenuStore.getPriceAttributes(),this.item_uuid=this.$route.query.item_uuid,this.item_size_id=this.$route.query.item_size_id,this.item_size_id>0&&this.getPrice()},computed:{isEdit(){return this.item_size_id>0}},methods:{refresh(t){this.item_size_id>0?this.getPrice(t):t()},getPrice(t){this.loading_get=!0,r.fetchDataByTokenPost("getPrice","item_size_id="+this.item_size_id).then(e=>{this.price=e.details.price,this.cost_price=e.details.cost_price,this.discount=e.details.discount,this.sku=e.details.sku,this.size_id=e.details.size_id,this.discount_type=e.details.discount_type,this.discount_start=e.details.discount_start,this.discount_end=e.details.discount_end}).catch(e=>{r.notify("dark",e,"error",this.$q)}).then(e=>{this.loading_get=!1,r.empty(t)||t()})},onSubmit(){this.loading=!0;let t="";r.empty(this.size_id)||(t=this.size_id.value?this.size_id.value:this.size_id);let e="";r.empty(this.discount_type)||(e=this.discount_type.value?this.discount_type.value:this.discount_type),r.fetchDataByToken("createItemPrice",{item_uuid:this.item_uuid,item_size_id:this.item_size_id,price:this.price,size_id:t,cost_price:this.cost_price,discount:this.discount,discount_type:e,discount_start:this.discount_start,discount_end:this.discount_end,sku:this.sku}).then(d=>{r.notify("light-green",d.msg,"check_circle",this.$q),this.$router.replace({path:"/item/pricelist",query:{item_uuid:this.item_uuid}})}).catch(d=>{r.notify("dark",d,"error",this.$q)}).then(d=>{this.loading=!1})}}},E={class:"q-pa-md q-gutter-md"},F={class:"row items-center justify-end"},N={class:"row items-center justify-end"};function R(t,e,d,u,s,p){return n(),c(B,{onRefresh:p.refresh},{default:l(()=>[i(D,{class:_({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode})},{default:l(()=>[i(U,null,{default:l(()=>[i(m,{onClick:e[0]||(e[0]=o=>t.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:t.$q.dark.mode?"white":"dark"},null,8,["color"]),i(v,{class:"text-weight-bold"},{default:l(()=>[p.isEdit?(n(),f(b,{key:0},[y(g(t.$t("Edit Price")),1)],64)):(n(),f(b,{key:1},[y(g(t.$t("Add Price")),1)],64))]),_:1})]),_:1}),i(w)]),_:1},8,["class"]),i($,{class:_({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode})},{default:l(()=>[s.loading_get?(n(),c(T,{key:0,showing:!0,color:"primary",size:"md"})):(n(),c(M,{key:1,onSubmit:p.onSubmit},{default:l(()=>[h("div",E,[i(a,{outlined:"",modelValue:s.price,"onUpdate:modelValue":e[1]||(e[1]=o=>s.price=o),label:t.$t("Price"),"stack-label":"",color:"grey-5","lazy-rules":"",rules:[o=>o&&o.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),i(z,{outlined:"",modelValue:s.size_id,"onUpdate:modelValue":e[2]||(e[2]=o=>s.size_id=o),label:t.$t("Unit"),color:"grey-5",options:u.MenuStore.unit,"stack-label":"",behavior:"dialog","transition-show":"fade","transition-hide":"fade",loading:u.MenuStore.priceatt_loading},null,8,["modelValue","label","options","loading"]),i(a,{outlined:"",modelValue:s.cost_price,"onUpdate:modelValue":e[3]||(e[3]=o=>s.cost_price=o),label:t.$t("Cost Price"),"stack-label":"",color:"grey-5","lazy-rules":""},null,8,["modelValue","label"]),i(a,{outlined:"",modelValue:s.discount,"onUpdate:modelValue":e[4]||(e[4]=o=>s.discount=o),label:t.$t("Discount"),"stack-label":"",color:"grey-5","lazy-rules":""},null,8,["modelValue","label"]),i(a,{outlined:"",modelValue:s.discount_start,"onUpdate:modelValue":e[6]||(e[6]=o=>s.discount_start=o),label:t.$t("Discount Start"),"stack-label":"",color:"grey-5",readonly:""},{append:l(()=>[i(k,{name:"event",class:"cursor-pointer"},{default:l(()=>[i(q,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[i(Q,{modelValue:s.discount_start,"onUpdate:modelValue":e[5]||(e[5]=o=>s.discount_start=o)},{default:l(()=>[h("div",F,[V(i(m,{label:t.$t("Close"),color:"primary",flat:"","no-caps":""},null,8,["label"]),[[P]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label"]),i(a,{outlined:"",modelValue:s.discount_end,"onUpdate:modelValue":e[8]||(e[8]=o=>s.discount_end=o),label:t.$t("Discount Start"),"stack-label":"",color:"grey-5",readonly:""},{append:l(()=>[i(k,{name:"event",class:"cursor-pointer"},{default:l(()=>[i(q,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[i(Q,{modelValue:s.discount_end,"onUpdate:modelValue":e[7]||(e[7]=o=>s.discount_end=o)},{default:l(()=>[h("div",N,[V(i(m,{label:t.$t("Close"),color:"primary",flat:"","no-caps":""},null,8,["label"]),[[P]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label"]),i(z,{outlined:"",modelValue:s.discount_type,"onUpdate:modelValue":e[9]||(e[9]=o=>s.discount_type=o),label:t.$t("Discount Type"),color:"grey-5",options:u.MenuStore.discount_type,"stack-label":"",behavior:"dialog","transition-show":"fade","transition-hide":"fade",loading:u.MenuStore.priceatt_loading},null,8,["modelValue","label","options","loading"]),i(a,{outlined:"",modelValue:s.sku,"onUpdate:modelValue":e[10]||(e[10]=o=>s.sku=o),label:t.$t("SKU"),"stack-label":"",color:"grey-5","lazy-rules":""},null,8,["modelValue","label"])]),i(C,{class:_(["q-pl-md q-pr-md q-pb-xs",{"bg-mydark ":t.$q.dark.mode,"bg-white ":!t.$q.dark.mode}])},{default:l(()=>[i(m,{type:"submit",color:"primary","text-color":"white",label:t.$t("Save"),unelevated:"",class:"full-width radius8",size:"lg","no-caps":""},null,8,["label"])]),_:1},8,["class"])]),_:1},8,["onSubmit"]))]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var ce=S(A,[["render",R]]);export{ce as default};
