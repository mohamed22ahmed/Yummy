var M=Object.defineProperty;var O=(t,e,n)=>e in t?M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var m=(t,e,n)=>(O(t,typeof e!="symbol"?e+"":e,n),n);import{b4 as C,r as S,c as y,w as j,cx as _,a3 as B,n as F,a0 as V,_ as I,u as q,Y as H}from"./index.f6661a24.js";/**
 * Vue Number Format 3.17.0
 * (c) 2021-2023 Dipak Sarkar <hello@dipaksarkar.in> (https://dipaksarkar.in/)
 * @license MIT
 */var x={prefix:"",suffix:"",separator:",",decimal:".",precision:2,minimumFractionDigits:null,prefill:!0,reverseFill:!1,min:null,max:null,nullValue:""};function L(t,e,n){return Math.max(t,Math.min(e,n))}function J(t){return L(0,t,20)}function T(t,e){const n=Math.pow(10,e);return(parseFloat(t)/n||0).toFixed(J(e))}class w{constructor(e){m(this,"options");m(this,"input");m(this,"number");m(this,"isClean");m(this,"preSurRegExp");m(this,"numberRegExp");m(this,"cleanRegExp");m(this,"negativeRegExp");this.options=Object.assign(x,e),this.input="",this.number="",this.isClean=!0;const{prefix:n,suffix:r,decimal:i}=this.options;this.preSurRegExp=new RegExp(`${n}|${r}`,"g"),this.numberRegExp=new RegExp(`[^0-9\\${i}]+`,"gi"),this.cleanRegExp=new RegExp("[^0-9]+","gi"),this.negativeRegExp=new RegExp("[^0-9\\-]+","gi")}isNull(){return this.isClean?!this.numberOnly(this.input,this.cleanRegExp):!this.numberOnly(this.input,this.negativeRegExp)}clean(e=!1){return this.isClean=e,this}sign(){if(this.input===null||this.input===void 0)return"";const e=this.input.toString().indexOf("-")>=0;return this.isClean?e&&this.realNumber()>0?"-":"":e?"-":""}toNumber(e){return Number(e)}numberOnly(e,n){return e==null?void 0:e.toString().replace(n,"")}isNegative(){return this.sign()==="-"}numbers(){if(this.options.reverseFill)this.number=T(this.numberOnly(this.input,/\D+/g),this.options.precision).replace(".",this.options.decimal);else if(typeof this.input=="number")this.number=this.parts(this.input.toString().replace("-",""),".").join(this.options.decimal);else{const e=this.input.replace(this.preSurRegExp,"");this.number=this.numberOnly(e,this.numberRegExp),this.number=this.parts(this.number).join(this.options.decimal)}return this.number}realNumber(){return parseFloat(this.numbers().toString().replace(this.options.decimal,"."))}parts(e,n){const r=n||this.options.decimal;let i=e.toString().split(r);if(i.length>1&&(i[0]=this.toNumber(i[0])||0,i[1]=i.slice(1,i.length).join(""),i=i.slice(0,2)),this.isClean){const s=this.toNumber(i.join(".")).toFixed(this.options.precision),a=this.toNumber(s),u=a.toFixed(this.options.minimumFractionDigits);this.options.minimumFractionDigits>=0&&a.toString().length<u.length?i=u.toString().split("."):i=a.toString().split(".")}return i.slice(0,2)}addSeparator(){const e=this.numbers().split(this.options.decimal);return e[0]=e[0].toString().replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${this.options.separator}`),e.join(this.options.decimal)}format(e){return this.input=e,this.isNull()&&!this.options.reverseFill?this.options.nullValue:this.sign()+this.options.prefix+this.addSeparator()+this.options.suffix}unformat(e){return this.input=e,this.isNull()&&!this.options.reverseFill?this.options.nullValue:this.sign()+this.realNumber()}}const v="-";function R(t){return JSON.parse(JSON.stringify(t))}function E(t){return new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function b(t){const e=t instanceof HTMLInputElement?t:t.querySelector("input");if(!e)throw new Error("facade directive requires an input element");return e}function k(t,e){const n=()=>{t.setSelectionRange(e,e)};n(),setTimeout(n(),1)}function g(t,e,{emit:n=!0,force:r=!1,clean:i=!1}={}){var l;const{options:s,oldValue:a}=t,u=((l=e==null?void 0:e.props)==null?void 0:l.value)||t.value;if(r||a!==u){const o=new w(s).clean(i&&!s.reverseFill);let c=o.format(u),f=o.clean(s&&!s.reverseFill).unformat(u);return i&&(Number(s.max)===s.max&&Number(f)>s.max?(c=o.format(s.max),f=o.unformat(s.max)):Number(s.min)===s.min&&Number(f)<s.min&&(c=o.format(s.min),f=o.unformat(s.min))),t.oldValue=c,t.masked=c,t.unmaskedValue=f,t.value!==c&&(t.value=c),n&&t.dispatchEvent(E("input"))}}function P(t){const{target:e,detail:n}=t;if(n!=null&&n.facade)return!1;const{oldValue:r,options:i,masked:s}=e;t.stopPropagation();let a=e.value.length;e.selectionEnd&&(a=e.value.length-e.selectionEnd),g(e,null,{emit:!1}),i.suffix&&(a=Math.max(a,i.suffix.length)),a=e.value.length-a,i.prefix&&(a=Math.max(a,i.prefix.length)),k(e,a),r!==e.value&&(e.oldValue=s,e.dispatchEvent(E("input")))}function U(t){const{target:e,detail:n}=t;if(n!=null&&n.facade)return!1;const{oldValue:r,masked:i}=e;g(e,null,{force:!0,clean:!0}),r!==e.value&&(e.oldValue=i,e.dispatchEvent(E("change")))}function Y(t,e){const{options:n}=e,{prefix:r,suffix:i,decimal:s,min:a,separator:u}=n,{key:l}=t,o=new RegExp(`${r}|${i}`,"g"),c=e.value.replace(o,""),f=a===void 0||Number(a)<0||Number(a)!==a;if(l===s&&c.includes(s))t.preventDefault();else if(l===v&&!f)t.preventDefault();else if(l==="Backspace"){const d=e.selectionEnd||0,N=e.value.slice(d-1,d),$=e.value.slice(d-2,d);let h=e.value.length-d;[r,v,u].includes(N)&&(t.preventDefault(),N===u?e.value=e.value.replace($,""):e.value=e.value.replace(new RegExp(`[${r}${v}]`,"g"),""),h=Math.max(h,i.length),h=e.value.length-h,h=Math.max(h,r.length),k(e,h),e.dispatchEvent(new Event("input")))}}var z={beforeMount:(t,{value:e,modifiers:n},r)=>{t=b(t);const i=Object.assign(R(x),e,n);t.options=i,g(t,r,{force:i.prefill,clean:!0})},mounted:t=>{t=b(t);const e=t.parentElement||t,n=r=>{r.target===t&&P(r)};e.addEventListener("input",n,!0),t.onblur=r=>U(r),t.onkeydown=r=>Y(r,t),t.cleanup=()=>e.removeEventListener("input",n,!0)},updated:(t,{value:e,oldValue:n,modifiers:r},i)=>{t=b(t);const s=t.options;t.options=Object.assign(s,e,r),e!==n?g(t,i,{force:!0,clean:!0}):g(t,i)},unmounted:t=>{b(t).cleanup()}};const p=R(x);var D=C({name:"VueNumber",directives:{number:z},props:{modelValue:{type:[String,Number],required:!0},nullValue:{type:[Number,String],required:!1,default:p.nullValue},masked:{type:Boolean,default:!1},reverseFill:{type:Boolean,default:p.reverseFill},prefill:{type:Boolean,default:p.prefill},precision:{type:Number,default:()=>p.precision},minimumFractionDigits:{type:Number,default:()=>p.minimumFractionDigits},decimal:{type:String,default:()=>p.decimal},min:{type:Number,default:()=>p.min},max:{type:Number,default:()=>p.max},separator:{type:String,default:()=>p.separator},prefix:{type:String,default:()=>p.prefix},suffix:{type:String,default:()=>p.suffix}},emits:["update:model-value","input:model-value"],setup(t,{emit:e}){const n=S(t.modelValue),r=S(""),i=y(()=>({...t})),s=y(()=>t.masked?n.value:r.value),a=l=>{const{target:o}=l;n.value=o.value,r.value=o.unmaskedValue,e("input:model-value",s.value)},u=()=>{e("update:model-value",s.value)};return j(()=>t.modelValue,(l,o)=>{l!==o&&(n.value=l)}),{config:i,maskedValue:n,input:a,change:u}}});const A=["value"];function G(t,e,n,r,i,s){const a=_("number");return B((F(),V("input",{type:"text",autocomplete:"off",value:t.maskedValue,class:"v-number vue-number-format",onChange:e[0]||(e[0]=(...u)=>t.change&&t.change(...u)),onInput:e[1]||(e[1]=(...u)=>t.input&&t.input(...u))},null,40,A)),[[a,t.config]])}D.render=G;D.__file="src/component.vue";const K={name:"NumberFormat",props:["amount"],data(){return{total:0,number:void 0}},created(){this.number=new w(this.DataStore.money_config),this.total=this.number.format(this.amount)},watch:{amount(t,e){this.total=this.number.format(t)}},setup(){return{DataStore:q()}}};function Q(t,e,n,r,i,s){return F(),V("span",null,H(i.total),1)}var Z=I(K,[["render",Q]]);export{Z as default};
