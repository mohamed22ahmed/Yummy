import{f as w,j as S}from"./index.f6661a24.js";var R=Object.defineProperty,p=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,b=(e,r,t)=>r in e?R(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,_=(e,r)=>{for(var t in r||(r={}))z.call(r,t)&&b(e,t,r[t]);if(p)for(var t of p(r))E.call(r,t)&&b(e,t,r[t]);return e};function I(e){return typeof e=="object"&&e!==null}function $(e){return e}function h(e,r){return e=I(e)?e:Object.create(null),new Proxy(e,{get(t,i,s){var n;return i==="key"?((n=r.key)!=null?n:$)(Reflect.get(t,i,s)):Reflect.get(t,i,s)||Reflect.get(r,i,s)}})}function O(e){return e!==null&&typeof e=="object"}function d(e,r){const t=Array.isArray(e)&&Array.isArray(r),i=O(e)&&O(r);if(!t&&!i)throw new Error("Can only merge object with object or array with array");const s=t?[]:{};return[...Object.keys(e),...Object.keys(r)].forEach(o=>{Array.isArray(e[o])&&Array.isArray(r[o])?s[o]=[...Object.values(d(e[o],r[o]))]:r[o]!==null&&typeof r[o]=="object"&&typeof e[o]=="object"?s[o]=d(e[o],r[o]):e[o]!==void 0&&r[o]===void 0?s[o]=e[o]:e[o]===void 0&&r[o]!==void 0&&(s[o]=r[o])}),s}function j(e,r){return r.reduce((t,i)=>i==="[]"&&Array.isArray(t)?t:t==null?void 0:t[i],e)}function m(e,r,t){const i=r.slice(0,-1).reduce((s,n)=>/^(__proto__)$/.test(n)?{}:s[n]=s[n]||{},e);if(Array.isArray(i[r[r.length-1]])&&Array.isArray(t)){const s=i[r[r.length-1]].map((n,o)=>Array.isArray(n)&&typeof n!="object"?[...n,...t[o]]:typeof n=="object"&&n!==null&&Object.keys(n).some(a=>Array.isArray(n[a]))?d(n,t[o]):_(_({},n),t[o]));i[r[r.length-1]]=s}else r[r.length-1]===void 0&&Array.isArray(i)&&Array.isArray(t)?i.push(...t):i[r[r.length-1]]=t;return e}function P(e,r){return r.reduce((t,i)=>{const s=i.split(".");if(!s.includes("[]"))return m(t,s,j(e,s));const n=s.indexOf("[]"),o=s.slice(0,n),a=s.slice(0,n+1),f=s.slice(n+1),u=j(e,a),c=[];for(const l of u)f.length!==0&&(Array.isArray(l)||typeof l=="object")?c.push(P(l,[f.join(".")])):c.push(l);return m(t,o,c)},Array.isArray(e)?[]:{})}function v(e,r,t,i,s){try{const n=r==null?void 0:r.getItem(i);n&&e.$patch(t==null?void 0:t.deserialize(n))}catch(n){s&&console.error(n)}}function N(e={}){return r=>{const{options:{persist:t},store:i}=r;if(!t)return;const s=(Array.isArray(t)?t.map(n=>h(n,e)):[h(t,e)]).map(({storage:n=localStorage,beforeRestore:o=null,afterRestore:a=null,serializer:f={serialize:JSON.stringify,deserialize:JSON.parse},key:u=i.$id,paths:c=null,debug:l=!1})=>({storage:n,beforeRestore:o,afterRestore:a,serializer:f,key:u,paths:c,debug:l}));s.forEach(n=>{const{storage:o,serializer:a,key:f,paths:u,beforeRestore:c,afterRestore:l,debug:y}=n;c==null||c(r),v(i,o,a,f,y),l==null||l(r),i.$subscribe((B,g)=>{try{const A=Array.isArray(u)?P(g,u):g;o.setItem(f,a.serialize(A))}catch(A){y&&console.error(A)}},{detached:!0})}),i.$hydrate=({runHooks:n=!0}={})=>{s.forEach(o=>{const{beforeRestore:a,afterRestore:f,storage:u,serializer:c,key:l,debug:y}=o;n&&(a==null||a(r)),v(i,u,c,l,y),n&&(f==null||f(r))})}}}var J=N(),U=w(({app:e})=>{const r=S();r.use(J),e.use(r)});export{U as default};
