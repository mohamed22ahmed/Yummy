import{_ as C,ay as U,u as P,A as i,m as D,n as r,p,q as f,$ as k,b7 as z,d as o,ap as n,a0 as h,a2 as g,ac as V,Y as y,as as q,ar as S,at as d,b8 as A,az as Q}from"./index.f6661a24.js";import{Q as w}from"./QInnerLoading.c6ed50f8.js";import{Q as b}from"./QImg.b7890c8b.js";import{Q as _}from"./QSelect.4e3956e1.js";import{Q as I}from"./QSpace.7af5fd36.js";import{Q as F}from"./QForm.4e86ee71.js";import{Q as B}from"./QPage.78315ab4.js";import{A as m}from"./AppCamera.4fe7ee93.js";import"./QChip.5b52e54d.js";import"./QItemLabel.0d3c2221.js";import"./QMenu.c4f03f28.js";import"./selection.ef67fb9c.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";const H={components:{UploaderFile:U(()=>Q(()=>import("./UploaderFile.36c0f73c.js"),["assets/UploaderFile.36c0f73c.js","assets/QUploader.d12c38b5.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QCircularProgress.24399868.js","assets/format.de7e9769.js"]))},data(){return{loading:!1,loading2:!1,is_ready:!1,upload_enabled:!1,logo:"",logo_url:"",upload_path:"",featured_data:"",cuisine:[],services:[],featured:[],distance_unit:"",tags:[],restaurant_name:"",restaurant_slug:"",contact_name:"",contact_phone:"",contact_email:"",description:"",short_description:"",delivery_distance_covered:"",header_image:"",upload_header_enabled:!1,path2:"",header_image_url:"",featured_data2:[]}},setup(t){return{DataStore:P()}},created(){this.getInformation()},computed:{hasPhoto(){return!i.empty(this.logo)},hasPhoto2(){return!i.empty(this.header_image)},hasFeaturedData(){return Object.keys(this.featured_data).length>0},hasHeader(){return Object.keys(this.featured_data2).length>0}},methods:{clearLogo(){this.logo="",this.logo_url="",this.upload_path="",this.upload_enabled=!1},clearHeaderImage(){this.header_image="",this.path2="",this.header_image_url="",this.upload_header_enabled=!1},refresh(t){this.getInformation(t)},getInformation(t){this.loading=!0,i.fetchDataByTokenPost("getInformation").then(e=>{this.is_ready=e.details.is_ready,this.restaurant_name=e.details.restaurant_name,this.restaurant_slug=e.details.restaurant_slug,this.contact_name=e.details.contact_name,this.contact_phone=e.details.contact_phone,this.contact_email=e.details.contact_email,this.description=e.details.description,this.short_description=e.details.short_description,this.delivery_distance_covered=e.details.delivery_distance_covered,this.distance_unit=e.details.distance_unit,this.cuisine=e.details.cuisine,this.services=e.details.services,this.tags=e.details.tags,this.featured=e.details.featured,this.logo=e.details.logo,this.logo_url=e.details.logo_url,this.upload_path=e.details.path,this.header_image=e.details.header_image,this.header_image_url=e.details.header_image_url,this.path2=e.details.path2}).catch(e=>{i.notify("dark",e,"error",this.$q)}).then(e=>{this.loading=!1,i.empty(t)||t()})},onSubmit(){i.showLoadingBox("",this.$q),i.fetchDataByToken("updateInformation",{is_ready:this.is_ready==!0?2:1,restaurant_name:this.restaurant_name,restaurant_slug:this.restaurant_slug,contact_name:this.contact_name,contact_email:this.contact_email,description:this.description,short_description:this.short_description,cuisine:this.cuisine,services:this.services,tags:this.tags,featured:this.featured,delivery_distance_covered:this.delivery_distance_covered,distance_unit:this.distance_unit,logo:this.logo,upload_path:this.upload_path,featured_data:this.hadFeaturedData()?this.featured_data.data:"",image_type:this.hadFeaturedData()?this.featured_data.format:"",header_image_data:this.hadHeader()?this.featured_data2.data:"",header_image_type:this.hadHeader()?this.featured_data2.format:"",header_image:this.header_image,path2:this.path2}).then(t=>{i.notify("light-green",t.msg,"check_circle",this.$q)}).catch(t=>{i.notify("dark",t,"error",this.$q)}).then(t=>{i.hideLoadingBox(this.$q)})},takePhoto(){this.$q.capacitor?m.isCameraEnabled().then(t=>{m.isFileAccessEnabled().then(e=>{m.getPhoto(1).then(u=>{this.featured_data=u}).catch(u=>{this.featured_data=[]})}).catch(e=>{i.notify("dark",e,"error",this.$q)})}).catch(t=>{i.notify("dark",t,"error",this.$q)}):this.upload_enabled=!this.upload_enabled},takePhoto2(){this.$q.capacitor?m.isCameraEnabled().then(t=>{m.isFileAccessEnabled().then(e=>{m.getPhoto(1).then(u=>{this.featured_data2=u}).catch(u=>{this.featured_data2=[]})}).catch(e=>{i.notify("dark",e,"error",this.$q)})}).catch(t=>{i.notify("dark",t,"error",this.$q)}):this.upload_header_enabled=!this.upload_header_enabled},afterUploadfile(t){this.logo=t.filename,this.logo_url=t.url_image,this.upload_path=t.upload_path},afterUploadfile2(t){this.header_image=t.filename,this.header_image_url=t.url_image,this.path2=t.upload_path},afterInput(t){this.translation_data=t},hadFeaturedData(){return Object.keys(this.featured_data).length>0},hadHeader(){return Object.keys(this.featured_data2).length>0}}},T={class:"q-gutter-md"},L={class:"row q-gutter-sm"},E={key:1,class:"col-3 relative-position"},j={class:"col"},M={class:"font12 line-normal"},N={key:0,class:"q-pl-sm"},O={class:"row items-center"},G={class:"row q-gutter-sm"},R={key:1,class:"col-3 relative-position"},x={class:"col"},J={class:"font12 line-normal"},$={key:1,class:"q-pl-sm"};function Y(t,e,u,c,l,s){const v=D("UploaderFile");return r(),p(B,{class:k([{"bg-mydark text-white":t.$q.dark.mode,"bg-grey-1 text-dark":!t.$q.dark.mode},"q-pl-md q-pr-md"])},{default:f(()=>[l.loading?(r(),p(w,{key:0,showing:!0,color:"primary",size:"md"})):(r(),p(z,{key:1,class:"q-pa-none no-shadow"},{default:f(()=>[o(A,null,{default:f(()=>[o(F,{onSubmit:s.onSubmit},{default:f(()=>[n("div",T,[n("div",L,[s.hasFeaturedData?(r(),p(b,{key:0,src:l.featured_data.path,"spinner-color":"primary","spinner-size":"sm",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):s.hasPhoto?(r(),h("div",E,[o(g,{round:"",color:t.$q.dark.mode?"grey600":"mygrey","text-color":t.$q.dark.mode?"grey300":"dark",icon:"las la-trash",unelevated:"",size:"sm",class:"absolute-top-right z-tap",style:{top:"-10px",right:"-10px"},onClick:s.clearLogo},null,8,["color","text-color","onClick"]),o(b,{src:this.logo_url,"spinner-color":"primary","spinner-size":"sm",fit:"cover",style:{height:"70px"},class:"radius8"},null,8,["src"])])):(r(),h("div",{key:2,class:k(["col-3 row items-center justify-center radius8",{"bg-grey600 ":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),style:{height:"70px"}},[o(V,{name:"las la-image",class:"text-grey",size:"xl"})],2)),n("div",j,[n("div",M,y(t.$t("Items with quality photos are often more popular. Maximum 2 MB"))+". "+y(t.$t("Accepted types: PNG. JPG")),1),o(g,{label:s.hasPhoto?this.$t("Change Logo"):s.hasFeaturedData?this.$t("Change Logo"):this.$t("Add Logo"),flat:"",color:"primary","no-caps":"",class:"q-pl-none q-pr-none",onClick:s.takePhoto},null,8,["label","onClick"])])]),l.upload_enabled?(r(),h("div",N,[o(v,{ref:"uploader_file",onAfterUploadfile:s.afterUploadfile},null,8,["onAfterUploadfile"])])):q("",!0),o(S,{modelValue:l.is_ready,"onUpdate:modelValue":e[0]||(e[0]=a=>l.is_ready=a),label:t.$t("Published Merchant")},null,8,["modelValue","label"]),o(d,{outlined:"",modelValue:l.restaurant_name,"onUpdate:modelValue":e[1]||(e[1]=a=>l.restaurant_name=a),label:t.$t("Restaurant name"),"stack-label":"",color:"grey-5","lazy-rules":"",rules:[a=>a&&a.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),o(d,{outlined:"",modelValue:l.restaurant_slug,"onUpdate:modelValue":e[2]||(e[2]=a=>l.restaurant_slug=a),label:t.$t("Restaurant Slug"),"stack-label":"",color:"grey-5","lazy-rules":"",rules:[a=>a&&a.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),o(d,{outlined:"",modelValue:l.contact_name,"onUpdate:modelValue":e[3]||(e[3]=a=>l.contact_name=a),label:t.$t("Contact Name"),"stack-label":"",color:"grey-5"},null,8,["modelValue","label"]),o(d,{outlined:"",modelValue:l.contact_phone,"onUpdate:modelValue":e[4]||(e[4]=a=>l.contact_phone=a),label:t.$t("Contact Phone"),"stack-label":"",color:"grey-5","lazy-rules":"",rules:[a=>a&&a.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),o(d,{outlined:"",modelValue:l.contact_email,"onUpdate:modelValue":e[5]||(e[5]=a=>l.contact_email=a),label:t.$t("Contact email"),"stack-label":"",color:"grey-5","lazy-rules":"",rules:[a=>a&&a.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),o(d,{outlined:"",modelValue:l.description,"onUpdate:modelValue":e[6]||(e[6]=a=>l.description=a),label:t.$t("About"),"stack-label":"",color:"grey-5","lazy-rules":"",type:"textarea"},null,8,["modelValue","label"]),o(d,{outlined:"",modelValue:l.short_description,"onUpdate:modelValue":e[7]||(e[7]=a=>l.short_description=a),label:t.$t("Short About"),"stack-label":"",color:"grey-5","lazy-rules":"",type:"textarea"},null,8,["modelValue","label"]),o(_,{outlined:"",modelValue:l.cuisine,"onUpdate:modelValue":e[8]||(e[8]=a=>l.cuisine=a),label:t.$t("Cuisine"),color:"grey-5",options:c.DataStore.cuisine,multiple:"",behavior:"dialog","transition-show":"fade","transition-hide":"fade","options-html":"","map-options":"","emit-value":""},null,8,["modelValue","label","options"]),o(_,{outlined:"",modelValue:l.services,"onUpdate:modelValue":e[9]||(e[9]=a=>l.services=a),label:t.$t("Services"),color:"grey-5",options:c.DataStore.services,multiple:"",behavior:"dialog","transition-show":"fade","transition-hide":"fade",rules:[a=>a&&a.length>0||this.$t("This field is required")],"options-html":"","map-options":"","emit-value":""},null,8,["modelValue","label","options","rules"]),o(_,{outlined:"",modelValue:l.tags,"onUpdate:modelValue":e[10]||(e[10]=a=>l.tags=a),label:t.$t("Tags"),color:"grey-5",options:c.DataStore.tags,multiple:"",behavior:"dialog","transition-show":"fade","transition-hide":"fade","options-html":"","map-options":"","emit-value":""},null,8,["modelValue","label","options"]),o(_,{outlined:"",modelValue:l.featured,"onUpdate:modelValue":e[11]||(e[11]=a=>l.featured=a),label:t.$t("Featured"),color:"grey-5",options:c.DataStore.featured,multiple:"",behavior:"dialog","transition-show":"fade","transition-hide":"fade","options-html":"","map-options":"","emit-value":""},null,8,["modelValue","label","options"]),n("div",O,[o(d,{type:"number",outlined:"",modelValue:l.delivery_distance_covered,"onUpdate:modelValue":e[12]||(e[12]=a=>l.delivery_distance_covered=a),label:t.$t("Delivery Distance Covered"),"stack-label":"",color:"grey-5",class:"col q-mr-sm"},null,8,["modelValue","label"]),o(_,{outlined:"",modelValue:l.distance_unit,"onUpdate:modelValue":e[13]||(e[13]=a=>l.distance_unit=a),options:c.DataStore.unit,label:t.$t("Distance Unit"),color:"grey-5","stack-label":"",class:"col","map-options":"","emit-value":""},null,8,["modelValue","options","label"])]),n("div",G,[s.hasHeader?(r(),p(b,{key:0,src:l.featured_data2.path,"spinner-color":"primary","spinner-size":"sm",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):s.hasPhoto2?(r(),h("div",R,[o(g,{round:"",color:t.$q.dark.mode?"grey600":"mygrey","text-color":t.$q.dark.mode?"grey300":"dark",icon:"las la-trash",unelevated:"",size:"sm",class:"z-top absolute-top-right",style:{top:"-10px",right:"-10px"},onClick:s.clearHeaderImage},null,8,["color","text-color","onClick"]),o(b,{src:this.header_image_url,"spinner-color":"primary","spinner-size":"sm",fit:"cover",style:{height:"70px"},class:"radius8"},null,8,["src"])])):(r(),h("div",{key:2,class:k(["col-3 row items-center justify-center radius8",{"bg-grey600 ":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),style:{height:"70px"}},[o(V,{name:"las la-image",class:"text-grey",size:"xl"})],2)),n("div",x,[n("div",J,y(t.$t("Items with quality photos are often more popular. Maximum 2 MB"))+". "+y(t.$t("Accepted types: PNG. JPG")),1),o(g,{label:s.hasPhoto2?this.$t("Change Header"):s.hasHeader?this.$t("Change Header"):this.$t("Add Header"),flat:"",color:"primary","no-caps":"",class:"q-pl-none q-pr-none",onClick:s.takePhoto2},null,8,["label","onClick"])])]),l.upload_header_enabled?(r(),h("div",$,[o(v,{ref:"uploader_file2",onAfterUploadfile:s.afterUploadfile2},null,8,["onAfterUploadfile"])])):q("",!0)]),o(I,{class:"q-pa-sm"}),o(g,{type:"submit",color:"primary","text-color":"white",label:t.$t("Save"),unelevated:"",size:"lg","no-caps":"",loading:l.loading2,class:"fit"},null,8,["label","loading"])]),_:1},8,["onSubmit"])]),_:1})]),_:1}))]),_:1},8,["class"])}var ue=C(H,[["render",Y]]);export{ue as default};
