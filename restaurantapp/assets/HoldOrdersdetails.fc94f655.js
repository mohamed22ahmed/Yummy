import{Q as x}from"./QInnerLoading.c6ed50f8.js";import{Q as C}from"./QToolbarTitle.0f4dda99.js";import{Q as S}from"./QSpace.7af5fd36.js";import{_ as D,u as w,A as V,n as a,p as g,q as s,d as e,b7 as B,a0 as l,F as n,X as p,Y as r,a2 as b,Z as Q,b8 as O,ap as h,a1 as k,a4 as z,a5 as q,as as v,dc as I,a3 as N,aQ as T}from"./index.f6661a24.js";import{Q as L}from"./QToolbar.7bb603c7.js";import{Q as m}from"./QItemLabel.0d3c2221.js";import{Q as A}from"./QList.16ddb51a.js";import{C as P}from"./ClosePopup.6296f014.js";import{u as F}from"./CartStore.4102b575.js";const H={name:"HoldOrdersdetails",data(){return{loading:!1,dialog:!1,order_reference:"",payload:["items","summary","total","subtotal","items_count"],data:[],cart_uuid:"",transaction_type:""}},setup(i){const o=F(),u=w();return{CartStore:o,DataStore:u}},computed:{hasData(){return Object.keys(this.data).length>0}},methods:{getCart(i,o,u){this.cart_uuid=o,this.transaction_type=u,this.title=i,this.dialog=!0,this.loading=!0,V.fetchDataByTokenPost("getCart",{cart_uuid:o,payload:this.payload}).then(_=>{this.data=_.details.data.items}).catch(_=>{this.data=[]}).then(_=>{this.loading=!1})},openOrder(){this.DataStore.cart_uuid=this.cart_uuid;let i=this.DataStore.place_data?this.DataStore.place_data.place_id:"";this.DataStore.cart_transaction_type=this.transaction_type,this.CartStore.getCart(this.cart_uuid,i),this.$router.push({path:"/pos/create",query:{cart:"open"}})}}},j={key:0,style:{"min-height":"50vh"}},E={key:0,class:"flex flex-center",style:{"min-height":"calc(50vh)","max-height":"50vh"}},U={class:"text-grey"},X={key:0,class:"no-margin"},Y={key:1,class:"no-margin"},Z={key:0,class:"q-ma-none"},$={key:1,class:"q-ma-none"};function G(i,o,u,_,d,y){return a(),g(T,{modelValue:d.dialog,"onUpdate:modelValue":o[2]||(o[2]=t=>d.dialog=t),maximized:!1,position:"bottom",persistent:"","transition-show":"fade"},{default:s(()=>[e(B,null,{default:s(()=>[d.loading?(a(),l("div",j,[e(x,{showing:!0,size:"md",color:"primary"})])):(a(),l(n,{key:1},[e(L,{class:"text-primary top-toolbar q-pl-md",dense:""},{default:s(()=>[e(C,{class:"text-dark text-weight-bold",style:{overflow:"inherit"}},{default:s(()=>[p(r(i.title),1)]),_:1}),e(S),e(b,{onClick:o[0]||(o[0]=t=>d.dialog=!1),color:"white",square:"",unelevated:"","text-color":"grey",icon:"las la-times",dense:"","no-caps":"",size:"sm",class:"border-grey radius8"})]),_:1}),e(Q),e(O,{style:{"min-height":"50vh"},class:"scroll q-pa-none"},{default:s(()=>[y.hasData?(a(),g(A,{key:1,separator:""},{default:s(()=>[(a(!0),l(n,null,k(d.data,t=>(a(),g(z,{key:t},{default:s(()=>[e(q,null,{default:s(()=>[e(m,null,{default:s(()=>[p(r(t.item_name)+" ",1),t.price.size_name!=""?(a(),l(n,{key:0},[p(" ("+r(t.price.size_name)+") ",1)],64)):v("",!0)]),_:2},1024),e(m,null,{default:s(()=>[t.price.discount>0?(a(),l("p",X,[h("del",null,r(t.price.pretty_price),1),p(" "+r(t.price.pretty_price_after_discount)+" (x"+r(t.qty)+") ",1)])):(a(),l("p",Y,r(t.price.pretty_price)+" (x"+r(t.qty)+") ",1))]),_:2},1024),e(m,{caption:""},{default:s(()=>[(a(!0),l(n,null,k(t.addons,f=>(a(),l(n,{key:f},[p(r(f.subcategory_name)+" ",1),(a(!0),l(n,null,k(f.addon_items,c=>(a(),l("div",{key:c,class:"flex items-center q-mb-xs q-gutter-x-sm"},[h("div",null,r(c.sub_item_name),1),h("div",null," ("+r(c.qty)+" x "+r(c.pretty_price)+" = "+r(c.pretty_addons_total)+") ",1)]))),128))],64))),128))]),_:2},1024)]),_:2},1024),e(q,{side:""},{default:s(()=>[e(m,{class:"text-weight-bold text-overline"},{default:s(()=>[t.price.discount<=0?(a(),l("p",Z,r(t.price.pretty_total),1)):(a(),l("p",$,r(t.price.pretty_total_after_discount),1))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(a(),l("div",E,[h("div",U,r(i.$t("No data available")),1)]))]),_:1})],64)),!d.loading&&y.hasData?(a(),l(n,{key:2},[e(Q),e(I,{align:"right"},{default:s(()=>[N(e(b,{unelevated:"",color:"dark",label:i.$t("Close"),class:"radius28 q-pl-lg q-pr-lg q-pt-sm q-pb-sm",style:{height:"40px"},"no-caps":""},null,8,["label"]),[[P]]),e(b,{unelevated:"",color:"green",label:i.$t("Open"),class:"radius28 q-pl-lg q-pr-lg q-pt-sm q-pb-sm",style:{height:"40px"},"no-caps":"",onClick:o[1]||(o[1]=t=>y.openOrder())},null,8,["label"])]),_:1})],64)):v("",!0)]),_:1})]),_:1},8,["modelValue"])}var st=D(H,[["render",G]]);export{st as default};
