import{_ as v,u as w,A as l,n as o,a0 as n,d as a,q as h,$ as _,F as u,a2 as g,X as y,Y as m,p as c,as as b,Z as q,ap as f,a1 as V,at as Q,aA as D}from"./index.f6661a24.js";import{Q as $}from"./QToolbarTitle.0f4dda99.js";import{Q as C}from"./QToolbar.7bb603c7.js";import{Q as T}from"./QHeader.ba9c2ff9.js";import{Q as B}from"./QInnerLoading.c6ed50f8.js";import{Q as p}from"./QSelect.4e3956e1.js";import{Q as A}from"./QFooter.4f4f9530.js";import{Q as U}from"./QForm.4e86ee71.js";import{Q as x}from"./QPage.78315ab4.js";import{u as z}from"./AccessStore.ca0ffc27.js";import"./QResizeObserver.dc10e4c2.js";import"./QChip.5b52e54d.js";import"./QItemLabel.0d3c2221.js";import"./QMenu.c4f03f28.js";import"./selection.ef67fb9c.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";const E={name:"CreateShift",setup(e){const s=w(),k=z();return{DataStore:s,AccessStore:k}},data(){return{id:"",loading:!1,days_of_week:[],shift_name:"",first_seating:"00:00",last_seating:"00:00",shift_interval:900,status:"publish",time_interval:[],time_range:[],data:[]}},mounted(){this.id=this.$route.query.id,l.empty(this.id)||this.getShift()},computed:{isEdit(){return!l.empty(this.id)},hasData(){return Object.keys(this.data).length>0}},methods:{getShift(){this.loading=!0,l.fetchDataByTokenPost("getShift","id="+this.id).then(e=>{this.data=e.details,this.days_of_week=e.details.days_of_week,this.shift_name=e.details.shift_name,this.first_seating=e.details.first_seating,this.last_seating=e.details.last_seating,this.shift_interval=parseInt(e.details.shift_interval),this.status=e.details.status}).catch(e=>{}).then(e=>{this.loading=!1})},formSubmit(){let e={id:this.id,days_of_week:this.days_of_week,shift_name:this.shift_name,first_seating:this.first_seating,last_seating:this.last_seating,shift_interval:this.shift_interval,status:this.status};l.showLoadingBox("",this.$q),l.fetchDataByTokenPost(l.empty(this.id)?"CreateShift":"UpdateShift",e).then(s=>{l.notify("light-green",s.msg,"check_circle",this.$q),this.$router.replace({path:"/table/shifts"})}).catch(s=>{l.notify("red-5",s,"error_outline",this.$q)}).then(s=>{l.hideLoadingBox(this.$q)})},confirmDelete(){l.dialog(this.$t("Delete Confirmation"),this.$t("Are you sure you want to permanently delete the selected item?"),this.$t("Okay"),this.$t("Cancel"),this.$q).then(e=>{this.deleteRecords()}).catch(e=>{})},deleteRecords(){console.log(this.id),this.$q.loading.show({spinnerSize:30,spinnerColor:"primary"}),l.fetchDataByTokenPost("deleteShift","id="+this.id).then(e=>{this.$router.replace({path:"/table/shifts"})}).catch(e=>{}).then(e=>{this.$q.loading.hide()})}}},F={key:0,class:"text-center"},I={class:"q-ma-none text-grey"},L={class:"text-weight-medium"},N={class:"row"},P={class:"text-capitalize"};function O(e,s,k,d,i,r){return o(),n(u,null,[a(T,{class:_({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:h(()=>[a(C,null,{default:h(()=>[a(g,{onClick:s[0]||(s[0]=t=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),a($,{class:"text-weight-bold"},{default:h(()=>[r.isEdit?(o(),n(u,{key:0},[y(m(e.$t("Update Shift")),1)],64)):(o(),n(u,{key:1},[y(m(e.$t("Add Shift")),1)],64))]),_:1}),d.AccessStore.hasAccess("booking.shift_delete")?(o(),n(u,{key:0},[r.hasData?(o(),c(g,{key:0,onClick:r.confirmDelete,flat:"",round:"",dense:"",icon:"las la-trash-alt",color:e.$q.dark.mode?"white":"dark"},null,8,["onClick","color"])):b("",!0)],64)):b("",!0)]),_:1}),a(q)]),_:1},8,["class"]),a(x,{class:_([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode,"flex flex-center":r.isEdit&&!r.hasData},"q-pa-md"])},{default:h(()=>[i.loading?(o(),c(B,{key:0,showing:!0,color:"primary",size:"md"})):(o(),c(U,{key:1,onSubmit:r.formSubmit},{default:h(()=>[r.isEdit&&!r.hasData?(o(),n("div",F,[f("p",I,m(e.$t("No data available")),1)])):(o(),n(u,{key:1},[f("div",L,m(e.$t("Days of week")),1),f("div",N,[(o(!0),n(u,null,V(d.DataStore.day_list,t=>(o(),n("div",{key:t,class:"flex flex-center"},[f("div",null,[a(D,{modelValue:i.days_of_week,"onUpdate:modelValue":s[1]||(s[1]=S=>i.days_of_week=S),val:t.value,color:"primary"},null,8,["modelValue","val"])]),f("div",P,m(t.label),1)]))),128))]),a(Q,{modelValue:i.shift_name,"onUpdate:modelValue":s[2]||(s[2]=t=>i.shift_name=t),label:e.$t("Shift name"),"stack-label":"",outlined:"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),a(p,{modelValue:i.first_seating,"onUpdate:modelValue":s[3]||(s[3]=t=>i.first_seating=t),options:d.DataStore.time_range,label:e.$t("First seating"),"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","options","label","rules"]),a(p,{modelValue:i.last_seating,"onUpdate:modelValue":s[4]||(s[4]=t=>i.last_seating=t),options:d.DataStore.time_range,label:e.$t("Last seating"),"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","options","label","rules"]),a(p,{modelValue:i.shift_interval,"onUpdate:modelValue":s[5]||(s[5]=t=>i.shift_interval=t),options:d.DataStore.time_interval_list,label:e.$t("Interval"),"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t||this.$t("This field is required")]},null,8,["modelValue","options","label","rules"]),a(p,{modelValue:i.status,"onUpdate:modelValue":s[6]||(s[6]=t=>i.status=t),options:d.DataStore.status_list,label:e.$t("Status"),"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")],"emit-value":"","map-options":""},null,8,["modelValue","options","label","rules"]),a(A,null,{default:h(()=>[a(g,{type:"submit",color:"primary","text-color":"white",label:e.$t("Save"),unelevated:"",class:"full-width radius8",size:"lg","no-caps":""},null,8,["label"])]),_:1})],64))]),_:1},8,["onSubmit"]))]),_:1},8,["class"])],64)}var oe=v(E,[["render",O]]);export{oe as default};
