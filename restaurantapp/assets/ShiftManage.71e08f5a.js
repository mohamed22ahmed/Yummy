import{_ as D,u as q,A as i,n as r,a0 as f,d as a,q as o,$ as b,F as p,a2 as n,X as g,Y as k,Z as T,p as y,ap as u,at as _,ac as S,a3 as V}from"./index.f6661a24.js";import{Q as z}from"./QToolbarTitle.0f4dda99.js";import{Q as U}from"./QToolbar.7bb603c7.js";import{Q as $}from"./QHeader.ba9c2ff9.js";import{Q as B}from"./QInnerLoading.c6ed50f8.js";import{Q as m}from"./QSelect.4e3956e1.js";import{Q as v}from"./QDate.b5ca4044.js";import{Q as w}from"./QPopupProxy.98b4d203.js";import{Q as C}from"./QSpace.7af5fd36.js";import{Q as A}from"./QFooter.4f4f9530.js";import{Q as P}from"./QForm.4e86ee71.js";import{Q as x}from"./QPage.78315ab4.js";import{C as Q}from"./ClosePopup.6296f014.js";import{u as j}from"./DriverStore.21c2c9f6.js";import"./QResizeObserver.dc10e4c2.js";import"./QChip.5b52e54d.js";import"./QItemLabel.0d3c2221.js";import"./QMenu.c4f03f28.js";import"./selection.ef67fb9c.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./use-render-cache.3aae9b27.js";import"./date.6d02ab88.js";const F={name:"ShiftManage",components:{},data(){return{id:"",data:[],loading:!1,zone_id:"",date_shift:"",time_start:"",date_shift_end:"",time_end:"",max_allow_slot:0,status:"active"}},setup(e){const l=j(),c=q();return{DriverStore:l,DataStore:c}},created(){this.DriverStore.ScheduleAttributes("employee")},mounted(){this.id=this.$route.query.id,i.empty(this.id)||this.getData()},computed:{isEdit(){return!i.empty(this.id)},hasData(){return Object.keys(this.data).length>0},CheckData(){return!i.empty(this.id)&&Object.keys(this.data).length<=0}},methods:{getData(){this.loading=!0,i.fetchDataByTokenPost("getShiftSchedule","id="+this.id).then(e=>{this.data=e.details,this.zone_id=e.details.zone_id,this.date_shift=e.details.date_shift,this.date_shift_end=e.details.date_shift_end,this.time_start=e.details.time_start,this.time_end=e.details.time_end,this.max_allow_slot=e.details.max_allow_slot,this.status=e.details.status}).catch(e=>{i.notify("red-5",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})},formSubmit(){let e={id:this.id,zone_id:this.zone_id,date_shift:this.date_shift,time_start:this.time_start,date_shift_end:this.date_shift_end,time_end:this.time_end,max_allow_slot:this.max_allow_slot,status:this.status};i.showLoadingBox("",this.$q),i.fetchDataByTokenPost(i.empty(this.id)?"AddShiftSchedule":"UpdateShiftSchedule",e).then(l=>{i.notify("light-green",l.msg,"check_circle",this.$q),this.$router.replace({path:"/delivery-management/shifts"})}).catch(l=>{i.notify("red-5",l,"error_outline",this.$q)}).then(l=>{i.hideLoadingBox(this.$q)})}}},I={class:"row q-gutter-x-sm"},N={class:"row items-center justify-end"},E={class:"row q-gutter-x-sm"},L={class:"row items-center justify-end"};function M(e,l,c,d,s,h){return r(),f(p,null,[a($,{class:b({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:o(()=>[a(U,null,{default:o(()=>[a(n,{onClick:l[0]||(l[0]=t=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),a(z,{class:"text-weight-bold"},{default:o(()=>[h.isEdit?(r(),f(p,{key:0},[g(k(e.$t("Update Shift")),1)],64)):(r(),f(p,{key:1},[g(k(e.$t("Add Shift")),1)],64))]),_:1})]),_:1}),a(T)]),_:1},8,["class"]),a(x,{class:b([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode},"q-pa-md"])},{default:o(()=>[s.loading?(r(),y(B,{key:0,showing:!0,color:"primary",size:"md"})):(r(),y(P,{key:1,onSubmit:h.formSubmit},{default:o(()=>[a(m,{modelValue:s.zone_id,"onUpdate:modelValue":l[1]||(l[1]=t=>s.zone_id=t),label:e.$t("Zone"),options:d.DriverStore.getScheduleAttributes.zone_list,"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t>0||this.$t("This field is required")]},null,8,["modelValue","label","options","rules"]),u("div",I,[a(_,{modelValue:s.date_shift,"onUpdate:modelValue":l[3]||(l[3]=t=>s.date_shift=t),mask:"date",rules:["date"],"stack-label":"",outlined:"",color:"grey-5",label:e.$t("Date start"),class:"col"},{append:o(()=>[a(S,{name:"event",class:"cursor-pointer"},{default:o(()=>[a(w,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[a(v,{modelValue:s.date_shift,"onUpdate:modelValue":l[2]||(l[2]=t=>s.date_shift=t),color:"blue"},{default:o(()=>[u("div",N,[V(a(n,{label:e.$t("Close"),color:"dark",flat:"","no-caps":""},null,8,["label"]),[[Q]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label"]),a(m,{modelValue:s.time_start,"onUpdate:modelValue":l[4]||(l[4]=t=>s.time_start=t),label:e.$t("Time start"),options:d.DriverStore.getScheduleAttributes.time_range,"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t.length>0||this.$t("This field is required")],class:"col"},null,8,["modelValue","label","options","rules"])]),u("div",E,[a(_,{modelValue:s.date_shift_end,"onUpdate:modelValue":l[6]||(l[6]=t=>s.date_shift_end=t),mask:"date",rules:["date"],"stack-label":"",outlined:"",color:"grey-5",label:e.$t("Date end"),class:"col"},{append:o(()=>[a(S,{name:"event",class:"cursor-pointer"},{default:o(()=>[a(w,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[a(v,{modelValue:s.date_shift_end,"onUpdate:modelValue":l[5]||(l[5]=t=>s.date_shift_end=t),color:"blue"},{default:o(()=>[u("div",L,[V(a(n,{label:e.$t("Close"),color:"dark",flat:"","no-caps":""},null,8,["label"]),[[Q]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label"]),a(m,{modelValue:s.time_end,"onUpdate:modelValue":l[7]||(l[7]=t=>s.time_end=t),label:e.$t("Time start"),options:d.DriverStore.getScheduleAttributes.time_range,"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t.length>0||this.$t("This field is required")],class:"col"},null,8,["modelValue","label","options","rules"])]),a(_,{modelValue:s.max_allow_slot,"onUpdate:modelValue":l[8]||(l[8]=t=>s.max_allow_slot=t),label:e.$t("Max allow slot"),type:"number","stack-label":"",outlined:"",color:"grey-5",hint:e.$t("Number of driver that can take this shift. default value is 0 for unlimited")},null,8,["modelValue","label","hint"]),a(C,{class:"q-pa-md"}),a(m,{modelValue:s.status,"onUpdate:modelValue":l[9]||(l[9]=t=>s.status=t),options:d.DataStore.customer_status,label:e.$t("Status"),"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","options","label","rules"]),a(A,null,{default:o(()=>[a(n,{type:"submit",color:"primary","text-color":"white",label:e.$t("Save"),unelevated:"",class:"full-width radius8",size:"lg","no-caps":"",disable:h.CheckData},null,8,["label","disable"])]),_:1})]),_:1},8,["onSubmit"]))]),_:1},8,["class"])],64)}var fe=D(F,[["render",M]]);export{fe as default};
