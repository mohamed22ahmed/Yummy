import{_ as Q,ay as f,u as D,A as o,m as h,n as l,p as d,q as n,d as a,a2 as m,a0 as g,X as p,Y as c,F as k,as as C,Z as I,$ as u,ap as $,at as w,az as _}from"./index.f6661a24.js";import{Q as S}from"./QToolbarTitle.0f4dda99.js";import{Q as T}from"./QToolbar.7bb603c7.js";import{Q as A}from"./QHeader.ba9c2ff9.js";import{Q as V}from"./QInnerLoading.c6ed50f8.js";import{Q as v}from"./QSpace.7af5fd36.js";import{Q as E}from"./QSelect.4e3956e1.js";import{Q as B}from"./QFooter.4f4f9530.js";import{Q as P}from"./QForm.4e86ee71.js";import{Q as z}from"./QPage.78315ab4.js";import{Q as L}from"./QPullToRefresh.a19885b1.js";import"./QResizeObserver.dc10e4c2.js";import"./QChip.5b52e54d.js";import"./QItemLabel.0d3c2221.js";import"./QMenu.c4f03f28.js";import"./selection.ef67fb9c.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./TouchPan.ca911d69.js";import"./touch.9135741d.js";const N={name:"ManageAddonCategory",components:{ConfirmDialog:f(()=>_(()=>import("./ConfirmDialog.5cba1a11.js"),["assets/ConfirmDialog.5cba1a11.js","assets/QToolbarTitle.0f4dda99.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QToolbar.7bb603c7.js"])),ItemTranslation:f(()=>_(()=>import("./ItemTranslation.1087e138.js"),["assets/ItemTranslation.1087e138.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QSpace.7af5fd36.js","assets/QExpansionItem.f7624880.js","assets/QItemLabel.0d3c2221.js","assets/QSlideTransition.07e7f5c6.js","assets/QList.16ddb51a.js"]))},data(){return{loading_get:!1,loading:!1,id:0,name:"",status:"publish",fields:[{name:"name",title:this.$t("Enter name"),type:"text"}],data_dialog:{title:this.$t("Delete Confirmation"),subtitle:this.$t("Are you sure you want to permanently delete the selected item?"),cancel:this.$t("Cancel"),confirm:this.$t("Delete")},translation_data:[],translation:[],edit_found:!0}},setup(t){return{DataStore:D()}},computed:{isEdit(){return this.id>0}},created(){this.edit_found=!0,this.id=this.$route.query.id,this.id>0&&this.getData()},methods:{refresh(t){this.getData(t)},getData(t){this.loading_get=!0,o.fetchDataByTokenPost("getIngredients","id="+this.id).then(e=>{this.name=e.details.name,this.status=e.details.status,this.translation=e.details.translation}).catch(e=>{this.edit_found=!1,o.notify("dark",e,"error",this.$q)}).then(e=>{this.loading_get=!1,o.empty(t)||t()})},afterInput(t){this.translation_data=t},onSubmit(){this.loading=!0,o.fetchDataByToken("addIngredients",{id:this.id,name:this.name,status:this.status.value?this.status.value:this.status,translation_data:this.translation_data}).then(t=>{o.notify(this.$q.dark.mode?"grey600":"light-green",t.msg,"check_circle",this.$q),this.$router.push("/menu")}).catch(t=>{o.notify("dark",t,"error",this.$q)}).then(t=>{this.loading=!1})},confirmDelete(){this.$refs.confirm_dialog.dialog=!0},afterConfirm(){this.$refs.confirm_dialog.dialog=!1,o.showLoadingBox("",this.$q),o.fetchDataByTokenPost("deleteIngredients","id="+this.id).then(t=>{this.$router.push("/menu")}).catch(t=>{o.notify("dark",t,"error",this.$q)}).then(t=>{o.hideLoadingBox(this.$q)})}}},R={class:"q-gutter-md"};function x(t,e,F,y,i,r){const b=h("ItemTranslation"),q=h("ConfirmDialog");return l(),d(L,{onRefresh:r.refresh},{default:n(()=>[a(A,{class:u({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode})},{default:n(()=>[a(T,null,{default:n(()=>[a(m,{onClick:e[0]||(e[0]=s=>t.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:t.$q.dark.mode?"white":"dark"},null,8,["color"]),a(S,{class:"text-weight-bold"},{default:n(()=>[r.isEdit?(l(),g(k,{key:0},[p(c(t.$t("Edit Ingredients")),1)],64)):(l(),g(k,{key:1},[p(c(t.$t("Add Ingredients")),1)],64))]),_:1}),r.isEdit&&!i.loading_get?(l(),d(m,{key:0,round:"",color:"mygrey","text-color":"dark",icon:"las la-trash",size:"sm",unelevated:"",onClick:r.confirmDelete},null,8,["onClick"])):C("",!0)]),_:1}),a(I)]),_:1},8,["class"]),a(z,{class:u([{"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode},"q-pa-md"])},{default:n(()=>[i.loading_get?(l(),d(V,{key:0,showing:!0,color:"primary",size:"md"})):(l(),d(P,{key:1,onSubmit:r.onSubmit},{default:n(()=>[a(v,{class:"q-pa-xs"}),$("div",R,[a(w,{outlined:"",modelValue:i.name,"onUpdate:modelValue":e[1]||(e[1]=s=>i.name=s),label:t.$t("Name"),"stack-label":"",color:"grey-5","lazy-rules":"",rules:[s=>s&&s.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),a(E,{outlined:"",modelValue:i.status,"onUpdate:modelValue":e[2]||(e[2]=s=>i.status=s),label:t.$t("Status"),color:"grey-5",options:y.DataStore.status_list,"stack-label":"",behavior:"dialog","transition-show":"fade","transition-hide":"fade"},null,8,["modelValue","label","options"]),a(b,{ref:"item_translation",fields:i.fields,update:r.isEdit,data:i.translation,onAfterInput:r.afterInput},null,8,["fields","update","data","onAfterInput"])]),a(B,{class:u(["q-pl-md q-pr-md q-pb-xs",{"bg-mydark ":t.$q.dark.mode,"bg-white ":!t.$q.dark.mode}])},{default:n(()=>[a(m,{type:"submit",color:"primary","text-color":"white",label:t.$t("Submit"),unelevated:"",class:"full-width radius8",size:"lg","no-caps":"",loading:i.loading,disable:!i.edit_found},null,8,["label","loading","disable"])]),_:1},8,["class"])]),_:1},8,["onSubmit"])),a(q,{ref:"confirm_dialog",data:i.data_dialog,onAfterConfirm:r.afterConfirm},null,8,["data","onAfterConfirm"])]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var lt=Q(N,[["render",x]]);export{lt as default};
