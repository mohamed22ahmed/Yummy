import{_ as k,A as o,n as d,a0 as m,d as l,q as s,$ as f,F as h,a2 as p,X as b,Y as g,Z as y,p as v,at as _,ac as S,ap as c,a3 as V}from"./index.f6661a24.js";import{Q}from"./QToolbarTitle.0f4dda99.js";import{Q as D}from"./QToolbar.7bb603c7.js";import{Q as q}from"./QHeader.ba9c2ff9.js";import{Q as w}from"./QInnerLoading.c6ed50f8.js";import{Q as n}from"./QSelect.4e3956e1.js";import{Q as T}from"./QDate.b5ca4044.js";import{Q as z}from"./QPopupProxy.98b4d203.js";import{Q as A}from"./QFooter.4f4f9530.js";import{Q as $}from"./QForm.4e86ee71.js";import{Q as U}from"./QPage.78315ab4.js";import{C as B}from"./ClosePopup.6296f014.js";import{u as C}from"./DriverStore.21c2c9f6.js";import"./QResizeObserver.dc10e4c2.js";import"./QChip.5b52e54d.js";import"./QItemLabel.0d3c2221.js";import"./QMenu.c4f03f28.js";import"./selection.ef67fb9c.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./use-render-cache.3aae9b27.js";import"./date.6d02ab88.js";const P={name:"ScheduleManage",components:{},data(){return{id:"",data:[],loading:!1,zone_id:"",driver_id:"",vehicle_id:"",date_start:"",time_start:"",time_end:"",instructions:""}},setup(e){return{DriverStore:C()}},created(){this.DriverStore.ScheduleAttributes("employee")},mounted(){this.id=this.$route.query.id,o.empty(this.id)||this.getData()},computed:{isEdit(){return!o.empty(this.id)},hasData(){return Object.keys(this.data).length>0},CheckData(){return!o.empty(this.id)&&Object.keys(this.data).length<=0}},methods:{getData(){this.loading=!0,o.fetchDataByTokenPost("getSchedule","id="+this.id).then(e=>{this.data=e.details,this.zone_id=e.details.zone_id,this.driver_id=e.details.driver_id,this.vehicle_id=e.details.vehicle_id,this.date_start=e.details.date_start,this.time_start=e.details.time_start,this.time_end=e.details.time_end,this.instructions=e.details.instructions}).catch(e=>{o.notify("red-5",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})},formSubmit(){let e={id:this.id,zone_id:this.zone_id,driver_id:this.driver_id,vehicle_id:this.vehicle_id,date_start:this.date_start,time_start:this.time_start,time_end:this.time_end,instructions:this.instructions};o.showLoadingBox("",this.$q),o.fetchDataByTokenPost(o.empty(this.id)?"AddSchedule":"UpdateSchedule",e).then(i=>{o.notify("light-green",i.msg,"check_circle",this.$q),this.$router.replace({path:"/delivery-management/schedule"})}).catch(i=>{o.notify("red-5",i,"error_outline",this.$q)}).then(i=>{o.hideLoadingBox(this.$q)})}}},I={class:"row items-center justify-end"},F={class:"row q-gutter-x-sm"},j={class:"row q-gutter-x-sm"};function E(e,i,L,a,r,u){return d(),m(h,null,[l(q,{class:f({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:s(()=>[l(D,null,{default:s(()=>[l(p,{onClick:i[0]||(i[0]=t=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),l(Q,{class:"text-weight-bold"},{default:s(()=>[u.isEdit?(d(),m(h,{key:0},[b(g(e.$t("Update Schedule")),1)],64)):(d(),m(h,{key:1},[b(g(e.$t("Add Schedule")),1)],64))]),_:1})]),_:1}),l(y)]),_:1},8,["class"]),l(U,{class:f([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode},"q-pa-md"])},{default:s(()=>[r.loading?(d(),v(w,{key:0,showing:!0,color:"primary",size:"md"})):(d(),v($,{key:1,onSubmit:u.formSubmit},{default:s(()=>[l(n,{modelValue:r.zone_id,"onUpdate:modelValue":i[1]||(i[1]=t=>r.zone_id=t),label:e.$t("Zone"),options:a.DriverStore.getScheduleAttributes.zone_list,"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t>0||this.$t("This field is required")]},null,8,["modelValue","label","options","rules"]),l(_,{modelValue:r.date_start,"onUpdate:modelValue":i[3]||(i[3]=t=>r.date_start=t),mask:"date",label:e.$t("Date start"),rules:["date"],"stack-label":"",outlined:"",color:"grey-5"},{append:s(()=>[l(S,{name:"event",class:"cursor-pointer"},{default:s(()=>[l(z,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[l(T,{modelValue:r.date_start,"onUpdate:modelValue":i[2]||(i[2]=t=>r.date_start=t),color:"blue"},{default:s(()=>[c("div",I,[V(l(p,{label:e.$t("Close"),color:"dark",flat:"","no-caps":""},null,8,["label"]),[[B]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label"]),c("div",F,[l(n,{modelValue:r.time_start,"onUpdate:modelValue":i[4]||(i[4]=t=>r.time_start=t),label:e.$t("Time start"),options:a.DriverStore.getScheduleAttributes.time_range,"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t.length>0||this.$t("This field is required")],class:"col"},null,8,["modelValue","label","options","rules"]),l(n,{modelValue:r.time_end,"onUpdate:modelValue":i[5]||(i[5]=t=>r.time_end=t),label:e.$t("Time end"),options:a.DriverStore.getScheduleAttributes.time_range,"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t.length>0||this.$t("This field is required")],class:"col"},null,8,["modelValue","label","options","rules"])]),c("div",j,[l(n,{modelValue:r.driver_id,"onUpdate:modelValue":i[6]||(i[6]=t=>r.driver_id=t),label:e.$t("Select Driver"),options:a.DriverStore.getScheduleAttributes.driver_list,"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t>0||this.$t("This field is required")],class:"col"},null,8,["modelValue","label","options","rules"]),l(n,{modelValue:r.vehicle_id,"onUpdate:modelValue":i[7]||(i[7]=t=>r.vehicle_id=t),label:e.$t("Select Car"),options:a.DriverStore.getScheduleAttributes.vehicle_list,"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t>0||this.$t("This field is required")],class:"col"},null,8,["modelValue","label","options","rules"])]),l(_,{modelValue:r.instructions,"onUpdate:modelValue":i[8]||(i[8]=t=>r.instructions=t),label:e.$t("Instructions"),"stack-label":"",outlined:"",color:"grey-5",hint:e.$t("Add instructions to driver")},null,8,["modelValue","label","hint"]),l(A,null,{default:s(()=>[l(p,{type:"submit",color:"primary","text-color":"white",label:e.$t("Save"),unelevated:"",class:"full-width radius8",size:"lg","no-caps":"",disable:u.CheckData},null,8,["label","disable"])]),_:1})]),_:1},8,["onSubmit"]))]),_:1},8,["class"])],64)}var ne=k(P,[["render",E]]);export{ne as default};
