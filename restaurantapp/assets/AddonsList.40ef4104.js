import{_ as w,ay as A,az as M,u as I,A as m,m as b,n as o,a0 as c,d as s,p as r,F as u,q as a,a1 as L,a5 as h,X as p,Y as _,ap as d,as as l,a2 as v,b7 as B,b8 as T,a4 as V,ar as z}from"./index.f6661a24.js";import{Q as N}from"./QInnerLoading.c6ed50f8.js";import{Q as E}from"./QSpace.7af5fd36.js";import{Q}from"./QImg.b7890c8b.js";import{Q as f}from"./QItemLabel.0d3c2221.js";import{Q as q}from"./QList.16ddb51a.js";import{Q as P}from"./QExpansionItem.f7624880.js";import{u as O}from"./MenuStore.420c66e5.js";import{u as H}from"./AccessStore.ca0ffc27.js";import"./QSlideTransition.07e7f5c6.js";const j={name:"AddonsList",components:{ConfirmDialog:A(()=>M(()=>import("./ConfirmDialog.5cba1a11.js"),["assets/ConfirmDialog.5cba1a11.js","assets/QToolbarTitle.0f4dda99.js","assets/index.f6661a24.js","assets/index.1593f83d.css","assets/QToolbar.7bb603c7.js"])),ListNoData:A(()=>M(()=>import("./ListNoData.572f63b8.js"),["assets/ListNoData.572f63b8.js","assets/index.f6661a24.js","assets/index.1593f83d.css"]))},data(){return{subitem_id:0}},setup(){const t=O(),k=I(),g=H();return{MenuStore:t,DataStore:k,AccessStore:g}},created(){this.MenuStore.hadAddonCategory()?this.$route.query.refresh==1&&this.MenuStore.geStoreAddonMenu():this.MenuStore.geStoreAddonMenu()},methods:{confirmDelete(t){this.subitem_id=t,this.$refs.confirm_dialog.dialog=!0},afterConfirm(){this.$refs.confirm_dialog.dialog=!1,m.showLoadingBox("",this.$q),m.fetchDataByTokenPost("deleteAddonItem","id="+this.subitem_id).then(t=>{this.$emit("afterDeleteitem")}).catch(t=>{m.notify("dark",t,"error",this.$q)}).then(t=>{m.hideLoadingBox(this.$q)})},setAvailable(t,k,g){m.showLoadingBox("",this.$q),m.fetchDataByTokenPost("setAddonItemAvailable","id="+g+"&active="+t).then(e=>{}).catch(e=>{m.notify("dark",e,"error",this.$q)}).then(e=>{m.hideLoadingBox(this.$q)})}}},F={class:"text-grey ellipsis-2-lines font12 line-normal"},R=["innerHTML"],U={class:"text-grey"},$={class:"font13 no-margin line-normal"},X={class:"text-grey ellipsis-2-lines font12 line-normal"},Y=["innerHTML"],G={key:0,class:"text-grey-7 font12 text-weight-medium"},J={class:"column items-center col-12"},K={class:"col"},W={class:"col"};function Z(t,k,g,e,ee,S){const x=b("ListNoData"),D=b("ConfirmDialog");return o(),c(u,null,[s(N,{showing:e.MenuStore.loading_addon,color:"primary",size:"md","label-class":"dark"},null,8,["showing"]),s(E,{class:"q-pa-xs"}),e.MenuStore.addon.length<=0&&!e.MenuStore.loading_addon?(o(),r(x,{key:0,title:t.$t("No available data"),subtitle:t.$t("Addons and addon item will show here"),set_height:"min-height: calc(70vh)"},null,8,["title","subtitle"])):(o(),c(u,{key:1},[e.AccessStore.hasAccess("food.addoncategory")?(o(),r(q,{key:0,separator:""},{default:a(()=>[(o(!0),c(u,null,L(e.MenuStore.addon,i=>(o(),r(P,{key:i},{header:a(()=>[s(h,{avatar:""},{default:a(()=>[s(Q,{src:i.url_image,lazy:"",fit:"cover",style:{height:"60px",width:"60px"},class:"radius8","spinner-color":"secondary","spinner-size":"sm"},null,8,["src"])]),_:2},1024),s(h,null,{default:a(()=>[s(f,null,{default:a(()=>[p(_(i.subcategory_name),1)]),_:2},1024),i.subcategory_description?(o(),r(f,{key:0,caption:""},{default:a(()=>[d("div",F,[d("span",{innerHTML:i.subcategory_description},null,8,R)])]),_:2},1024)):l("",!0),s(f,null,{default:a(()=>[i.subcat_id>0?(o(),r(v,{key:0,flat:"",label:t.$t("Edit Addon"),"no-caps":"",size:"sm",color:"primary",class:"q-pa-none min-height text-weight-bold",to:{path:"/addcategory/edit",query:{subcat_id:i.subcat_id}}},null,8,["label","to"])):l("",!0)]),_:2},1024)]),_:2},1024),s(h,{side:""},{default:a(()=>[s(f,{caption:""},{default:a(()=>[p(_(Object.keys(i.items).length)+" ",1),Object.keys(i.items).length>0?(o(),c(u,{key:0},[p(_(t.$t("Items")),1)],64)):(o(),c(u,{key:1},[p(_(t.$t("Item")),1)],64))]),_:2},1024)]),_:2},1024)]),default:a(()=>[e.AccessStore.hasAccess("food.addonitem")?(o(),r(B,{key:0},{default:a(()=>[Object.keys(i.items).length<=0?(o(),r(T,{key:0,class:"text-center"},{default:a(()=>[d("p",U,_(t.$t("No available items")),1)]),_:1})):(o(),r(q,{key:1,separator:""},{default:a(()=>[(o(!0),c(u,null,L(i.items,n=>(o(),c(u,{key:n},[e.MenuStore.addon_items[n]?(o(),r(V,{key:0,clickable:""},{default:a(()=>[e.MenuStore.addon_items[n].has_photo?(o(),r(h,{key:0,avatar:""},{default:a(()=>[s(Q,{src:e.MenuStore.addon_items[n].url_image,lazy:"",fit:"cover",style:{height:"60px",width:"60px"},class:"radius8","spinner-color":"secondary","spinner-size":"sm"},null,8,["src"])]),_:2},1024)):l("",!0),s(h,null,{default:a(()=>[s(f,null,{default:a(()=>[d("div",$,_(e.MenuStore.addon_items[n].sub_item_name),1),d("div",X,[d("span",{innerHTML:e.MenuStore.addon_items[n].item_description},null,8,Y)]),e.MenuStore.addon_items[n].price?(o(),c("div",G,_(e.MenuStore.addon_items[n].price),1)):l("",!0)]),_:2},1024),e.AccessStore.hasAccess("food.addonitem_update")?(o(),r(f,{key:0,class:"q-gutter-sm"},{default:a(()=>[s(z,{label:t.$t("Available"),modelValue:e.MenuStore.addon_items[n].available,"onUpdate:modelValue":[y=>e.MenuStore.addon_items[n].available=y,(y,C)=>S.setAvailable(y,C,e.MenuStore.addon_items[n].sub_item_id)]},null,8,["label","modelValue","onUpdate:modelValue"])]),_:2},1024)):l("",!0)]),_:2},1024),s(h,{side:"",class:"row items-stretch"},{default:a(()=>[d("div",J,[d("div",K,[s(v,{round:"",color:t.$q.dark.mode?"grey600":"primary","text-color":t.$q.dark.mode?"grey300":"white",icon:"las la-edit",size:"xs",unelevated:"",to:{path:"/addonitems/edit",query:{id:e.MenuStore.addon_items[n].sub_item_id}}},null,8,["color","text-color","to"])]),d("div",W,[e.AccessStore.hasAccess("food.addonitem_delete")?(o(),r(v,{key:0,round:"",color:t.$q.dark.mode?"grey600":"mygrey","text-color":t.$q.dark.mode?"grey300":"dark",icon:"las la-trash",size:"xs",unelevated:"",onClick:y=>S.confirmDelete(e.MenuStore.addon_items[n].sub_item_id)},null,8,["color","text-color","onClick"])):l("",!0)])])]),_:2},1024)]),_:2},1024)):l("",!0)],64))),128))]),_:2},1024))]),_:2},1024)):l("",!0)]),_:2},1024))),128))]),_:1})):l("",!0)],64)),s(D,{ref:"confirm_dialog",data:e.DataStore.data_dialog,onAfterConfirm:S.afterConfirm},null,8,["data","onAfterConfirm"])],64)}var ce=w(j,[["render",Z]]);export{ce as default};
