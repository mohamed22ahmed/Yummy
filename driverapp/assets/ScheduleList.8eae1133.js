import{Q as o}from"./QItemLabel.534f2eb0.js";import{b7 as k,_ as S,u as $,X as y,q as n,t as v,v as t,f as e,ae as _,Z as d,a1 as s,aj as b,a3 as Q,F as c,V as w,$ as P,ak as x,aa as p,a7 as f,a0 as l}from"./index.57d98e6b.js";import{Q as D}from"./QList.9b1deb90.js";import{Q as L}from"./QInfiniteScroll.0033dd1c.js";import{Q as N}from"./QPage.76c085e2.js";import{Q as B}from"./QPullToRefresh.b207fbbb.js";import"./TouchPan.8da352e0.js";import"./selection.b1db311e.js";import"./format.de7e9769.js";const T=k("shifthistory",{state:()=>({loading:!1,data:[]}),getters:{doubleCount(a){return a.counter*2}},actions:{shiftHistory(){}}}),V={name:"ScheduleList",components:{},setup(){const a=$(),r=T();return{Activity:a,history:r}},data(){return{loading:!1,data:[],loading_count:2,page:0}},created(){this.Activity.setTitle(this.$t("My Schedule"))},computed:{hasData(){return Object.keys(this.data).length>0}},watch:{page(a,r){this.page>0?this.loading_count=1:this.loading_count=2}},methods:{getHistory(a,r){this.loading=!0,y.fetchDataByTokenPost("shifthistory","page="+a).then(h=>{this.page=a,this.data.push(h.details.data)}).catch(h=>{this.$refs.nscroll.stop()}).then(h=>{r(),this.loading=!1})},resetPagination(){this.data=[],this.page=0,this.$refs.nscroll.reset(),this.$refs.nscroll.resume(),this.$refs.nscroll.trigger()},refresh(a){this.resetPagination(),y.fetchDataByTokenPost("shifthistory","page="+1).then(r=>{this.page=index,this.data.push(r.details.data)}).catch(r=>{this.$refs.nscroll.stop()}).then(r=>{a()})}}},A={class:"q-pa-md"},C={key:0,class:"text-center"},I={class:"font16 text-weight-bold"},q={class:"font11"},H={class:"flex flex-center full-width q-pa-xl",style:{"min-height":"calc(40vh)"}};function F(a,r,h,R,g,u){return n(),v(B,{onRefresh:u.refresh},{default:t(()=>[e(N,{class:P({"flex flex-center":!u.hasData&&!g.loading})},{default:t(()=>[_("div",A,[e(L,{ref:"nscroll",onLoad:u.getHistory,offset:300},{default:t(()=>[!u.hasData&&!g.loading?(n(),d("div",C,[_("div",I,s(a.$t("No available data")),1),_("p",q,s(a.$t("Pull down the page to refresh")),1)])):b("",!0),(n(!0),d(c,null,Q(g.data,m=>(n(),d(c,{key:m},[(n(!0),d(c,null,Q(m,i=>(n(),v(x,{key:i,class:"no-shadow q-mb-md"},{default:t(()=>[e(D,{separator:""},{default:t(()=>[e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[e(o,{class:"text-weight-bold"},{default:t(()=>[l(s(a.$t("Schedule")),1)]),_:1}),e(o,{lines:"2",class:"font12",caption:""},{default:t(()=>[l(s(i.time_start)+" - "+s(i.time_end),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(o,{class:"text-weight-boldx"},{default:t(()=>[l(s(a.$t("Start/Finish at")),1)]),_:1}),e(o,{lines:"2",class:"font12",caption:""},{default:t(()=>[i.shift_time_ended?(n(),d(c,{key:0},[l(s(i.shift_time_started)+" - "+s(i.shift_time_ended),1)],64)):(n(),d(c,{key:1},[l(s(a.$t("N/A")),1)],64))]),_:2},1024)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[e(o,{caption:""},{default:t(()=>[l(s(a.$t("Vehicle Type")),1)]),_:1}),e(o,{lines:"2",class:"font12"},{default:t(()=>[l(s(i.maker),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(o,{class:"text-weight-boldx"},{default:t(()=>[l(s(a.$t("Deliveries")),1)]),_:1}),e(o,{lines:"2",class:"font12",caption:""},{default:t(()=>[l(s(i.total_delivered),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[e(o,{caption:""},{default:t(()=>[l(s(a.$t("Plate #")),1)]),_:1}),e(o,{lines:"2",class:"font12"},{default:t(()=>[l(s(i.vehicle.plate_number),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[e(o,{caption:""},{default:t(()=>[l(s(a.$t("Notes")),1)]),_:1}),e(o,{lines:"2",class:"font12"},{default:t(()=>[l(s(i.instructions),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))],64))),128))]),loading:t(()=>[_("div",H,[e(w,{color:"primary",size:"2em"})])]),_:1},8,["onLoad"])])]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var K=S(V,[["render",F]]);export{K as default};
