import{_ as q,u as k,X as o,be as Q,p as B,q as r,t as p,v as l,f as t,ae as i,a4 as c,Z as h,a1 as n,F as m,ak as D,V as g,aa as u,a7 as d,a0 as y,a2 as T,d0 as S}from"./index.57d98e6b.js";import{Q as C}from"./QBtnGroup.a6a62eee.js";import{Q as f}from"./QSpace.6257f203.js";import{Q as x}from"./QSkeleton.27b7e3fa.js";import{Q as b}from"./QList.9b1deb90.js";import{Q as N}from"./QPage.76c085e2.js";import{Q as E}from"./QPullToRefresh.b207fbbb.js";import{V as L}from"./vue3-apexcharts.common.d10fa6dd.js";import"./TouchPan.8da352e0.js";import"./selection.b1db311e.js";import"./format.de7e9769.js";const O={name:"EarningsDashboard",components:{apexchart:L},data(){return{loading:!1,first_loading:!1,loading_earnings:!1,date_start:"",date_end:"",chart_type:"",balance:[],can_cashout:!0,earnings:[],charts_data:[],max_cashout:0,summary:[],date_range:"",payload:[],chartOptions:{chart:{id:"vuechart",type:"bar",height:"auto",toolbar:{show:!1},parentHeightOffset:0},plotOptions:{bar:{colors:{ranges:[{from:-999999,to:0,color:"#f44336"}]}}},dataLabels:{enabled:!1,position:"bottom"},colors:["#81c784"],axisBorder:{show:!1},grid:{show:!1,padding:{left:0,right:0}},xaxis:{categories:["M","T","W","T","F"]},yaxis:{show:!1}},series:[{name:"series-1",data:[1,-2,3,4,5]}]}},setup(){return{Activity:k()}},created(){this.date_start=o.getDateNow(),this.date_end=o.getDateNow(),this.chart_type="daily",this.Activity.setTitle(this.$t("Earnings")),this.refresh(null)},computed:{},methods:{setDate(e){this.chart_type=e,e=="daily"?(this.date_start=o.getDateNow(),this.date_end=o.getDateNow()):(this.date_start=Q.now().minus({days:6}).toFormat("yyyy-MM-dd"),this.date_end=o.getDateNow()),this.refresh(null)},refresh(e){this.getWalletBalance(e),this.getEarning(e)},getEarning(e){this.first_loading?o.showLoadingBox("",this.$q):this.loading_earnings=!0,o.fetchDataByTokenPost("getEarnings","date_start="+this.date_start+"&date_end="+this.date_end+"&chart_type="+this.chart_type).then(s=>{this.first_loading=!0,this.date_range=s.details.date_range,this.earnings=s.details.balance,this.charts_data=s.details.charts_data,this.max_cashout=s.details.max_cashout,this.summary=s.details.summary,this.chartOptions={chart:{id:"vuechart",type:"bar",height:"auto",toolbar:{show:!1},parentHeightOffset:0},plotOptions:{bar:{colors:{ranges:[{from:-999999,to:0,color:"#f44336"}]}}},dataLabels:{enabled:!1,position:"bottom"},colors:["#81c784"],axisBorder:{show:!1},grid:{show:!1,padding:{left:0,right:0}},xaxis:{categories:this.charts_data.date_range},yaxis:{show:!1}},this.series=[{name:this.$t("Sale"),data:this.charts_data.data}]}).catch(s=>{this.summary=[]}).then(s=>{this.first_loading&&o.hideLoadingBox(this.$q),this.loading_earnings=!1,o.empty(e)||e()})},getWalletBalance(e){this.first_loading?o.showLoadingBox("",this.$q):this.loading=!0,o.fetchDataByTokenPost2("getWalletBalance",{payload:this.payload}).then(s=>{this.balance=s.details.balance,this.cashout_miximum=s.details.cashout_miximum,this.balance.raw>0&&(this.can_cashout=!1)}).catch(s=>{}).then(s=>{this.first_loading&&o.hideLoadingBox(this.$q),this.loading=!1,o.empty(e)||e()})}}},V={class:"q-pl-md q-pr-md q-pt-xs"},z={class:"row q-col-gutter-md"},A={class:"col"},P={key:1,class:"text-white q-pa-sm radius8 bg-blue row items-center cursor-pointer"},W={class:"font12"},F={class:"text-weight-bold text-h6"},I={class:"col text-right"},M=i("div",{style:{height:"34px"}},null,-1),R={class:"q-pl-md q-pr-md"},H={key:0,class:"flex flex-center full-width q-pa-xl",style:{"min-height":"calc(25vh)"}},G={class:"q-pl-md q-pr-md q-mt-sm"},X={class:"font12 text-dark"},Z={class:"text-center q-pa-md"},j={key:0,class:"flex flex-center full-width q-pa-xl",style:{"min-height":"calc(20vh)"}},J={class:"text-h7"},K={class:"font13"};function U(e,s,Y,$,a,_){const v=B("apexchart");return r(),p(E,{onRefresh:_.refresh},{default:l(()=>[t(N,null,{default:l(()=>[i("div",V,[i("div",z,[i("div",A,[t(C,{unelevated:""},{default:l(()=>[t(c,{color:a.chart_type=="daily"?"primary":"white","text-color":a.chart_type=="daily"?"white":"dark",label:e.$t("Daily"),"no-caps":"",size:"sm",onClick:s[0]||(s[0]=w=>_.setDate("daily"))},null,8,["color","text-color","label"]),t(c,{color:a.chart_type=="daily"?"white":"primary","text-color":a.chart_type=="daily"?"dark":"white",label:e.$t("Weekly"),"no-caps":"",size:"sm",onClick:s[1]||(s[1]=w=>_.setDate("weekly"))},null,8,["color","text-color","label"])]),_:1}),t(f,{class:"q-pa-xs"}),a.loading_earnings?(r(),p(x,{key:0,height:"65px",square:""})):(r(),h("div",P,[i("div",null,[i("div",W,n(e.$t("Total earnings")),1),i("div",F,n(a.earnings.pretty),1)])]))]),i("div",I,[a.loading_earnings?(r(),h(m,{key:0},[M,t(x,{height:"65px",square:""})],64)):(r(),p(v,{key:1,type:"bar",options:a.chartOptions,series:a.series,height:"112"},null,8,["options","series"]))])])]),t(f,{class:"q-pa-xs"}),i("div",R,[t(D,{class:"no-shadow q-pt-sm"},{default:l(()=>[a.loading_earnings?(r(),h("div",H,[t(g,{color:"primary",size:"2em"})])):(r(),h(m,{key:1},[i("div",G,[i("div",X,n(a.date_range),1)]),t(b,{separator:"",dense:""},{default:l(()=>[t(u,null,{default:l(()=>[t(d,null,{default:l(()=>[y(n(e.$t("Total Trips")),1)]),_:1}),t(d,{side:""},{default:l(()=>[y(n(a.summary.total_trip),1)]),_:1})]),_:1})]),_:1}),i("div",Z,[t(c,{outline:"",flat:"",label:e.$t("View details"),"no-caps":"",color:"primary",to:{name:"earning-details",query:{start:a.date_start,end:a.date_end,chart_type:a.chart_type}}},null,8,["label","to"])])],64)),t(T),t(S,null,{default:l(()=>[a.loading_earnings?(r(),h("div",j,[t(g,{color:"primary",size:"2em"})])):(r(),h(m,{key:1},[t(b,{class:"dense"},{default:l(()=>[t(u,{class:"q-ma-none q-pa-none",clickable:"",to:"/account/cashout-history"},{default:l(()=>[t(d,null,{default:l(()=>[i("div",J,n(e.$t("Balance"))+" : "+n(a.balance.pretty),1)]),_:1}),t(d,{side:""},{default:l(()=>[t(c,{round:"",color:"dark",icon:"las la-angle-right",flat:"",size:"sm"})]),_:1})]),_:1})]),_:1}),t(c,{label:e.$t("Cash out"),"no-caps":"",color:"primary",unelevated:"",size:"lg",to:"/account/cashout",disable:a.can_cashout,class:"q-pl-lg q-pr-lg"},null,8,["label","disable"]),t(f,{class:"q-pa-xs"}),i("p",K,n(a.max_cashout),1)],64))]),_:1})]),_:1})])]),_:1})]),_:1},8,["onRefresh"])}var dt=q(O,[["render",U]]);export{dt as default};
