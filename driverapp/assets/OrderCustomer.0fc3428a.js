import{_ as x,ar as v,au as p,u as A,X as i,dn as z,p as b,q as n,Z as m,f as o,v as r,d0 as h,ae as a,a1 as s,F as k,a0 as l,aj as c,a4 as w,t as C,ak as u,$ as y,V as D,aa as B,bC as S,a7 as q,a8 as F}from"./index.57d98e6b.js";import{Q as I}from"./QSpace.6257f203.js";import{Q as N}from"./QSlideItem.6eaab49f.js";import{Q as V}from"./QList.9b1deb90.js";import{u as E}from"./LocationStore.ce636ffa.js";import"./TouchPan.8da352e0.js";import"./selection.b1db311e.js";import"./use-render-cache.3aae9b27.js";const O={name:"OrderCustomer",props:["order_uuid","merchants","data","order_meta","payment_list"],components:{MapComponents:v(()=>p(()=>import("./MapComponents.9175391e.js"),["assets/MapComponents.9175391e.js","assets/index.57d98e6b.js","assets/index.945c03c3.css","assets/index.4f152a18.js"])),launchNavigation:v(()=>p(()=>import("./launchNavigation.e3f1e01e.js"),["assets/launchNavigation.e3f1e01e.js","assets/index.57d98e6b.js","assets/index.945c03c3.css"]))},setup(){const e=E(),d=A();return{LocationStore:e,Activity:d}},data(){return{loading:!1,center:[],markers:{},reset:void 0}},watch:{data(e,d){this.getCoordinates()}},created(){this.getCoordinates()},computed:{paymentLabel(){return(this.payment_list[this.data.payment_code]?this.payment_list[this.data.payment_code]:0)==1?this.$t("Paid online"):this.$t("Collect Cash")},isCash(){return(this.payment_list[this.data.payment_code]?this.payment_list[this.data.payment_code]:0)!=1}},methods:{getCoordinates(){console.debug("getCoordinates");const e=this.order_meta[this.data.order_id]?this.order_meta[this.data.order_id]:!1;let d="";try{const t=i.getStorage("driver_maps_config");d=z(t).icon}catch(t){console.debug(t)}e&&(this.center={lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},this.markers=[{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude),label:i.getIcon("customer"),icon:"marker_icon_destination"}],this.LocationStore.hadData()&&this.markers.push({lat:parseFloat(this.LocationStore.coordinates.lat),lng:parseFloat(this.LocationStore.coordinates.lng),label:i.getIcon("driver"),icon:"marker_icon_rider"}))},changeStatus(e){this.reset=e,this.changeOrderStatus(this.data.delivery_steps.methods)},changeOrderStatus(e){this.loading=!0,i.showLoadingBox("",this.$q),i.fetchDataByToken(e,{order_uuid:this.order_uuid}).then(d=>{this.reset.reset(),this.$emit("afterChangestatus",d.details)}).catch(d=>{console.debug(d),this.reset.reset(),i.notify("red-5",d,"error_outline",this.$q)}).then(d=>{i.hideLoadingBox(this.$q),this.loading=!1})}}},P={class:"row justify-between"},T={class:"row items-center"},j={class:"col"},M={class:"text-weight-medium no-margin"},R={class:"font11 no-margin"},X={key:0,class:"text-weight-medium"},Z={class:"col-4 text-right"},G={class:"flex items-center justify-end"},H={class:"font11 no-margin"},J={class:"row items-center"},K={class:"col"},U={key:0,class:"col text-right text-weight-bold"},W={class:"font11 no-margin"},Y={class:"no-margin"},$={class:"text-weight-bold"},tt={class:"no-margin"},et={class:"text-weight-bold"},at={class:"no-margin"},ot={class:"text-weight-bold"},st={class:"font12"},rt={class:"map medium bg-grey-1 relative-position"},dt={class:"q-mr-sm absolute-bottom-right q-ma-md",style:{"z-index":"99"}};function it(e,d,t,_,g,f){const L=b("launchNavigation"),Q=b("MapComponents");return n(),m("div",{class:y(["bg-whitex q-pb-md",{"bg-mydark ":e.$q.dark.mode,"bg-white ":!e.$q.dark.mode}])},[o(u,{class:"no-shadow"},{default:r(()=>[o(h,null,{default:r(()=>[a("div",P,[a("div",null,s(e.$t("Customer Details")),1),a("div",null,"#"+s(t.data.order_id),1)]),a("div",T,[a("div",j,[a("p",M,s(t.data.full_name),1),a("p",R,[t.order_meta[t.data.order_id]?(n(),m(k,{key:0},[t.order_meta[t.data.order_id].address1?(n(),m(k,{key:0},[l(s(t.order_meta[t.data.order_id].address1),1)],64)):c("",!0)],64)):c("",!0),l(" "+s(t.data.address),1)]),t.order_meta[t.data.order_id]?(n(),m("p",X,s(t.order_meta[t.data.order_id].address_label),1)):c("",!0)]),a("div",Z,[a("div",G,[o(w,{round:"",color:"primary",icon:"las la-map",size:"sm",unelevated:"",flat:"",class:"q-mr-sm",to:"/home/maps"}),t.order_meta[t.data.order_id]?(n(),C(w,{key:0,href:"tel:"+t.order_meta[t.data.order_id].contact_number,round:"",color:"mygreen",icon:"las la-phone-volume",size:"sm",unelevated:"",flat:""},null,8,["href"])):c("",!0)])])])]),_:1})]),_:1}),o(u,{class:y(["no-shadow card-borderedx no-border-radius",{"":e.$q.dark.mode,"card-bordered":!e.$q.dark.mode}])},{default:r(()=>[o(h,null,{default:r(()=>[a("p",H,s(e.$t("Payment")),1),a("div",J,[a("div",K,s(f.paymentLabel),1),f.isCash?(n(),m("div",U,s(t.data.total),1)):c("",!0)])]),_:1})]),_:1},8,["class"]),o(u,{class:"no-shadow no-border-radius"},{default:r(()=>[t.order_meta[t.data.order_id]?(n(),C(h,{key:0},{default:r(()=>[a("p",W,s(e.$t("Drop-off instructions")),1),a("p",Y,[a("span",$,s(e.$t("Aparment, suite or floor"))+" :",1),l(" "+s(t.order_meta[t.data.order_id].location_name),1)]),a("p",tt,[a("span",et,s(e.$t("Delivery options"))+" :",1),l(" "+s(t.order_meta[t.data.order_id].delivery_options),1)]),a("p",at,[a("span",ot,s(e.$t("Delivery instructions"))+" :",1),l(" "+s(t.order_meta[t.data.order_id].delivery_instructions),1)])]),_:1})):c("",!0)]),_:1}),o(u,{class:y(["no-shadow card-borderedx no-border-radius",{"":e.$q.dark.mode,"card-bordered":!e.$q.dark.mode}])},{default:r(()=>[o(h,{class:"text-center"},{default:r(()=>[a("p",st,s(e.$t("Estimated Arrival")),1),a("div",rt,[a("div",dt,[o(L,{location:g.center},null,8,["location"])]),o(Q,{class:"maps",keys:_.Activity.maps_config.key,provider:_.Activity.maps_config.provider,zoom:_.Activity.maps_config.zoom,center:g.center,markers:g.markers},null,8,["keys","provider","zoom","center","markers"])]),o(I,{class:"q-pa-sm"}),o(V,{bordered:"",separator:"",class:"radius8"},{default:r(()=>[o(N,{onLeft:f.changeStatus,"left-color":"light-green",class:"radius8"},{left:r(()=>[o(D,{color:"primary",size:"2em"})]),default:r(()=>[o(B,{class:"text-white text-weight-bold btn-11",style:S(`background-color:${t.data.delivery_steps.status_data.bg_color} !important;color:${t.data.delivery_steps.status_data.font_color} !important;`)},{default:r(()=>[o(q,{class:"text-center font17"},{default:r(()=>[l(s(t.data.delivery_steps.label),1)]),_:1}),o(q,{avatar:""},{default:r(()=>[o(F,{"text-color":"white",style:S(`color:${t.data.delivery_steps.status_data.font_color} !important;`),icon:"las la-angle-double-right"},null,8,["style"])]),_:1})]),_:1},8,["style"])]),_:1},8,["onLeft"])]),_:1})]),_:1})]),_:1},8,["class"])],2)}var ft=x(O,[["render",it]]);export{ft as default};
