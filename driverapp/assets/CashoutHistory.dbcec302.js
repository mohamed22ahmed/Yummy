import{_ as b,ar as D,X as m,p as P,q as r,Z as s,f as t,v as a,$ as B,F as h,a4 as p,a0 as _,a1 as c,a2 as y,ae as o,a5 as Q,V as S,aj as q,t as C,a3 as k,au as H,aa as T,a7 as v}from"./index.57d98e6b.js";import{Q as V}from"./QToolbarTitle.f2460359.js";import{Q as I}from"./QToolbar.5785cd51.js";import{Q as L}from"./QHeader.8d398719.js";import{Q as A,a as N}from"./QPopupProxy.ce6d109d.js";import{Q as $}from"./QCircularProgress.44787b73.js";import{Q as z}from"./QBadge.d629348d.js";import{Q as g}from"./QItemLabel.534f2eb0.js";import{Q as R}from"./QList.9b1deb90.js";import{Q as Y}from"./QInfiniteScroll.0033dd1c.js";import{Q as j}from"./QPage.76c085e2.js";import{Q as E}from"./QPullToRefresh.b207fbbb.js";import{C as x}from"./ClosePopup.26d225cb.js";import"./QResizeObserver.1c6d7ccc.js";import"./use-render-cache.3aae9b27.js";import"./format.de7e9769.js";import"./QMenu.3e900caf.js";import"./position-engine.6e2e634f.js";import"./selection.b1db311e.js";import"./TouchPan.8da352e0.js";const O={name:"CashoutHistory",data(){return{loading:!1,data:[],page:0,refresh_done:void 0,date_start:"",date_end:"",proxyDate:void 0}},components:{CalendarHalf:D(()=>H(()=>import("./CalendarHalf.dad16ee0.js"),["assets/CalendarHalf.dad16ee0.js","assets/index.57d98e6b.js","assets/index.945c03c3.css","assets/swiper.min.49a5a6c9.js","assets/swiper.min.b39a1361.css"]))},created(){},computed:{hasData(){return Object.keys(this.data).length>0}},methods:{afterSelectdate(e){this.date_start=e,this.date_end=e,this.resetPagination()},filterByDate(){this.date_start=this.proxyDate.from,this.date_end=this.proxyDate.to,this.resetPagination()},refresh(e){this.refresh_done=e,this.resetPagination()},resetPagination(){this.page=0,this.data=[],this.$refs.nscroll.reset(),this.$refs.nscroll.resume(),this.$refs.nscroll.trigger()},getCashoutHistory(e,l){this.loading=!0,m.fetchDataByToken("getCashoutHistory",{page:e,date_start:this.date_start,date_end:this.date_end}).then(u=>{this.page=e,this.data.push(u.details.data)}).catch(u=>{m.empty(this.$refs.nscroll)||this.$refs.nscroll.stop()}).then(u=>{m.empty(l)||l(),m.empty(this.refresh_done)||this.refresh_done(),this.loading=!1})},changeColor(e){return e=="paid"?"green-4":e=="cancelled"?"red-4":"grey-2"},changeTextColor(e){return e=="paid"||e=="cancelled"?"white":"dark"}}},F={class:"q-pl-sm q-pr-sm q-pt-xs"},M={class:"row"},K={class:"col-11"},U={class:"col"},X={class:"row items-center justify-end q-gutter-sm"},Z={key:0,class:"flex flex-center full-width q-pa-xl",style:{"min-height":"calc(30vh)"}},G={key:0,class:"text-center"},J={key:0,class:"flex flex-center",style:{"min-height":"calc(50vh)"}},W={class:"text-center"},ee={class:"font16 text-weight-bold"},te={class:"font11"};function ae(e,l,u,re,n,i){const w=P("CalendarHalf");return r(),s(h,null,[t(L,{class:B({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:a(()=>[t(I,null,{default:a(()=>[t(p,{onClick:l[0]||(l[0]=f=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),t(V,{class:"text-weight-bold"},{default:a(()=>[_(c(e.$t("Cash out history")),1)]),_:1})]),_:1}),t(y)]),_:1},8,["class"]),t(E,{onRefresh:i.refresh},{default:a(()=>[t(j,null,{default:a(()=>[o("div",F,[o("div",M,[o("div",K,[t(w,{ref:"calendar",onAfterSelectdate:i.afterSelectdate,today_date:n.date_start},null,8,["onAfterSelectdate","today_date"])]),o("div",U,[t(p,{icon:"event",round:"",color:"green-4",size:"sm",flat:""},{default:a(()=>[t(A,{onBeforeShow:e.updateProxy,cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[t(N,{modelValue:n.proxyDate,"onUpdate:modelValue":l[1]||(l[1]=f=>n.proxyDate=f),mask:"YYYY-MM-DD",range:""},{default:a(()=>[o("div",X,[Q(t(p,{label:"Cancel",color:"primary",flat:""},null,512),[[x]]),Q(t(p,{label:e.$t("OK"),color:"primary",flat:"",onClick:i.filterByDate},null,8,["label","onClick"]),[[x]])])]),_:1},8,["modelValue"])]),_:1},8,["onBeforeShow"])]),_:1})])]),t(y)]),t(Y,{ref:"nscroll",onLoad:i.getCashoutHistory,offset:250},{loading:a(()=>[n.page<=0?(r(),s("div",Z,[t(S,{color:"primary",size:"2em"})])):(r(),s(h,{key:1},[n.data.length>1?(r(),s("div",G,[t($,{indeterminate:"",rounded:"",size:"30px",color:"primary",class:"q-ma-md"})])):q("",!0)],64))]),default:a(()=>[!n.loading&&!i.hasData?(r(),s("div",J,[o("div",W,[o("div",ee,c(e.$t("No available data")),1),o("p",te,c(e.$t("Pull down the page to refresh")),1)])])):(r(),C(R,{key:1,separator:""},{default:a(()=>[(r(!0),s(h,null,k(n.data,f=>(r(),s(h,{key:f},[(r(!0),s(h,null,k(f,d=>(r(),C(T,{key:d},{default:a(()=>[t(v,null,{default:a(()=>[t(g,{class:"font12"},{default:a(()=>[t(z,{color:i.changeColor(d.status_raw),"text-color":i.changeTextColor(d.status_raw),label:d.status,class:"text-weight-bold"},null,8,["color","text-color","label"])]),_:2},1024),t(g,{caption:""},{default:a(()=>[_(c(d.description),1)]),_:2},1024),t(g,{caption:"",class:"font11"},{default:a(()=>[_(c(d.date),1)]),_:2},1024)]),_:2},1024),t(v,{side:""},{default:a(()=>[_(c(d.amount),1)]),_:2},1024)]),_:2},1024))),128))],64))),128))]),_:1}))]),_:1},8,["onLoad"])]),_:1})]),_:1},8,["onRefresh"])],64)}var we=b(O,[["render",ae]]);export{we as default};
