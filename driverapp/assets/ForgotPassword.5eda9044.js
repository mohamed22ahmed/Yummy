import{_ as b,u as y,X as m,q as i,Z as d,f as t,v as o,$ as k,F as h,a4 as u,a0 as _,a1 as r,a2 as v,ae as n,t as p,ah as w,al as q}from"./index.57d98e6b.js";import{Q}from"./QToolbarTitle.f2460359.js";import{Q as S}from"./QToolbar.5785cd51.js";import{Q as T}from"./QHeader.8d398719.js";import{Q as f}from"./QSpace.6257f203.js";import{Q as $}from"./QForm.4d239df2.js";import{Q as C}from"./QPage.76c085e2.js";import"./QResizeObserver.1c6d7ccc.js";const P={name:"ForgotPassword",data(){return{loading:!1,email_address:"",steps:1,data:[],maxCounter:10,counter:this.maxCounter,timer:void 0}},setup(){return{ActivityStore:y()}},watch:{counter(e,l){e<=0&&this.stopTimer()}},beforeUnmount(){this.stopTimer()},methods:{onSubmit(){this.loading=!0,m.requestResetPassword({email_address:this.email_address}).then(e=>{this.steps=2,this.counter=this.ActivityStore.settings_data.sendcode_interval,this.startTimer(),this.data=e}).catch(e=>{m.notify("red-5",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})},stopTimer(){clearInterval(this.timer)},startTimer(){this.stopTimer(),this.timer=setInterval(()=>{this.counter--},1e3)},resendEmail(){this.loading=!0,m.resendResetPassword(this.data.details.uuid).then(e=>{this.steps=2,this.counter=this.ActivityStore.settings_data.sendcode_interval,this.startTimer()}).catch(e=>{m.notify("red-5",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})}}},z={class:"full-width text-center"},A={class:"text-weight-bold no-margin font16"},E={class:"text-weight-light q-ma-none"},F={key:0,class:"rounded-borders border-green q-pa-sm font12"},V={key:0,class:"row items-center"},x={key:1,class:"font11 q-ma-none"};function B(e,l,I,R,s,c){return i(),d(h,null,[t(T,{class:k({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:o(()=>[t(S,null,{default:o(()=>[t(u,{onClick:l[0]||(l[0]=a=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),t(Q,{class:"text-weight-bold"},{default:o(()=>[_(r(e.$t("Forgot Password")),1)]),_:1})]),_:1}),t(v)]),_:1},8,["class"]),t(C,{class:"flex flex-center q-pl-md q-pr-md"},{default:o(()=>[n("div",z,[t($,{onSubmit:c.onSubmit},{default:o(()=>[n("h6",A,r(e.$t("Let's Get your account back"))+"! ",1),n("p",E,r(e.$t("Enter your email to receive instructions for resetting your password")),1),t(f,{class:"q-pa-sm"}),s.steps==2?(i(),d("div",F,r(s.data.msg),1)):(i(),p(q,{key:1,modelValue:s.email_address,"onUpdate:modelValue":l[1]||(l[1]=a=>s.email_address=a),label:e.$t("Email address"),outlined:"",color:"grey-5","lazy-rules":"",rules:[(a,g)=>g.email(a)||this.$t("Please enter a valid email address")]},{prepend:o(()=>[t(w,{name:"las la-envelope",color:"grey","lazy-rules":"",rules:[a=>a&&a.length>0||this.$t("This field is required")]},null,8,["rules"])]),_:1},8,["modelValue","label","rules"])),t(f,{class:"q-pa-xs"}),s.steps==1?(i(),p(u,{key:2,loading:s.loading,type:"submit",label:e.$t("Reset Password"),unelevated:"",color:"primary","no-caps":"",class:"full-width text-weight-bold font17",size:"lg"},null,8,["loading","label"])):(i(),d(h,{key:3},[s.counter===0?(i(),d("div",V,[t(u,{onClick:c.resendEmail,disable:s.loading,flat:"",dense:"",color:"dark","no-caps":"",class:"q-ma-none col",size:"md"},{default:o(()=>[n("u",null,r(e.$t("Resend reset email")),1)]),_:1},8,["onClick","disable"]),t(u,{onClick:l[2]||(l[2]=a=>s.steps=1),disable:s.loading,flat:"",dense:"",color:"dark","no-caps":"",class:"q-ma-none col",size:"md"},{default:o(()=>[n("u",null,r(e.$t("Enter email again")),1)]),_:1},8,["disable"])])):(i(),d("p",x,[n("u",null,r(e.$t("Resend Code in"))+" "+r(s.counter),1)]))],64))]),_:1},8,["onSubmit"])])]),_:1})],64)}var j=b(P,[["render",B]]);export{j as default};
