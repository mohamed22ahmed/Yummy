import{_ as v,ar as o,ag as b,X as p,p as s,q as y,Z as c,f as t,v as i,$ as S,F as C,a4 as _,a0 as k,a1 as d,a2 as $,ae as l,aj as L,au as m}from"./index.57d98e6b.js";import{Q}from"./QToolbarTitle.f2460359.js";import{Q as q}from"./QToolbar.5785cd51.js";import{Q as E}from"./QHeader.8d398719.js";import{Q as I}from"./QFooter.9a53d96e.js";import{Q as T}from"./QPage.76c085e2.js";import"./QResizeObserver.1c6d7ccc.js";const V={name:"CashIn",components:{PaymentList:o(()=>m(()=>import("./PaymentList.ffe1a557.js"),["assets/PaymentList.ffe1a557.js","assets/index.57d98e6b.js","assets/index.945c03c3.css","assets/QImg.0d589814.js","assets/QList.9b1deb90.js"])),SavedPaymentlist:o(()=>m(()=>import("./SavedPaymentlist.3b57e4d2.js"),["assets/SavedPaymentlist.3b57e4d2.js","assets/index.57d98e6b.js","assets/index.945c03c3.css","assets/QItemLabel.534f2eb0.js","assets/QSlideItem.6eaab49f.js","assets/TouchPan.8da352e0.js","assets/selection.b1db311e.js","assets/use-render-cache.3aae9b27.js","assets/QList.9b1deb90.js"])),NumberFormat:o(()=>m(()=>import("./NumberFormat.fc6956b7.js"),["assets/NumberFormat.fc6956b7.js","assets/index.57d98e6b.js","assets/index.945c03c3.css"])),StripeComponents:o(()=>m(()=>import("./StripeComponents.e786838c.js"),["assets/StripeComponents.e786838c.js","assets/QSpace.6257f203.js","assets/index.57d98e6b.js","assets/index.945c03c3.css","assets/QToolbar.5785cd51.js","assets/QInnerLoading.a7196db6.js","assets/QForm.4d239df2.js"])),PaypalComponents:o(()=>m(()=>import("./PaypalComponents.bb129707.js"),["assets/PaypalComponents.bb129707.js","assets/QSpace.6257f203.js","assets/index.57d98e6b.js","assets/index.945c03c3.css","assets/QToolbar.5785cd51.js","assets/ClosePopup.26d225cb.js","assets/index.4f152a18.js"]))},data(){return{loading:!1,amount:0,data:[],credentials:[],driver_id:0,payment_uuid:"",has_data:!1,loading_paymentlist:!1}},created(){this.amount=this.$route.query.amount;let e=b.getUser();this.driver_id=e.driver_id},computed:{hasPayment(){return!p.empty(this.payment_uuid)}},methods:{setCredentials(e){this.credentials=e},afterSelectpayment(e,r){try{this.$refs[e.payment_code].showPaymentForm()}catch(u){p.notify("dark",u,"error_outline",this.$q)}},afterAddpayment(){console.log("afterAddpayment"),this.$refs.saved_payment.getPaymentSaved()},setPaymentuuid(e){this.payment_uuid=e},onSubmit(){this.loading=!0,p.fetchDataByTokenPost("getPaymentDetails","payment_uuid="+this.payment_uuid).then(e=>{let r=e.details;r.amount=this.amount,this.$refs[e.details.payment_code].PaymentRender(r)}).catch(e=>{}).then(e=>{this.loading=!1})},afterPayment(e){this.$router.push({path:"/account/cashin-successful",query:{id:e.transaction_id}})},afterGetpayment(e){this.has_data=e},setLoading(e){this.loading_paymentlist=e}}},w={class:"text-center"},D={class:"text-h5"},N={class:"font15 q-mt-md"},F={key:0,class:"text-grey font12"},R={class:"font15 q-mt-md q-mb-sm"};function B(e,r,u,O,n,a){const f=s("NumberFormat"),h=s("SavedPaymentlist"),P=s("PaymentList"),A=s("StripeComponents"),g=s("PaypalComponents");return y(),c(C,null,[t(E,{class:S({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:i(()=>[t(q,null,{default:i(()=>[t(_,{onClick:r[0]||(r[0]=G=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),t(Q,{class:"text-weight-bold"},{default:i(()=>[k(d(e.$t("Cash In")),1)]),_:1})]),_:1}),t($)]),_:1},8,["class"]),t(T,{class:"q-pa-md"},{default:i(()=>[l("div",w,[l("div",null,d(e.$t("Cash In Amount")),1),l("div",D,[t(f,{amount:n.amount},null,8,["amount"])])]),l("div",N,d(e.$t("Saved Payment Methods")),1),t(h,{ref:"saved_payment",onSetPaymentuuid:a.setPaymentuuid},null,8,["onSetPaymentuuid"]),!n.has_data&&!n.loading_paymentlist?(y(),c("p",F,d(e.$t("you have not added payment yet")),1)):L("",!0),l("div",R,d(e.$t("Add New Payment Method")),1),t(P,{ref:"payment",onAfterSelectpayment:a.afterSelectpayment,onSetCredentials:a.setCredentials,onAfterGetpayment:a.afterGetpayment,onSetLoading:a.setLoading},null,8,["onAfterSelectpayment","onSetCredentials","onAfterGetpayment","onSetLoading"]),t(I,{class:"transparent text-dark"},{default:i(()=>[t(_,{type:"submit",class:"fit",unelevated:"",color:"primary",label:e.$t("Submit"),"no-caps":"",size:"lg",disable:!a.hasPayment,onClick:a.onSubmit,loading:n.loading},null,8,["label","disable","onClick","loading"])]),_:1})]),_:1}),t(A,{ref:"stripe",payment_code:"stripe",title:e.$t("Add Stripe"),label:{submit:this.$t("Add Stripe"),notes:this.$t("Add your card account")},payment_credentials:n.credentials,reference:n.driver_id,onAfterAddpayment:a.afterAddpayment,onAfterPayment:a.afterPayment},null,8,["title","label","payment_credentials","reference","onAfterAddpayment","onAfterPayment"]),t(g,{ref:"paypal",payment_code:"paypal",title:e.$t("Add Paypal"),label:{submit:this.$t("Add Paypal"),notes:this.$t("Pay using your paypal account"),payment_title:this.$t("Pay using Paypal"),payment_subtitle:this.$t("You will re-direct to paypal account to login to your account.")},payment_credentials:n.credentials,reference:n.driver_id,onAfterAddpayment:a.afterAddpayment,onAfterPayment:a.afterPayment},null,8,["title","label","payment_credentials","reference","onAfterAddpayment","onAfterPayment"])],64)}var Z=v(V,[["render",B]]);export{Z as default};
