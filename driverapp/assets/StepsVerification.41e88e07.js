import{_ as h,X as d,q as m,t as c,v as i,f as s,ae as a,a5 as f,a4 as u,d0 as p,a1 as n,al as g,Z as _,a2 as b,d4 as w,ak as y,aP as v}from"./index.57d98e6b.js";import{Q as C}from"./QForm.4d239df2.js";import{Q as k}from"./QInnerLoading.a7196db6.js";import{C as V}from"./ClosePopup.26d225cb.js";const Q={name:"StepsVerification",props:["sent_message"],data(){return{show_modal:!1,loading:!1,visible:!1,code:"",counter:20,timer:void 0,sent_message2:""}},computed:{hasCode(){return!!d.empty(this.code)}},watch:{counter(e,o){e<=0&&this.stopTimer()},show_modal(e,o){e&&this.startTimer()},sent_message(e,o){this.sent_message2=e}},methods:{onSubmit(){this.$emit("afterVerifycode",this.code)},stopTimer(){clearInterval(this.timer)},startTimer(){this.stopTimer(),this.counter=20,this.timer=setInterval(()=>{this.counter--},1e3)},resendCode(){this.loading=!0,d.fetchDataByToken("requestcode2",{}).then(e=>{this.sent_message2=e.msg,this.startTimer()}).catch(e=>{d.notify("red-5",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})}}},S={class:"text-right"},q={class:"text-weight-bold text-h5 q-mb-md"},x={class:"text-weight-medium"},T={class:"text-left q-mt-md"},B={class:"text-weight-bold font12"},I={key:1,class:"font11 q-ma-none"};function D(e,o,P,z,t,r){return m(),c(v,{modelValue:t.show_modal,"onUpdate:modelValue":o[1]||(o[1]=l=>t.show_modal=l),persistent:"",position:"bottom"},{default:i(()=>[s(y,{class:"relative-position"},{default:i(()=>[a("div",S,[f(s(u,{icon:"eva-close-outline",flat:"",round:"",dense:""},null,512),[[V]])]),s(C,{onSubmit:r.onSubmit},{default:i(()=>[s(p,{class:"text-center"},{default:i(()=>[a("div",q,n(e.$t("2-Step Verification")),1),a("p",x,n(e.$t("For your security, we want to make sure it's really you"))+". ",1),s(g,{"bg-color":"mygrey",color:"warning",outlined:"",modelValue:t.code,"onUpdate:modelValue":o[0]||(o[0]=l=>t.code=l),label:e.$t("Code"),maxlength:"6","lazy-rules":"",rules:[l=>l&&l.length>0||"Code is required"],mask:"######"},null,8,["modelValue","label","rules"]),a("div",T,[a("p",B,n(t.sent_message2),1),t.counter===0?(m(),c(u,{key:0,onClick:r.resendCode,flat:"",dense:"",color:"dark","no-caps":"",class:"font12 q-ma-none"},{default:i(()=>[a("u",null,n(e.$t("Resend")),1)]),_:1},8,["onClick"])):(m(),_("p",I,[a("u",null,n(e.$t("Resend Code in"))+" "+n(t.counter),1)]))])]),_:1}),s(b,{spaced:""}),s(w,null,{default:i(()=>[s(u,{type:"submit",unelevated:"",color:"primary","text-color":"white","no-caps":"",class:"full-width text-weight-bold font17",label:e.$t("Submit"),disabled:r.hasCode,loading:t.loading},null,8,["label","disabled","loading"])]),_:1})]),_:1},8,["onSubmit"]),s(k,{showing:t.visible,label:e.$t("Please wait..."),"label-class":"text-warning","label-style":"font-size: 1.1em",color:"primary"},null,8,["showing","label"])]),_:1})]),_:1},8,["modelValue"])}var U=h(Q,[["render",D]]);export{U as default};
