import{_ as w,X as d,be as l,p as x,q as y,Z as _,f as e,v as s,$ as k,F as g,a4 as m,a0 as o,a1 as i,a2 as S,ae as n,V as Q,aa as u,a7 as h}from"./index.57d98e6b.js";import{Q as q}from"./QToolbarTitle.f2460359.js";import{Q as D}from"./QToolbar.5785cd51.js";import{Q as M}from"./QHeader.8d398719.js";import{Q as O}from"./QBtnGroup.a6a62eee.js";import{Q as E}from"./QList.9b1deb90.js";import{Q as v}from"./QSpace.6257f203.js";import{Q as I}from"./QPage.76c085e2.js";import{Q as N}from"./QPullToRefresh.b207fbbb.js";import{V as C}from"./vue3-apexcharts.common.d10fa6dd.js";import"./QResizeObserver.1c6d7ccc.js";import"./TouchPan.8da352e0.js";import"./selection.b1db311e.js";import"./format.de7e9769.js";const T={name:"EarningDetails",components:{apexchart:C},data(){return{loading:!1,first_loading:!1,date_start:"",date_end:"",chart_type:"",summary:[],balance:"",date_range:"",charts_data:[],chartOptions:{chart:{id:"vuechart",type:"bar",height:"auto",toolbar:{show:!1},parentHeightOffset:0},dataLabels:{enabled:!1},colors:["#81c784"],axisBorder:{show:!1},grid:{show:!1,padding:{left:0,right:0}},xaxis:{categories:["Mo","Tu","We","Th","Fr","Sa","Su"]},yaxis:{show:!1}},series:[{name:"series-1",data:[1,2,3,4,5,2,10]}]}},computed:{hasData(){return Object.keys(this.data).length>0},canMoveNext(){const t=d.getDateNow();var a=l.fromISO(t),f=l.fromISO(this.date_end);return!a.equals(f)},canMovePrev(){const t=d.getDateNow();var a=l.fromISO(t),f=l.fromISO(this.date_end);return f<=a}},created(){this.date_start=this.$route.query.start,this.date_end=this.$route.query.end,this.chart_type=this.$route.query.chart_type,this.getEarningDetails(null)},methods:{setDate(t){this.chart_type=t,t=="daily"?(this.date_start=d.getDateNow(),this.date_end=d.getDateNow()):(this.date_start=l.now().minus({days:6}).toFormat("yyyy-MM-dd"),this.date_end=d.getDateNow()),this.refresh(null)},refresh(t){this.getEarningDetails(t)},PreviousEarnings(){if(this.chart_type=="daily"){console.log("daily");let t=l.fromISO(this.date_start);t=t.minus({days:1}).toFormat("yyyy-MM-dd"),this.date_start=t,this.date_end=t}else{let t=l.fromISO(this.date_start),a=l.fromISO(this.date_start).toFormat("yyyy-MM-dd");t=t.minus({days:6}).toFormat("yyyy-MM-dd"),this.date_start=t,this.date_end=a}this.refresh(null)},NextEarnings(){if(this.chart_type=="daily"){console.log("daily");let t=l.fromISO(this.date_start);t=t.plus({days:1}).toFormat("yyyy-MM-dd"),this.date_start=t,this.date_end=t}else{let t=l.fromISO(this.date_end).toFormat("yyyy-MM-dd"),a=l.fromISO(this.date_end);a=a.plus({days:6}).toFormat("yyyy-MM-dd"),this.date_start=t,this.date_end=a}this.refresh(null)},getEarningDetails(t){this.first_loading?d.showLoadingBox("",this.$q):this.loading=!0,d.fetchDataByTokenPost("getEarningDetails","date_start="+this.date_start+"&date_end="+this.date_end+"&chart_type="+this.chart_type).then(a=>{this.first_loading=!0,this.date_range=a.details.date_range,this.balance=a.details.balance,this.summary=a.details.summary,this.charts_data=a.details.charts_data,this.plotChart()}).catch(a=>{this.summary=[]}).then(a=>{this.first_loading&&d.hideLoadingBox(this.$q),this.loading=!1,d.empty(t)||t()})},plotChart(){this.chartOptions={chart:{id:"vuechart",type:"bar",height:"auto",toolbar:{show:!1},parentHeightOffset:0},plotOptions:{bar:{colors:{ranges:[{from:-999999,to:0,color:"#f44336"}]}}},dataLabels:{enabled:!1,position:"bottom"},colors:["#81c784"],axisBorder:{show:!1},grid:{show:!1,padding:{left:0,right:0}},xaxis:{categories:this.charts_data.date_range},yaxis:{show:!1}},this.series=[{name:"Sale",data:this.charts_data.data}]}}},B={class:"text-center q-pa-md"},F={key:0,class:"flex flex-center full-width q-pa-xl",style:{"min-height":"calc(50vh)"}},P={class:"q-pa-md"},z={class:"row justify-between items-center"},V={class:"text-weight-medium ellipsis",style:{"max-width":"250px"}},L={class:"text-center q-mt-sm"},j={class:"text-h5 q-ma-none text-weight-bold"},A={class:"font12"},H={class:"q-pl-md q-pr-md"};function R(t,a,f,$,r,c){const b=x("apexchart");return y(),_(g,null,[e(M,{class:k({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode})},{default:s(()=>[e(D,null,{default:s(()=>[e(m,{onClick:a[0]||(a[0]=p=>t.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:t.$q.dark.mode?"white":"dark"},null,8,["color"]),e(q,{class:"text-weight-bold"},{default:s(()=>[o(i(t.$t("Earnings")),1)]),_:1})]),_:1}),e(S)]),_:1},8,["class"]),e(N,{onRefresh:c.refresh},{default:s(()=>[e(I,null,{default:s(()=>[n("div",B,[e(O,{unelevated:""},{default:s(()=>[e(m,{color:r.chart_type=="daily"?"primary":"grey-1","text-color":r.chart_type=="daily"?"white":"dark",label:t.$t("Daily"),"no-caps":"",size:"sm",onClick:a[1]||(a[1]=p=>c.setDate("daily"))},null,8,["color","text-color","label"]),e(m,{color:r.chart_type=="daily"?"grey-1":"primary","text-color":r.chart_type=="daily"?"dark":"white",label:t.$t("Weekly"),"no-caps":"",size:"sm",onClick:a[2]||(a[2]=p=>c.setDate("weekly"))},null,8,["color","text-color","label"])]),_:1})]),r.loading?(y(),_("div",F,[e(Q,{color:"primary",size:"2em"})])):(y(),_(g,{key:1},[n("div",P,[n("div",z,[e(m,{round:"",color:"dark",flat:"",icon:"las la-angle-left",unelevated:"",size:"sm",disable:!c.canMovePrev,onClick:c.PreviousEarnings},null,8,["disable","onClick"]),n("div",V,i(r.date_range),1),e(m,{round:"",color:"dark",flat:"",icon:"las la-angle-right",unelevated:"",size:"sm",disable:!c.canMoveNext,onClick:c.NextEarnings},null,8,["disable","onClick"])]),n("div",L,[n("div",j,i(r.balance),1),n("div",A,i(t.$t("Total earnings")),1)]),e(b,{type:"bar",options:r.chartOptions,series:r.series,height:"150"},null,8,["options","series"])]),n("div",H,[e(E,{separator:"",dense:""},{default:s(()=>[e(u,null,{default:s(()=>[e(h,null,{default:s(()=>[o(i(t.$t("Delivery pay")),1)]),_:1}),e(h,{side:""},{default:s(()=>[o(i(r.summary.total_delivery),1)]),_:1})]),_:1}),e(u,null,{default:s(()=>[e(h,null,{default:s(()=>[o(i(t.$t("Tips")),1)]),_:1}),e(h,{side:""},{default:s(()=>[o(i(r.summary.total_tips),1)]),_:1})]),_:1}),e(u,null,{default:s(()=>[e(h,null,{default:s(()=>[o(i(t.$t("Incentives")),1)]),_:1}),e(h,{side:""},{default:s(()=>[o(i(r.summary.total_incentives),1)]),_:1})]),_:1}),e(u,null,{default:s(()=>[e(h,null,{default:s(()=>[o(i(t.$t("Adjustment")),1)]),_:1}),e(h,{side:""},{default:s(()=>[o(i(r.summary.total_adjustment),1)]),_:1})]),_:1})]),_:1}),e(v,{class:"q-pa-md"}),e(m,{class:"fit",color:"primary",size:"lg",unelevated:"","no-caps":"",to:{name:"earning-activity",query:{start:r.date_start,end:r.date_end,chart_type:r.chart_type}}},{default:s(()=>[o(i(t.$t("View earnings activity")),1)]),_:1},8,["to"]),e(v,{class:"q-pa-md"})])],64))]),_:1})]),_:1},8,["onRefresh"])],64)}var lt=w(T,[["render",R]]);export{lt as default};
