import{_ as v,ar as $,X as o,p as C,q as l,Z as p,f as t,v as _,$ as f,F as g,a4 as m,a0 as k,a1 as r,a2 as y,V as D,ae as s,t as c,ah as P,aj as q,au as Q}from"./index.57d98e6b.js";import{Q as A}from"./QToolbarTitle.f2460359.js";import{Q as w}from"./QToolbar.5785cd51.js";import{Q as L}from"./QHeader.8d398719.js";import{Q as B}from"./QSpace.6257f203.js";import{Q as u}from"./QImg.0d589814.js";import{Q as U}from"./QFooter.9a53d96e.js";import{Q as T}from"./QPage.76c085e2.js";import{A as d}from"./AppCamera.2e0dc590.js";import"./QResizeObserver.1c6d7ccc.js";const x={name:"TakeLicensePhoto",components:{UploaderFile:$(()=>Q(()=>import("./UploaderFile.778c5550.js"),["assets/UploaderFile.778c5550.js","assets/index.57d98e6b.js","assets/index.945c03c3.css","assets/QCircularProgress.44787b73.js","assets/format.de7e9769.js"]))},data(){return{upload_path:"",photo_data:"",photo_data_back:"",front_upload_enabled:!1,front_photo_filename:"",front_photo_url:"",back_upload_enabled:!1,back_photo_filename:"",back_photo_url:"",loading:!0}},created(){this.getLicensePhoto()},computed:{hasPhoto(){return!o.empty(this.front_photo_filename)},hasData(){return Object.keys(this.photo_data).length>0},hasBackPhoto(){return!o.empty(this.back_photo_filename)},hasBackData(){return Object.keys(this.photo_data_back).length>0},hasAddedPhoto(){let e=!1;return Object.keys(this.photo_data).length>0&&Object.keys(this.photo_data_back).length>0&&(e=!0),o.empty(this.front_photo_filename)||o.empty(this.back_photo_filename)||(e=!0),!e}},methods:{getLicensePhoto(){this.loading=!0,o.fetchDataByToken("getLicensePhoto").then(e=>{this.front_photo_filename=e.details.license_front_photo,this.front_photo_url=e.details.front_photo_url,this.upload_path=e.details.upload_path,this.back_photo_filename=e.details.license_back_photo,this.back_photo_url=e.details.back_photo_url}).catch(e=>{}).then(e=>{this.loading=!1})},takePhoto(){this.$q.capacitor?d.isCameraEnabled().then(e=>{d.isFileAccessEnabled().then(i=>{d.getPhoto(1).then(n=>{this.photo_data=n}).catch(n=>{this.photo_data=[]})}).catch(i=>{o.notify("dark",i,"error",this.$q)})}).catch(e=>{o.notify("dark",e,"error",this.$q)}):this.front_upload_enabled=!this.front_upload_enabled},takeBackPhoto(){this.$q.capacitor?d.isCameraEnabled().then(e=>{d.isFileAccessEnabled().then(i=>{d.getPhoto(1).then(n=>{this.photo_data_back=n}).catch(n=>{this.photo_data_back=[]})}).catch(i=>{o.notify("dark",i,"error",this.$q)})}).catch(e=>{o.notify("dark",e,"error",this.$q)}):this.back_upload_enabled=!this.back_upload_enabled},afterUploadfile(e){this.front_photo_filename=e.filename,this.front_photo_url=e.url_image,this.upload_path=e.upload_path},afterUploadfileBackphoto(e){this.back_photo_filename=e.filename,this.back_photo_url=e.url_image,this.upload_path=e.upload_path},hadData(){return Object.keys(this.photo_data).length>0},uploadLicensePhoto(){o.showLoadingBox("",this.$q),o.fetchDataByToken("updatelicensephoto",{front_photo_filename:this.front_photo_filename,front_photo_url:this.front_photo_url,upload_path:this.upload_path,file_data:this.hadData()?this.photo_data.data:"",image_type:this.hadData()?this.photo_data.format:"",back_photo_filename:this.back_photo_filename,back_photo_url:this.back_photo_url,upload_path:this.upload_path,photo_data_back:this.hadData()?this.photo_data_back.data:"",image_type_back:this.hadData()?this.photo_data_back.format:""}).then(e=>{o.notify("green-5",e.msg,"check_circle",this.$q)}).catch(e=>{o.notify("dark",e,"error_outline",this.$q)}).then(e=>{o.hideLoadingBox(this.$q)})}}},F={key:0,class:"fit text-center"},j={class:"text-h7"},E={class:"font14"},I={class:"row q-col-gutter-sm q-mb-sm q-pl-sm q-pr-sm"},z={class:"col"},V={class:"font12 line-normal"},N={class:"text-weight-bold"},O={class:"row q-col-gutter-sm q-mb-sm q-pl-sm q-pr-sm"},M={class:"col"},S={class:"font12 line-normal"},G={class:"text-weight-bold"};function J(e,i,n,H,h,a){const b=C("UploaderFile");return l(),p(g,null,[t(L,{class:f({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:_(()=>[t(w,null,{default:_(()=>[t(m,{onClick:i[0]||(i[0]=R=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),t(A,{class:"text-weight-bold"},{default:_(()=>[k(r(e.$t("License")),1)]),_:1})]),_:1}),t(y)]),_:1},8,["class"]),t(T,{class:f(["q-pa-md",{"flex flex-center":h.loading}])},{default:_(()=>[h.loading?(l(),p("div",F,[t(D,{color:"primary",size:"2em"})])):(l(),p(g,{key:1},[s("div",j,r(e.$t("Driver's License")),1),s("ul",E,[s("li",null,r(e.$t("Make sure the entire license and all the details are VISIBLE")),1),s("li",null,r(e.$t("Take a Photo")),1),s("li",null,r(e.$t("Upload a Photo")),1)]),t(B,{class:"q-pa-sm"}),s("div",I,[a.hasData?(l(),c(u,{key:0,src:h.photo_data.path,"spinner-color":"primary","spinner-size":"sm",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):a.hasPhoto?(l(),c(u,{key:1,src:this.front_photo_url,"spinner-color":"primary",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):(l(),p("div",{key:2,class:f(["col-3 row items-center justify-center radius8",{"bg-grey600":e.$q.dark.mode,"bg-mygrey":!e.$q.dark.mode}]),style:{height:"70px"}},[t(P,{name:"las la-image",class:"text-grey",size:"xl"})],2)),s("div",z,[s("div",V,[s("span",N,r(e.$t("Front Photo of ID")),1),k(". "+r(e.$t("Maximum 2MB. Accepted types: PNG. JPG")),1)]),t(m,{label:a.hasPhoto?this.$t("Change Photo"):a.hasData?this.$t("Change Photo"):this.$t("Add Photo"),flat:"",color:"primary","no-caps":"",class:"q-pl-none q-pr-none",onClick:a.takePhoto},null,8,["label","onClick"])])]),h.front_upload_enabled?(l(),c(b,{key:0,ref:"uploader_file",path:"upload/license",onAfterUploadfile:a.afterUploadfile},null,8,["onAfterUploadfile"])):q("",!0),t(y),t(B,{class:"q-pa-md"}),s("div",O,[a.hasBackData?(l(),c(u,{key:0,src:h.photo_data_back.path,"spinner-color":"primary","spinner-size":"sm",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):a.hasBackPhoto?(l(),c(u,{key:1,src:this.back_photo_url,"spinner-color":"primary",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):(l(),p("div",{key:2,class:f(["col-3 row items-center justify-center radius8",{"bg-grey600":e.$q.dark.mode,"bg-mygrey":!e.$q.dark.mode}]),style:{height:"70px"}},[t(P,{name:"las la-image",class:"text-grey",size:"xl"})],2)),s("div",M,[s("div",S,[s("span",G,r(e.$t("Back Photo of ID")),1),k(". "+r(e.$t("Maximum 2MB. Accepted types: PNG. JPG")),1)]),t(m,{label:a.hasBackPhoto?this.$t("Change Photo"):a.hasBackData?this.$t("Change Photo"):this.$t("Add Photo"),flat:"",color:"primary","no-caps":"",class:"q-pl-none q-pr-none",onClick:a.takeBackPhoto},null,8,["label","onClick"])])]),h.back_upload_enabled?(l(),c(b,{key:1,ref:"uploader_file",path:"upload/license",onAfterUploadfile:a.afterUploadfileBackphoto},null,8,["onAfterUploadfile"])):q("",!0),t(U,{class:f(["q-pa-md",{"bg-mydark ":e.$q.dark.mode,"bg-white ":!e.$q.dark.mode}])},{default:_(()=>[t(m,{onClick:a.uploadLicensePhoto,color:"primary","text-color":"white",label:e.$t("Confirm Photo"),unelevated:"",class:"full-width",size:"lg","no-caps":"",loading:h.loading,disable:a.hasAddedPhoto},null,8,["onClick","label","loading","disable"])]),_:1},8,["class"])],64))]),_:1},8,["class"])],64)}var le=v(x,[["render",J]]);export{le as default};
