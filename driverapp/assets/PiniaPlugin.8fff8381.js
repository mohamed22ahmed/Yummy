import{j as S,k as v}from"./index.57d98e6b.js";function R(e){return typeof e=="object"&&e!==null}function f(e,r){return e=R(e)?e:Object.create(null),new Proxy(e,{get(n,t,i){return t==="key"?Reflect.get(n,t,i):Reflect.get(n,t,i)||Reflect.get(r,t,i)}})}function _(e,r){return r.reduce((n,t)=>n==null?void 0:n[t],e)}function $(e,r,n){return r.slice(0,-1).reduce((t,i)=>/^(__proto__)$/.test(i)?{}:t[i]=t[i]||{},e)[r[r.length-1]]=n,e}function b(e,r){return r.reduce((n,t)=>{const i=t.split(".");return $(n,i,_(e,i))},{})}function d(e,{storage:r,serializer:n,key:t,debug:i}){try{const u=r==null?void 0:r.getItem(t);u&&e.$patch(n==null?void 0:n.deserialize(u))}catch(u){i&&console.error(u)}}function y(e,{storage:r,serializer:n,key:t,paths:i,debug:u}){try{const l=Array.isArray(i)?b(e,i):e;r.setItem(t,n.serialize(l))}catch(l){u&&console.error(l)}}function p(e={}){return r=>{const{options:{persist:n},store:t}=r;if(!n)return;const i=(Array.isArray(n)?n.map(u=>f(u,e)):[f(n,e)]).map(({storage:u=localStorage,beforeRestore:l=null,afterRestore:o=null,serializer:a={serialize:JSON.stringify,deserialize:JSON.parse},key:s=t.$id,paths:g=null,debug:m=!1})=>{var c;return{storage:u,beforeRestore:l,afterRestore:o,serializer:a,key:((c=e.key)!=null?c:h=>h)(s),paths:g,debug:m}});t.$persist=()=>{i.forEach(u=>{y(t.$state,u)})},t.$hydrate=({runHooks:u=!0}={})=>{i.forEach(l=>{const{beforeRestore:o,afterRestore:a}=l;u&&(o==null||o(r)),d(t,l),u&&(a==null||a(r))})},i.forEach(u=>{const{beforeRestore:l,afterRestore:o}=u;l==null||l(r),d(t,u),o==null||o(r),t.$subscribe((a,s)=>{y(s,u)},{detached:!0})})}}var A=p(),z=S(({app:e})=>{const r=v();r.use(A),e.use(r)});export{z as default};
