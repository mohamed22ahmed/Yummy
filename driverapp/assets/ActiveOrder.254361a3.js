import{_ as L,ar as h,au as _,u as w,X as i,p as u,q as l,Z as m,ae as a,a1 as n,aj as v,f as s,a4 as g,ah as q,v as r,d0 as A,$ as f,ak as C,V as Q,aa as x,bC as p,a7 as y,a0 as z,a8 as I}from"./index.57d98e6b.js";import{Q as B}from"./QSlideItem.6eaab49f.js";import{Q as N}from"./QList.9b1deb90.js";import{u as O}from"./LocationStore.ce636ffa.js";import"./TouchPan.8da352e0.js";import"./selection.b1db311e.js";import"./use-render-cache.3aae9b27.js";const V={name:"ActiveOrder",props:["data","merchants","order_meta"],components:{MapComponents:h(()=>_(()=>import("./MapComponents.9175391e.js"),["assets/MapComponents.9175391e.js","assets/index.57d98e6b.js","assets/index.945c03c3.css","assets/index.4f152a18.js"])),launchNavigation:h(()=>_(()=>import("./launchNavigation.e3f1e01e.js"),["assets/launchNavigation.e3f1e01e.js","assets/index.57d98e6b.js","assets/index.945c03c3.css"]))},setup(){const t=O(),o=w();return{LocationStore:t,Activity:o}},data(){return{loading:!1,center:[],markers:{},reset:void 0}},watch:{data(t,o){this.getLocation()}},created(){this.getLocation()},methods:{getLocation(){if(this.merchants[this.data.merchant_id]){const t=this.merchants[this.data.merchant_id];this.order_meta[this.data.order_id],this.center={lat:parseFloat(t.latitude),lng:parseFloat(t.lontitude)},this.markers=[{lat:parseFloat(t.latitude),lng:parseFloat(t.lontitude),label:i.getIcon("merchant"),icon:"marker_icon_merchant"}],this.LocationStore.hadData()?(console.log("driver data"),this.markers.push({lat:parseFloat(this.LocationStore.coordinates.lat),lng:parseFloat(this.LocationStore.coordinates.lng),label:i.getIcon("driver"),icon:"marker_icon_rider"})):console.log("no driver data")}},changeStatus(t){this.reset=t,this.changeOrderStatus(this.data.delivery_steps.methods)},changeOrderStatus(t){console.debug("changeOrderStatus=>"+t),console.debug(this.data.order_uuid),this.loading=!0,i.showLoadingBox("",this.$q),i.fetchDataByToken(t,{order_uuid:this.data.order_uuid}).then(o=>{this.reset.reset(),this.$emit("afterChangestatus",o.details)}).catch(o=>{console.debug(o),this.reset.reset(),i.notify("red-5",o,"error_outline",this.$q)}).then(o=>{i.hideLoadingBox(this.$q),this.loading=!1})}}},D={class:"q-pa-md"},E={class:"row justify-between"},F={class:"row items-center"},P={key:0,class:"col text-weight-medium"},T={class:"col-4 text-right"},j={class:"flex items-center justify-end"},M={class:"row items-start"},R={class:"col-1"},X={class:"col"},Z={key:0,class:"font11 line-normal no-margin"},G={class:"font12"},H={class:"map medium bg-grey-1 relative-position"},J={class:"q-mr-sm absolute-bottom-right q-ma-md",style:{"z-index":"99"}},K={class:"q-pa-md"};function U(t,o,e,d,c,k){const b=u("launchNavigation"),S=u("MapComponents");return l(),m("div",{class:f({"bg-mydark ":t.$q.dark.mode,"bg-white ":!t.$q.dark.mode})},[a("div",D,[a("div",E,[a("div",null,n(t.$t("Restaurant Details")),1),a("div",null,"#"+n(e.data.order_id),1)]),a("div",F,[e.merchants[e.data.merchant_id]?(l(),m("div",P,n(e.merchants[e.data.merchant_id].restaurant_name),1)):v("",!0),a("div",T,[a("div",j,[s(g,{round:"",color:"primary",icon:"las la-map",size:"sm",unelevated:"",flat:"",class:"q-mr-sm",to:"/home/maps"}),s(g,{href:"tel:"+e.merchants[e.data.merchant_id].contact_phone,round:"",color:"mygreen",icon:"las la-phone-volume",size:"sm",unelevated:"",flat:""},null,8,["href"])])])]),a("div",M,[a("div",R,[s(q,{name:"las la-map-marker-alt",size:"18px"})]),a("div",X,[e.merchants[e.data.merchant_id]?(l(),m("p",Z,n(e.merchants[e.data.merchant_id].address),1)):v("",!0)])])]),s(C,{class:f(["no-shadow no-border-radius",{"":t.$q.dark.mode,"card-bordered":!t.$q.dark.mode}])},{default:r(()=>[s(A,{class:"text-center"},{default:r(()=>[a("p",G,n(t.$t("Estimated Arrival")),1),a("div",H,[a("div",J,[s(b,{location:c.center},null,8,["location"])]),s(S,{class:"maps",keys:d.Activity.maps_config.key,provider:d.Activity.maps_config.provider,zoom:d.Activity.maps_config.zoom,center:c.center,markers:c.markers},null,8,["keys","provider","zoom","center","markers"])])]),_:1})]),_:1},8,["class"]),a("div",K,[s(N,{bordered:"",separator:"",class:"radius8"},{default:r(()=>[s(B,{onLeft:k.changeStatus,"left-color":"light-green-4",class:"radius8"},{left:r(()=>[s(Q,{color:"primary",size:"2em"})]),default:r(()=>[s(x,{class:"text-white text-weight-bold btn-11",style:p(`background-color:${e.data.delivery_steps.status_data.bg_color} !important;color:${e.data.delivery_steps.status_data.font_color} !important;`)},{default:r(()=>[s(y,{class:"text-center font17"},{default:r(()=>[z(n(e.data.delivery_steps.label),1)]),_:1}),s(y,{avatar:""},{default:r(()=>[s(I,{"text-color":"white",style:p(`color:${e.data.delivery_steps.status_data.font_color} !important;`),icon:"las la-angle-double-right"},null,8,["style"])]),_:1})]),_:1},8,["style"])]),_:1},8,["onLeft"])]),_:1})])],2)}var ot=L(V,[["render",U]]);export{ot as default};
