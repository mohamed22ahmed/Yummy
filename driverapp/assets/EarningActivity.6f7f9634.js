import{x as H,r as D,c as L,w,E as z,h as V,U as j,g as Y,G as U,b9 as F,_ as M,ar as G,X as v,p as K,q as i,Z as c,f as e,v as a,$ as W,F as h,a4 as _,a0 as m,a1 as o,a2 as B,ae as l,a5 as A,aj as k,V as X,a3 as $,au as Z,t as E,a7 as b,a8 as J,aa as ee}from"./index.57d98e6b.js";import{Q as te}from"./QToolbarTitle.f2460359.js";import{Q as ae}from"./QToolbar.5785cd51.js";import{Q as re}from"./QHeader.8d398719.js";import{Q as se,a as oe}from"./QPopupProxy.ce6d109d.js";import{Q as le}from"./QCircularProgress.44787b73.js";import{Q as p}from"./QItemLabel.534f2eb0.js";import{Q as ne}from"./QList.9b1deb90.js";import{Q as ie}from"./QInfiniteScroll.0033dd1c.js";import{u as T,a as de}from"./use-page-sticky.d8e87002.js";import{Q as ce}from"./QPage.76c085e2.js";import{Q as fe}from"./QPullToRefresh.b207fbbb.js";import{C as I}from"./ClosePopup.26d225cb.js";import"./QResizeObserver.1c6d7ccc.js";import"./use-render-cache.3aae9b27.js";import"./format.de7e9769.js";import"./QMenu.3e900caf.js";import"./position-engine.6e2e634f.js";import"./selection.b1db311e.js";import"./TouchPan.8da352e0.js";var ue=H({name:"QPageScroller",props:{...T,scrollOffset:{type:Number,default:1e3},reverse:Boolean,duration:{type:Number,default:300},offset:{...T.offset,default:()=>[18,18]}},emits:["click"],setup(t,{slots:d,emit:f}){const{proxy:{$q:C}}=Y(),{$layout:r,getStickyContent:u}=de(),g=D(null);let n;const s=L(()=>r.height.value-(r.isContainer.value===!0?r.containerHeight.value:C.screen.height));function P(){return t.reverse===!0?s.value-r.scroll.value.position>t.scrollOffset:r.scroll.value.position>t.scrollOffset}const Q=D(P());function x(){const y=P();Q.value!==y&&(Q.value=y)}function q(){t.reverse===!0?n===void 0&&(n=w(s,x)):S()}w(r.scroll,x),w(()=>t.reverse,q);function S(){n!==void 0&&(n(),n=void 0)}function N(y){const R=U(r.isContainer.value===!0?g.value:r.rootRef.value);F(R,t.reverse===!0?r.height.value:0,t.duration),f("click",y)}function O(){return Q.value===!0?V("div",{ref:g,class:"q-page-scroller",onClick:N},u(d)):null}return q(),z(S),()=>V(j,{name:"q-transition--fade"},O)}});const he={name:"EarningActivity",components:{CalendarHalf:G(()=>Z(()=>import("./CalendarHalf.dad16ee0.js"),["assets/CalendarHalf.dad16ee0.js","assets/index.57d98e6b.js","assets/index.945c03c3.css","assets/swiper.min.49a5a6c9.js","assets/swiper.min.b39a1361.css"]))},data(){return{loading:!1,date_start:"",date_end:"",data:[],page:0,refresh_done:void 0,proxyDate:void 0,date_range:""}},created(){this.date_start=this.$route.query.start,this.date_end=this.$route.query.end,this.chart_type=this.$route.query.chart_type},computed:{hasData(){return Object.keys(this.data).length>0}},methods:{afterSelectdate(t){this.date_start=t,this.date_end=t,this.resetPagination()},filterByDate(){this.date_start=this.proxyDate.from,this.date_end=this.proxyDate.to,this.resetPagination()},refresh(t){this.refresh_done=t,this.resetPagination()},resetPagination(){this.page=0,this.data=[],this.$refs.nscroll.reset(),this.$refs.nscroll.resume(),this.$refs.nscroll.trigger()},getEarningActivity(t,d){this.loading=!0,v.fetchDataByTokenPost("orderhistory","page="+t+"&date_start="+this.date_start+"&date_end="+this.date_end).then(f=>{this.page=t,this.date_range=f.details.date_range,this.data.push(f.details.data)}).catch(f=>{v.empty(this.$refs.nscroll)||this.$refs.nscroll.stop(),Object.keys(this.data).length>0||(this.date_range="")}).then(f=>{v.empty(d)||d(),v.empty(this.refresh_done)||this.refresh_done(),this.loading=!1})}}},_e={class:"q-pl-sm q-pr-sm q-pt-xs"},me={class:"row"},pe={class:"col-11"},ge={class:"col"},ye={class:"row items-center justify-end q-gutter-sm"},ve={key:0,class:"q-pl-md q-pr-md"},ke=l("div",{class:"font12"},"Viewing",-1),Qe={class:"text-h7"},we={key:0,class:"flex flex-center full-width q-pa-xl",style:{"min-height":"calc(30vh)"}},be={key:0,class:"text-center"},Ce={key:0,class:"flex flex-center",style:{"min-height":"calc(50vh)"}},Pe={class:"text-center"},xe={class:"font16 text-weight-bold"},qe={class:"font11"},Se={class:"text-weight-bold q-mr-sm"};function De(t,d,f,C,r,u){const g=K("CalendarHalf");return i(),c(h,null,[e(re,{class:W({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode}),reveal:"","reveal-offset":"50"},{default:a(()=>[e(ae,null,{default:a(()=>[e(_,{onClick:d[0]||(d[0]=n=>t.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:t.$q.dark.mode?"white":"dark"},null,8,["color"]),e(te,{class:"text-weight-bold"},{default:a(()=>[m(o(t.$t("Earnings Activity")),1)]),_:1})]),_:1}),e(B)]),_:1},8,["class"]),e(fe,{onRefresh:u.refresh},{default:a(()=>[e(ce,null,{default:a(()=>[l("div",_e,[l("div",me,[l("div",pe,[e(g,{ref:"calendar",onAfterSelectdate:u.afterSelectdate,today_date:r.date_start},null,8,["onAfterSelectdate","today_date"])]),l("div",ge,[e(_,{icon:"event",round:"",color:"green-4",size:"sm",flat:""},{default:a(()=>[e(se,{onBeforeShow:t.updateProxy,cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(oe,{modelValue:r.proxyDate,"onUpdate:modelValue":d[1]||(d[1]=n=>r.proxyDate=n),mask:"YYYY-MM-DD",range:""},{default:a(()=>[l("div",ye,[A(e(_,{label:"Cancel",color:"primary",flat:""},null,512),[[I]]),A(e(_,{label:"OK",color:"primary",flat:"",onClick:u.filterByDate},null,8,["onClick"]),[[I]])])]),_:1},8,["modelValue"])]),_:1},8,["onBeforeShow"])]),_:1})])]),e(B)]),r.date_range?(i(),c("div",ve,[ke,l("div",Qe,o(r.date_range),1)])):k("",!0),e(ie,{ref:"nscroll",onLoad:u.getEarningActivity,offset:250},{loading:a(()=>[r.page<=0?(i(),c("div",we,[e(X,{color:"primary",size:"2em"})])):(i(),c(h,{key:1},[r.data.length>1?(i(),c("div",be,[e(le,{indeterminate:"",rounded:"",size:"30px",color:"primary",class:"q-ma-md"})])):k("",!0)],64))]),default:a(()=>[!r.loading&&!u.hasData?(i(),c("div",Ce,[l("div",Pe,[l("div",xe,o(t.$t("No available data")),1),l("p",qe,o(t.$t("Pull down the page to refresh")),1)])])):k("",!0),e(ne,{separator:""},{default:a(()=>[(i(!0),c(h,null,$(r.data,n=>(i(),c(h,{key:n},[(i(!0),c(h,null,$(n,s=>(i(),E(ee,{key:s},{default:a(()=>[e(b,{avatar:"",style:{"min-width":"35px"}},{default:a(()=>[e(J,{color:s.online_payment?"blue":"green-4","text-color":"white",size:"md",icon:s.online_payment?"las la-credit-card":"las la-hand-holding-usd"},null,8,["color","icon"])]),_:2},1024),e(b,null,{default:a(()=>[e(p,{class:"font12"},{default:a(()=>[l("span",Se,o(s.delivery_time),1),l("span",null,"#"+o(s.order_id),1)]),_:2},1024),e(p,{caption:""},{default:a(()=>[m(o(s.merchant.restaurant_name),1)]),_:2},1024),e(p,{caption:""},{default:a(()=>[m(o(s.merchant.address),1)]),_:2},1024)]),_:2},1024),e(b,{side:""},{default:a(()=>[e(p,null,{default:a(()=>[m(o(s.delivery_pay),1)]),_:2},1024),s.courier_tip_raw>0?(i(),E(p,{key:0,caption:"",class:"font11"},{default:a(()=>[m(o(s.delivery_fee)+" + "+o(s.courier_tip)+" "+o(t.$t("tips")),1)]),_:2},1024)):k("",!0)]),_:2},1024)]),_:2},1024))),128))],64))),128))]),_:1})]),_:1},8,["onLoad"]),e(ue,{position:"bottom-right","scroll-offset":150,offset:[18,18]},{default:a(()=>[e(_,{fab:"",icon:"keyboard_arrow_up",color:"primary",dense:"",unelevated:""})]),_:1})]),_:1})]),_:1},8,["onRefresh"])],64)}var We=M(he,[["render",De]]);export{We as default};
