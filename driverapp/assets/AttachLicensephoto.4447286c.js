import{_ as $,ar as A,u as B,X as s,p as C,q as r,Z as p,f as e,v as _,$ as u,F as y,a4 as f,a0 as k,a1 as l,a2 as g,V as Q,ae as o,t as d,ah as q,aj as P,au as D}from"./index.57d98e6b.js";import{Q as w}from"./QToolbarTitle.f2460359.js";import{Q as U}from"./QToolbar.5785cd51.js";import{Q as L}from"./QHeader.8d398719.js";import{Q as v}from"./QSpace.6257f203.js";import{Q as m}from"./QImg.0d589814.js";import{Q as S}from"./QFooter.9a53d96e.js";import{Q as x}from"./QPage.76c085e2.js";import{A as c}from"./AppCamera.2e0dc590.js";import"./QResizeObserver.1c6d7ccc.js";const F={name:"TakeLicensePhoto",components:{UploaderFile:A(()=>D(()=>import("./UploaderFile.778c5550.js"),["assets/UploaderFile.778c5550.js","assets/index.57d98e6b.js","assets/index.945c03c3.css","assets/QCircularProgress.44787b73.js","assets/format.de7e9769.js"]))},setup(){return{ActivityStore:B()}},data(){return{upload_path:"",photo_data:"",photo_data_back:"",front_upload_enabled:!1,front_photo_filename:"",front_photo_url:"",back_upload_enabled:!1,back_photo_filename:"",back_photo_url:"",loading:!1,driver_uuid:""}},created(){this.driver_uuid=this.$route.query.uuid},computed:{hasPhoto(){return!s.empty(this.front_photo_filename)},hasData(){return Object.keys(this.photo_data).length>0},hasBackPhoto(){return!s.empty(this.back_photo_filename)},hasBackData(){return Object.keys(this.photo_data_back).length>0},hasAddedPhoto(){let t=!1;return Object.keys(this.photo_data).length>0&&Object.keys(this.photo_data_back).length>0&&(t=!0),s.empty(this.front_photo_filename)||s.empty(this.back_photo_filename)||(t=!0),!t}},methods:{takePhoto(){this.$q.capacitor?c.isCameraEnabled().then(t=>{c.isFileAccessEnabled().then(i=>{c.getPhoto(1).then(n=>{this.photo_data=n}).catch(n=>{this.photo_data=[]})}).catch(i=>{s.notify("dark",i,"error",this.$q)})}).catch(t=>{s.notify("dark",t,"error",this.$q)}):this.front_upload_enabled=!this.front_upload_enabled},takeBackPhoto(){this.$q.capacitor?c.isCameraEnabled().then(t=>{c.isFileAccessEnabled().then(i=>{c.getPhoto(1).then(n=>{this.photo_data_back=n}).catch(n=>{this.photo_data_back=[]})}).catch(i=>{s.notify("dark",i,"error",this.$q)})}).catch(t=>{s.notify("dark",t,"error",this.$q)}):this.back_upload_enabled=!this.back_upload_enabled},afterUploadfile(t){this.front_photo_filename=t.filename,this.front_photo_url=t.url_image,this.upload_path=t.upload_path},afterUploadfileBackphoto(t){this.back_photo_filename=t.filename,this.back_photo_url=t.url_image,this.upload_path=t.upload_path},hadData(){return Object.keys(this.photo_data).length>0},addLicensephoto(){s.showLoadingBox("",this.$q),s.addLicensephoto({driver_uuid:this.driver_uuid,front_photo_filename:this.front_photo_filename,front_photo_url:this.front_photo_url,upload_path:this.upload_path,file_data:this.hadData()?this.photo_data.data:"",image_type:this.hadData()?this.photo_data.format:"",back_photo_filename:this.back_photo_filename,back_photo_url:this.back_photo_url,upload_path:this.upload_path,photo_data_back:this.hadData()?this.photo_data_back.data:"",image_type_back:this.hadData()?this.photo_data_back.format:""}).then(t=>{console.log(this.ActivityStore.settings_data.registration_process),this.ActivityStore.settings_data.registration_process=="activate_account"?this.$router.push({path:"/account/signup_ty"}):this.$router.push({path:"/account/verified_ty"})}).catch(t=>{s.notify("dark",t,"error_outline",this.$q)}).then(t=>{s.hideLoadingBox(this.$q)})}}},j={key:0,class:"fit text-center"},E={class:"text-h7"},I={class:"font14"},z={class:"row q-col-gutter-sm q-mb-sm q-pl-sm q-pr-sm"},T={class:"col"},V={class:"font12 line-normal"},N={class:"text-weight-bold"},O={class:"row q-col-gutter-sm q-mb-sm q-pl-sm q-pr-sm"},M={class:"col"},G={class:"font12 line-normal"},J={class:"text-weight-bold"};function H(t,i,n,R,h,a){const b=C("UploaderFile");return r(),p(y,null,[e(L,{class:u({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode})},{default:_(()=>[e(U,null,{default:_(()=>[e(f,{onClick:i[0]||(i[0]=X=>t.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:t.$q.dark.mode?"white":"dark"},null,8,["color"]),e(w,{class:"text-weight-bold"},{default:_(()=>[k(l(t.$t("License")),1)]),_:1})]),_:1}),e(g)]),_:1},8,["class"]),e(x,{class:u(["q-pa-md",{"flex flex-center":h.loading}])},{default:_(()=>[h.loading?(r(),p("div",j,[e(Q,{color:"primary",size:"2em"})])):(r(),p(y,{key:1},[o("div",E,l(t.$t("Driver's License")),1),o("ul",I,[o("li",null,l(t.$t("Make sure the entire license and all the details are VISIBLE")),1),o("li",null,l(t.$t("Take a Photo")),1),o("li",null,l(t.$t("Upload a Photo")),1)]),e(v,{class:"q-pa-sm"}),o("div",z,[a.hasData?(r(),d(m,{key:0,src:h.photo_data.path,"spinner-color":"primary","spinner-size":"sm",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):a.hasPhoto?(r(),d(m,{key:1,src:this.front_photo_url,"spinner-color":"primary",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):(r(),p("div",{key:2,class:u(["col-3 row items-center justify-center radius8",{"bg-grey600":t.$q.dark.mode,"bg-mygrey":!t.$q.dark.mode}]),style:{height:"70px"}},[e(q,{name:"las la-image",class:"text-grey",size:"xl"})],2)),o("div",T,[o("div",V,[o("span",N,l(t.$t("Front Photo of ID")),1),k(". "+l(t.$t("Maximum 2MB. Accepted types: PNG. JPG")),1)]),e(f,{label:a.hasPhoto?this.$t("Change Photo"):a.hasData?this.$t("Change Photo"):this.$t("Add Photo"),flat:"",color:"primary","no-caps":"",class:"q-pl-none q-pr-none",onClick:a.takePhoto},null,8,["label","onClick"])])]),h.front_upload_enabled?(r(),d(b,{key:0,ref:"uploader_file",path:"upload/license",onAfterUploadfile:a.afterUploadfile},null,8,["onAfterUploadfile"])):P("",!0),e(g),e(v,{class:"q-pa-md"}),o("div",O,[a.hasBackData?(r(),d(m,{key:0,src:h.photo_data_back.path,"spinner-color":"primary","spinner-size":"sm",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):a.hasBackPhoto?(r(),d(m,{key:1,src:this.back_photo_url,"spinner-color":"primary",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):(r(),p("div",{key:2,class:u(["col-3 row items-center justify-center radius8",{"bg-grey600":t.$q.dark.mode,"bg-mygrey":!t.$q.dark.mode}]),style:{height:"70px"}},[e(q,{name:"las la-image",class:"text-grey",size:"xl"})],2)),o("div",M,[o("div",G,[o("span",J,l(t.$t("Back Photo of ID")),1),k(". "+l(t.$t("Maximum 2MB. Accepted types: PNG. JPG")),1)]),e(f,{label:a.hasBackPhoto?this.$t("Change Photo"):a.hasBackData?this.$t("Change Photo"):this.$t("Add Photo"),flat:"",color:"primary","no-caps":"",class:"q-pl-none q-pr-none",onClick:a.takeBackPhoto},null,8,["label","onClick"])])]),h.back_upload_enabled?(r(),d(b,{key:1,ref:"uploader_file",path:"upload/license",onAfterUploadfile:a.afterUploadfileBackphoto},null,8,["onAfterUploadfile"])):P("",!0),e(S,{class:u(["q-pa-md",{"bg-mydark ":t.$q.dark.mode,"bg-white ":!t.$q.dark.mode}])},{default:_(()=>[e(f,{onClick:a.addLicensephoto,color:"primary","text-color":"white",label:t.$t("Confirm Photo"),unelevated:"",class:"full-width",size:"lg","no-caps":"",loading:h.loading,disable:a.hasAddedPhoto},null,8,["onClick","label","loading","disable"])]),_:1},8,["class"])],64))]),_:1},8,["class"])],64)}var lt=$(F,[["render",H]]);export{lt as default};
